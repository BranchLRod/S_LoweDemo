                                                                                                                   var Clock = {
                                                                                                                       minutes: ["00", "30"],
                                                                                                                       format: function(b, g) {
                                                                                                                           return str = 1 == b.toString().length ? "0" + b + ":" + g : b + ":" + g
                                                                                                                       },
                                                                                                                       drawTime: function(b, g) {
                                                                                                                           var e = (!b ? "10:00" : b).split(":", 2),
                                                                                                                               f = e[0],
                                                                                                                               f = parseInt(f, 10),
                                                                                                                               e = e[1],
                                                                                                                               a = "",
                                                                                                                               d;
                                                                                                                           if (g)
                                                                                                                               for (d = 0; 24 > d; d++)
                                                                                                                                   for (var c = 0; 2 > c; c++) b = this.format(d, this.minutes[c]), a = f === d && e === this.minutes[c] ? a + ('<option selected="selected" value="' + b + '">' + b + "</option>") : a + ('<option value="' + b + '">' + b + "</option>");
                                                                                                                           else {
                                                                                                                               a = 0 === f && "00" === e ? a + '<option selected="selected" value="00:00">12:00 Midnight</option>' :
                                                                                                                                   a + '<option value="00:00">12:00 Midnight</option>';
                                                                                                                               a = 0 === f && "30" === e ? a + '<option selected="selected" value="00:30">12:30 AM</option>' : a + '<option value="00:30">12:30 AM</option>';
                                                                                                                               for (d = 1; 12 > d; d++)
                                                                                                                                   for (c = 0; 2 > c; c++) b = this.format(d, this.minutes[c]), a = f === d && Number(e) == this.minutes[c] ? a + ('<option selected="selected" value="' + b + '">' + b + " AM</option>") : a + ('<option value="' + b + '">' + b + " AM</option>");
                                                                                                                               for (var a = 12 === f && "00" === e ? a + '<option selected="selected" value="12:00">12:00 Noon</option>' : a + '<option value="12:00">12:00 Noon</option>',
                                                                                                                                       a = 12 === f && "30" === e ? a + '<option selected="selected" value="00:30">12:30 PM</option>' : a + '<option value="12:30">12:30 PM</option>', h = 1; 12 > h; h++)
                                                                                                                                   for (var i = h + 12, c = 0; 2 > c; c++) b = this.format(h, this.minutes[c]), d = this.format(i, this.minutes[c]), a = f == i && e == this.minutes[c] ? a + ('<option selected="selected" value="' + d + '">' + b + " PM</option>") : a + ('<option value="' + d + '">' + b + " PM</option>")
                                                                                                                           }
                                                                                                                           return "<select>" + a + "</select>"
                                                                                                                       }
                                                                                                                   };
                                                                                                                   "function" == typeof define && define.amd && define("tools/timelist", [], function() {
                                                                                                                       return Clock
                                                                                                                   });
                                                                                                                   var Calendar = function(a) {
                                                                                                                       this.params = _.extend({
                                                                                                                           euro: !1,
                                                                                                                           increment: 1,
                                                                                                                           mode: 1,
                                                                                                                           expandable: !0
                                                                                                                       }, a);
                                                                                                                       this.init()
                                                                                                                   };
                                                                                                                   Calendar.prototype = {
                                                                                                                       header: function(a, b) {
                                                                                                                           return '<header><span class="prev arrow"><span class="icons-arrow_black_left"></span></span><span class="next arrow"><span class="icons-arrow_black_right"></span></span><h1 data-automation-id = "' + (a + 1) + '">' + this.params.monthNames[a] + " " + b + "</h1></header>"
                                                                                                                       },
                                                                                                                       daysHeader: function() {
                                                                                                                           for (var a = "<tr>", b = 0; b < this.params.headers.length; b++) a += "<th>" + this.params.headers[b] + "</th>";
                                                                                                                           return a + "</tr>"
                                                                                                                       },
                                                                                                                       drawMonth: function(a, b) {
                                                                                                                           var c = new Date(b, a, 1),
                                                                                                                               d = c.getDay(),
                                                                                                                               i = (new Date(b,
                                                                                                                                   a + 1, 0)).getDate();
                                                                                                                           (new Date(b, a, 0)).getDate();
                                                                                                                           for (var f = 0 - d, j = 0 === this.params.start.val().length ? null : this.createDate(this.params.start.val()), h = this.params.end ? 0 === this.params.end.val().length ? null : this.createDate(this.params.end.val()) : null, n = 2 === this.params.mode ? "dual" : "", e = '<table class="body" cellpadding="0" cellspacing="0" border="0">' + this.daysHeader(), g = 0; 6 > g; g++) {
                                                                                                                               for (var e = e + "<tr>", k = 0; 7 > k; k++) {
                                                                                                                                   f++;
                                                                                                                                   var l = "",
                                                                                                                                       m = "";
                                                                                                                                   0 >= f || f > i ? l = "empty" : m = f;
                                                                                                                                   e += '<td class="' + l + '">' + m + "</td>"
                                                                                                                               }
                                                                                                                               e += "</tr>"
                                                                                                                           }
                                                                                                                           e += "</table>";
                                                                                                                           if (this.today.getMonth() === a && this.today.getFullYear() === b) {
                                                                                                                               f = this.today.getDate() + d - 1;
                                                                                                                               e = this.highlight(e, f, "today");
                                                                                                                               for (g = f - 1; g >= d; g--) e = this.highlight(e, g, "past")
                                                                                                                           }
                                                                                                                           j && (j.getMonth() === a && j.getFullYear() === b) && (f = j.getDate() + d - 1, e = this.highlight(e, f, "start"));
                                                                                                                           h && (h.getMonth() === a && h.getFullYear() === b) && (f = h.getDate() + d - 1, e = this.highlight(e, f, "end"));
                                                                                                                           j && h && (e = $("<div>" + e + "</div>"), f = parseInt(e.find("td.start").text()), g = parseInt(e.find("td.end").text()), startIndex = f ? f + d - 1 : d, endIndex = g ? g + d - 1 : i + d, f ||
                                                                                                                               g ? e.find("td").slice(startIndex, endIndex).addClass("selected") : j.getTime() < c.getTime() && h.getTime() > c.getTime() && e.find("td").slice(startIndex, endIndex).addClass("selected"), e = e.html());
                                                                                                                           return '<div class="month ' + n + '"><div class="wrapper">' + this.header(a, b) + e + "</div></div>"
                                                                                                                       },
                                                                                                                       highlight: function(a, b, c) {
                                                                                                                           a = $("<div>" + a + "</div>");
                                                                                                                           $(a).find("td:eq(" + b + ")").addClass(c);
                                                                                                                           return a.html()
                                                                                                                       },
                                                                                                                       footer: function(a) {
                                                                                                                           return '<footer class="clearfix"><span class="area"><span class="close">' + a + '</span><span class="icons-close_sm"></span></span></footer>'
                                                                                                                       },
                                                                                                                       maxDate: function() {
                                                                                                                           var a = new Date(this.today.getTime());
                                                                                                                           a.setFullYear(a.getFullYear() + 1);
                                                                                                                           a.setMonth(a.getMonth() + 4);
                                                                                                                           a.setDate(0);
                                                                                                                           return a
                                                                                                                       },
                                                                                                                       calendarMonths: function() {
                                                                                                                           if (this.params.content) {
                                                                                                                               var a = this.params.content.homePage.calendarContent;
                                                                                                                               return [a.calMonthJan, a.calMonthFeb, a.calMonthMar, a.calMonthApr, a.calMonthMay, a.calMonthJun, a.calMonthJul, a.calMonthAug, a.calMonthSep, a.calMonthOct, a.calMonthNov, a.calMonthDec]
                                                                                                                           }
                                                                                                                           return htz.calendar.monthNames
                                                                                                                       },
                                                                                                                       calendarDays: function() {
                                                                                                                           if (this.params.content) {
                                                                                                                               var a =
                                                                                                                                   this.params.content.homePage.calendarContent;
                                                                                                                               return [a.calDaySun, a.calDayMon, a.calDayTues, a.calDayWed, a.calDayThur, a.calDayFri, a.calDaySat]
                                                                                                                           }
                                                                                                                           return htz.calendar.dayHeaders
                                                                                                                       },
                                                                                                                       init: function() {
                                                                                                                           var a = this,
                                                                                                                               b = a.params.start,
                                                                                                                               c = a.params.end,
                                                                                                                               d = a.params.startText || null,
                                                                                                                               i = a.params.endText || null,
                                                                                                                               f = function() {};
                                                                                                                           a.params.syncPickupAndDropoff && (f = a.params.syncPickupAndDropoff);
                                                                                                                           a.params.monthNames = a.calendarMonths();
                                                                                                                           a.params.headers = a.calendarDays();
                                                                                                                           this.params.content ? (a.params.returnBeforePickup = a.params.content.homePage.jsErrorContent.invalidDateError,
                                                                                                                               a.params.closeButton = a.params.content.links.closeButton) : (a.params.returnBeforePickup = htz.calendar.content.returnBeforePickup, a.params.closeButton = htz.calendar.content.closeText);
                                                                                                                           a.params.mode = a.params.target ? 1 : a.params.mode;
                                                                                                                           a.params.expandable = a.params.target ? !1 : a.params.expandable;
                                                                                                                           a.calendar = $('<div class="calendar"></div>');
                                                                                                                           if (b && d) d.on("click", function() {
                                                                                                                               localStorage.removeItem("PICK_UP_DATE");
                                                                                                                               if (a.active) a.close();
                                                                                                                               else {
                                                                                                                                   a.today = a.createDate();
                                                                                                                                   a.input = b;
                                                                                                                                   a.inputText = d.find(".value");
                                                                                                                                   a.dropoff = !1;
                                                                                                                                   var c = a.maxDate();
                                                                                                                                   a.currentDate = a.createDate(b.val());
                                                                                                                                   a.currentDate.setDate(1);
                                                                                                                                   2 === a.params.mode && (c.getMonth() === a.currentDate.getMonth() && c.getFullYear() === a.currentDate.getFullYear()) && a.currentDate.setMonth(a.currentDate.getMonth() - 1);
                                                                                                                                   a.show(this);
                                                                                                                                   return !1
                                                                                                                               }
                                                                                                                           });
                                                                                                                           if (c && i) i.on("click", function() {
                                                                                                                               localStorage.removeItem("DROP_OFF_DATE");
                                                                                                                               if (a.active) a.close();
                                                                                                                               else {
                                                                                                                                   a.today = a.createDate();
                                                                                                                                   a.input = c;
                                                                                                                                   a.inputText = i.find(".value");
                                                                                                                                   a.dropoff = !0;
                                                                                                                                   var f = a.maxDate();
                                                                                                                                   if (0 === c.val().length && 0 !== b.val().length) {
                                                                                                                                       var h =
                                                                                                                                           a.createDate(b.val()),
                                                                                                                                           d = (new Date(h.getFullYear(), h.getMonth() + 1, 0)).getDate();
                                                                                                                                       a.currentDate = a.createDate(b.val());
                                                                                                                                       a.params.expandable && 7 > d - h.getDate() && (a.params.mode = 2, htz.helpers.SessionHelper.setItem("calendarMode", 2))
                                                                                                                                   } else 0 !== b.val().length ? (h = a.createDate(b.val()), d = a.createDate(c.val()), d.setDate(1), d.setMonth(d.getMonth() - 1), a.currentDate = 2 === a.params.mode && h.getMonth() === d.getMonth() && h.getFullYear() === d.getFullYear() ? h : a.createDate(c.val())) : a.currentDate = a.createDate(c.val());
                                                                                                                                   a.currentDate.setDate(1);
                                                                                                                                   2 === a.params.mode && (f.getMonth() === a.currentDate.getMonth() && f.getFullYear() === a.currentDate.getFullYear()) && a.currentDate.setMonth(a.currentDate.getMonth() - 1);
                                                                                                                                   a.show(this)
                                                                                                                               }
                                                                                                                           });
                                                                                                                           a.calendar.delegate("span.next", "click", function() {
                                                                                                                               a.shuffle(1)
                                                                                                                           });
                                                                                                                           a.calendar.delegate("span.prev", "click", function() {
                                                                                                                               a.shuffle(-1)
                                                                                                                           });
                                                                                                                           a.calendar.delegate("td", "click", function() {
                                                                                                                               if (!$(this).hasClass("empty") && !$(this).hasClass("past")) {
                                                                                                                                   var b = a.inputStr(this),
                                                                                                                                       c = a.createDate(b),
                                                                                                                                       d = a.dropoff ? a.createDate(a.params.start.val()) : c,
                                                                                                                                       e = a.params.end ? a.dropoff ? c : a.createDate(a.params.end.val()) : null;
                                                                                                                                   if (a.dropoff && e.getTime() < d.getTime()) $(this).mouseout(), alert(a.params.returnBeforePickup);
                                                                                                                                   else {
                                                                                                                                       if (a.params.end && 0 !== a.params.end.val().length && d.getTime() >= e.getTime()) {
                                                                                                                                           var g = a.maxDate(),
                                                                                                                                               g = g.getFullYear() === d.getFullYear() && g.getMonth() === d.getMonth() && g.getDate() === d.getDate() ? 0 : a.params.increment,
                                                                                                                                               c = new Date(c.getTime() + 864E5 * g),
                                                                                                                                               c = a.dateToStr(c);
                                                                                                                                           a.params.end.val(c);
                                                                                                                                           a.params.end.trigger("change");
                                                                                                                                           a.params.endText.find(".value").text(c)
                                                                                                                                       }
                                                                                                                                       f(b,
                                                                                                                                           a.input.selector, g, a);
                                                                                                                                       a.input.val(b);
                                                                                                                                       a.input.trigger("change");
                                                                                                                                       a.inputText.text(b);
                                                                                                                                       a.dropoff ? localStorage.setItem("DROP_OFF_DATE", b) : localStorage.setItem("PICK_UP_DATE", b);
                                                                                                                                       a.close()
                                                                                                                                   }
                                                                                                                               }
                                                                                                                           });
                                                                                                                           a.calendar.delegate("td", "mouseover", function() {
                                                                                                                               !$(this).hasClass("past") && !$(this).hasClass("empty") && $(this).addClass("hover")
                                                                                                                           });
                                                                                                                           a.calendar.delegate("td", "mouseout", function() {
                                                                                                                               $(this).removeClass("hover")
                                                                                                                           });
                                                                                                                           a.calendar.delegate("footer span", "click", function() {
                                                                                                                               a.close()
                                                                                                                           });
                                                                                                                           a.calendar.append(a.footer(a.params.closeButton));
                                                                                                                           this.params.calledWithinOverlay || $("body").find(".calendar").remove();
                                                                                                                           a.params.target ? (a.calendar.addClass("elastic"), $(a.params.target).wrapInner("<div>"), $(a.params.target).append(a.calendar)) : ($("body").append(a.calendar), $("body").hasClass("lt-ie7") && (a.iframe = $('<iframe class="calendar">'), $("body").append(a.iframe)))
                                                                                                                       },
                                                                                                                       close: function() {
                                                                                                                           this.calendar.hide();
                                                                                                                           this.params.target ? this.calendar.siblings().show() : this.iframe && this.iframe.hide();
                                                                                                                           this.active = !1
                                                                                                                       },
                                                                                                                       dateToStr: function(a) {
                                                                                                                           var b = parseInt(a.getMonth() +
                                                                                                                                   1),
                                                                                                                               c = parseInt(a.getDate()),
                                                                                                                               c = 10 > c ? "0" + c : c,
                                                                                                                               b = 10 > b ? "0" + b : b;
                                                                                                                           return this.params.euro ? c + "/" + b + "/" + a.getFullYear() : b + "/" + c + "/" + a.getFullYear()
                                                                                                                       },
                                                                                                                       inputStr: function(a) {
                                                                                                                           var b = $(a).text(),
                                                                                                                               a = $(a).closest(".month").index(),
                                                                                                                               c = new Date(this.currentDate.getTime());
                                                                                                                           c.setMonth(c.getMonth() + a);
                                                                                                                           c.setDate(b);
                                                                                                                           return this.dateToStr(c)
                                                                                                                       },
                                                                                                                       resize: function() {
                                                                                                                           !this.params.target && $("body").hasClass("lt-ie8") && (1 === this.params.mode ? this.calendar.width(230) : 2 === this.params.mode && this.calendar.width(460), this.iframe && (this.iframe.show(),
                                                                                                                               this.iframe.css({
                                                                                                                                   height: this.calendar.outerHeight(),
                                                                                                                                   width: this.calendar.outerWidth(),
                                                                                                                                   top: this.calendar.position().top,
                                                                                                                                   left: this.calendar.position().left
                                                                                                                               })))
                                                                                                                       },
                                                                                                                       show: function(a) {
                                                                                                                           var b = this;
                                                                                                                           b.create();
                                                                                                                           b.calendar.show();
                                                                                                                           if (b.params.target) b.calendar.siblings().hide();
                                                                                                                           else {
                                                                                                                               var c = $("#container").width(),
                                                                                                                                   d = b.calendar.width(),
                                                                                                                                   i = $(a).offset().left;
                                                                                                                               d + i > c ? b.calendar.css({
                                                                                                                                   top: $(a).offset().top + $(a).outerHeight(),
                                                                                                                                   right: $(window).width() - i - $(a).outerWidth(),
                                                                                                                                   left: ""
                                                                                                                               }) : b.calendar.css({
                                                                                                                                   top: $(a).offset().top + $(a).outerHeight(),
                                                                                                                                   left: i,
                                                                                                                                   right: ""
                                                                                                                               });
                                                                                                                               $(window).height();
                                                                                                                               a = $(window).width(); - 1 == b.calendar[0].className.indexOf("elastic") && (480 > a ? (b.calendar.css({
                                                                                                                                   right: "0"
                                                                                                                               }), b.calendar.find("div:first").css({
                                                                                                                                   width: "51%"
                                                                                                                               }), b.calendar.find("header").css({
                                                                                                                                   "margin-right": "-113%"
                                                                                                                               })) : b.calendar.find("span.area").css({
                                                                                                                                   "margin-top": "0"
                                                                                                                               }));
                                                                                                                               $(window).on("resize", function() {
                                                                                                                                   $(window).height();
                                                                                                                                   480 < $(window).width() && b.calendar.hide()
                                                                                                                               });
                                                                                                                               b.resize()
                                                                                                                           }
                                                                                                                           b.active = !0
                                                                                                                       },
                                                                                                                       create: function() {
                                                                                                                           var a = this.calendar.find("footer"),
                                                                                                                               b = this.maxDate();
                                                                                                                           this.calendar.find(".month").remove();
                                                                                                                           a.before(this.drawMonth(this.currentDate.getMonth(), this.currentDate.getFullYear()));
                                                                                                                           if (2 === this.params.mode) {
                                                                                                                               var c = new Date(this.currentDate.getTime());
                                                                                                                               c.setMonth(c.getMonth() + 1);
                                                                                                                               a.before(this.drawMonth(c.getMonth(), c.getFullYear()));
                                                                                                                               this.calendar.find("span.next:first").hide();
                                                                                                                               this.calendar.find("span.prev:last").hide();
                                                                                                                               b.setDate(0)
                                                                                                                           }
                                                                                                                           this.currentDate.getMonth() === this.today.getMonth() && this.currentDate.getFullYear() === this.today.getFullYear() && this.calendar.find("span.prev").hide();
                                                                                                                           this.currentDate.getMonth() ===
                                                                                                                               b.getMonth() && this.currentDate.getFullYear() === b.getFullYear() && this.calendar.find("span.next").hide();
                                                                                                                           $(window).height();
                                                                                                                           a = $(window).width(); - 1 == this.calendar[0].className.indexOf("elastic") && 480 > a && (this.calendar.find("div:first").css({
                                                                                                                               width: "51%"
                                                                                                                           }), this.calendar.find("header").css({
                                                                                                                               "margin-right": "-121%"
                                                                                                                           }), this.calendar.find("span.area").css({
                                                                                                                               "margin-top": "245px"
                                                                                                                           }))
                                                                                                                       },
                                                                                                                       shuffle: function(a) {
                                                                                                                           1 === this.params.mode && this.params.expandable && (this.params.mode = 2, htz.helpers.SessionHelper.setItem("calendarMode",
                                                                                                                               2), a = 0 < a ? a - 1 : a);
                                                                                                                           this.currentDate.setMonth(this.currentDate.getMonth() + a);
                                                                                                                           this.create();
                                                                                                                           this.resize()
                                                                                                                       },
                                                                                                                       createDate: function(a) {
                                                                                                                           if (!a || 0 === a.length) return a = new Date, new Date(a.getFullYear(), a.getMonth(), a.getDate());
                                                                                                                           a = a.split("/");
                                                                                                                           return newDate = this.params.euro ? new Date(a[2], a[1] - 1, a[0]) : new Date(a[2], a[0] - 1, a[1])
                                                                                                                       }
                                                                                                                   };
                                                                                                                   "function" == typeof define && define.amd && define("tools/calendar", [], function() {
                                                                                                                       return Calendar
                                                                                                                   });
                                                                                                                   var WordwheelModel = Backbone.Model.extend({});
                                                                                                                   var WordwheelCollection = Backbone.Collection.extend({
                                                                                                                           model: WordwheelModel,
                                                                                                                           url: (htz.homepage && htz.homepage.json ? htz.homepage.json.data.model.metaData.wordWheelUrl : "undefined" != typeof htz.wordwheel ? htz.wordwheel.url : "") + "?callback=?&dialect=" + htz.config.dialect + "&systemId=" + htz.config.systemId + "&subSystemId=" + htz.config.subSystemId,
                                                                                                                           sync: function(b, c, a) {
                                                                                                                               a.timeout = 1E4;
                                                                                                                               a.dataType = "jsonp";
                                                                                                                               a.cache = !0;
                                                                                                                               a.jsonpCallback = "parse";
                                                                                                                               return Backbone.sync(b, c, a)
                                                                                                                           },
                                                                                                                           parse: function(b) {
                                                                                                                               $(b.locationList).each(function(c,
                                                                                                                                   a) {
                                                                                                                                   a.searchText = b.searchText;
                                                                                                                                   a.showMap = b.showMap
                                                                                                                               });
                                                                                                                               return b.locationList
                                                                                                                           }
                                                                                                                       }),
                                                                                                                       WordwheelMultiLocationCollection = Backbone.Collection.extend({
                                                                                                                           model: WordwheelModel,
                                                                                                                           sync: function(b, c, a) {
                                                                                                                               a.timeout = 1E4;
                                                                                                                               a.dataType = "jsonp";
                                                                                                                               a.cache = !0;
                                                                                                                               a.jsonpCallback = "parse";
                                                                                                                               return Backbone.sync(b, c, a)
                                                                                                                           },
                                                                                                                           parse: function(b) {
                                                                                                                               if (b.data.locations) return $(b.data.locations).each(function(b, a) {
                                                                                                                                   a.displayText = a.locationName;
                                                                                                                                   a.locationTitle = "";
                                                                                                                                   a.address2 = a.streetAddressLine1;
                                                                                                                                   a.address3 = a.streetAddressLine2;
                                                                                                                                   a.stateCode = a.stateProvinceCode;
                                                                                                                                   a.phone = a.phoneNumber;
                                                                                                                                   a.hoursOfOperation = a.hoursOfOperation1;
                                                                                                                                   a.preferredOag = a.extendedOAGCode;
                                                                                                                                   delete a.locationName;
                                                                                                                                   delete a.stateProvinceCode;
                                                                                                                                   delete a.streetAddressLine1;
                                                                                                                                   delete a.streetAddressLine2;
                                                                                                                                   delete a.phoneNumber;
                                                                                                                                   delete a.hoursOfOperation1;
                                                                                                                                   delete a.extendedOAGCode
                                                                                                                               }), b.data.locations;
                                                                                                                               if (b.data.ftsResults.zipCodeMatches) return $(b.data.ftsResults.zipCodeMatches).each(function(b, a) {
                                                                                                                                   a.displayText = a.locationName;
                                                                                                                                   a.locationTitle = "";
                                                                                                                                   a.address2 = a.streetAddressLine1;
                                                                                                                                   a.address3 = a.streetAddressLine2;
                                                                                                                                   a.stateCode = a.stateProvinceCode;
                                                                                                                                   a.phone = a.phoneNumber;
                                                                                                                                   a.hoursOfOperation = a.hoursOfOperation1;
                                                                                                                                   a.preferredOag = a.extendedOAGCode;
                                                                                                                                   delete a.locationName;
                                                                                                                                   delete a.stateProvinceCode;
                                                                                                                                   delete a.streetAddressLine1;
                                                                                                                                   delete a.streetAddressLine2;
                                                                                                                                   delete a.phoneNumber;
                                                                                                                                   delete a.hoursOfOperation1;
                                                                                                                                   delete a.extendedOAGCode
                                                                                                                               }), b.data.ftsResults.zipCodeMatches
                                                                                                                           }
                                                                                                                       });
                                                                                                                   var userInputText = "",
                                                                                                                       Wordwheel = {
                                                                                                                           model: null,
                                                                                                                           init: function() {
                                                                                                                               for (var a = 0; a < localStorage.length; a++) {
                                                                                                                                   var b = localStorage.key(a);
                                                                                                                                   if (b.match("^ww-") && b.match("-" + htz.config.dialect + "$")) {
                                                                                                                                       var c = JSON.parse(unescape(HStorage.getItem(b)));
                                                                                                                                       "86400000" < (new Date).getTime().toString() - c.timestamp && localStorage.removeItem(b)
                                                                                                                                   }
                                                                                                                               }
                                                                                                                               Wordwheel.loadMapQuestAPI()
                                                                                                                           },
                                                                                                                           loadMapQuestAPI: function() {
                                                                                                                               window.L ? Wordwheel.mapquestLibLoaded = !0 : Wordwheel.mapquestLibLoaded = !1
                                                                                                                           },
                                                                                                                           trigWW: function(a) {
                                                                                                                               var b = this,
                                                                                                                                   c;
                                                                                                                               b.model = null;
                                                                                                                               b.el = c = $(a.target);
                                                                                                                               "undefined" === typeof b.input || null === b.input || b.input.$el.attr("id") !== $(a.target).attr("id") ? b.input = new WWInputView({
                                                                                                                                   el: c
                                                                                                                               }) : b.input.$el = c;
                                                                                                                               $("body").on("click", function(a) {
                                                                                                                                   0 < $(".ww-results").length && !$.contains($(".ww-results").get(0), a.target) && (b.wwView.hide(), b.model = null)
                                                                                                                               });
                                                                                                                               38 != a.keyCode && 40 != a.keyCode && 13 != a.keyCode ? (a = c.val(), 2 < a.length ? ("" == HStorage.getItem("ww-" + c.val() + "-" + htz.config.dialect) || null == HStorage.getItem("ww-" + a + "-" + htz.config.dialect) ? (b.fetch(), userInputText = a) : (b.ajx && (b.ajx.abort(),
                                                                                                                                   delete b.ajx), locList.reset(JSON.parse(unescape(HStorage.getItem("ww-" + a + "-" + htz.config.dialect))).locationList)), "undefined" == typeof b.wwView && (b.wwView = new WWListView({
                                                                                                                                   collection: locList,
                                                                                                                                   parent: b
                                                                                                                               })), Wordwheel.getWWResultContainer(c).append(b.wwView.$el)) : "undefined" != typeof b.wwView && b.wwView.hide()) : "undefined" != typeof b.wwView && b.wwView.move(a.which)
                                                                                                                           },
                                                                                                                           getWWResultContainer: function(a) {
                                                                                                                               return a.parent()
                                                                                                                           },
                                                                                                                           hide: function() {
                                                                                                                               "undefined" !== typeof this.wwView && (this.wwView.hide(), this.input = null)
                                                                                                                           },
                                                                                                                           fetch: function() {
                                                                                                                               var a =
                                                                                                                                   this,
                                                                                                                                   b = a.input.$el.val();
                                                                                                                               a.ajx && (a.ajx.abort(), delete a.ajx);
                                                                                                                               a.ajx = locList.fetch({
                                                                                                                                   data: {
                                                                                                                                       searchText: encodeURIComponent(b)
                                                                                                                                   },
                                                                                                                                   success: function(c, d) {
                                                                                                                                       delete a.ajx;
                                                                                                                                       d.timestamp = (new Date).getTime().toString();
                                                                                                                                       d.locationList && 0 < d.locationList.length && (htz.config.isApp || !htz.config.isCountryinEuropeUnion || htz.config.isCountryinEuropeUnion && -1 != $.cookie("cookie_pref").indexOf("3")) && HStorage.setItem("ww-" + b + "-" + htz.config.dialect, escape(JSON.stringify(d)))
                                                                                                                                   }
                                                                                                                               }, this)
                                                                                                                           }
                                                                                                                       };
                                                                                                                   WWInputView = Backbone.View.extend({
                                                                                                                       initialize: function() {
                                                                                                                           _.bindAll(this, "keydownEv", "blurHandler")
                                                                                                                       },
                                                                                                                       events: {
                                                                                                                           keydown: "keydownEv",
                                                                                                                           blur: "blurHandler"
                                                                                                                       },
                                                                                                                       keydownEv: function(a) {
                                                                                                                           "9" == a.keyCode && Wordwheel.hide()
                                                                                                                       },
                                                                                                                       blurHandler: function() {
                                                                                                                           if (Wordwheel.keepFocus) this.$el.focus();
                                                                                                                           else if (!Wordwheel.mouseinside) {
                                                                                                                               var a = new WordwheelModel;
                                                                                                                               a.set({
                                                                                                                                   locType: Wordwheel.input.$el.attr("id")
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               "undefined" !== typeof Wordwheel.selectFunc && Wordwheel.selectFunc(a)
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   MoreLinkView = Backbone.View.extend({
                                                                                                                       className: "ww-morelink",
                                                                                                                       events: {
                                                                                                                           click: "showMoreInfo"
                                                                                                                       },
                                                                                                                       initialize: function() {
                                                                                                                           this.$el.html('<span class="icons-ft_arrow_right" style="display: block;"></span>')
                                                                                                                       },
                                                                                                                       showMoreInfo: function(a) {
                                                                                                                           a.stopPropagation();
                                                                                                                           this.options.model.set({
                                                                                                                               selected: "true"
                                                                                                                           });
                                                                                                                           $(".ww-results .wL").addClass("showDetails");
                                                                                                                           $(".ww-results .ww-moreinfo-container").show();
                                                                                                                           $(".ww-results .ww-moreinfo-container").animate({
                                                                                                                               left: "0px"
                                                                                                                           }, "1000", function() {
                                                                                                                               $("html, body").css("scrollTop", $(".ww-results .ww-moreinfo-container").offset().top)
                                                                                                                           })
                                                                                                                       }
                                                                                                                   });
                                                                                                                   MoreInfoView = Backbone.View.extend({
                                                                                                                       className: "ww-moreinfo-container bl",
                                                                                                                       events: {
                                                                                                                           "click .sel-location": "selectloc",
                                                                                                                           "click .backlink": "backtoloc",
                                                                                                                           "click .ww-gld-ovrly-btn": "showGoldAnytimeOverlay"
                                                                                                                       },
                                                                                                                       initialize: function(a) {
                                                                                                                           this.parent = a;
                                                                                                                           this.lightBox = new LightBox;
                                                                                                                           _.bindAll(this, "render", "backtoloc", "selectloc")
                                                                                                                       },
                                                                                                                       render: function() {
                                                                                                                           var a;
                                                                                                                           this.$el.find(".fts input");
                                                                                                                           var b = this.model.toJSON() || {};
                                                                                                                           this.selLocHtml = Wordwheel.wwView.$el.find(".selected");
                                                                                                                           b.fullHodImage = "" !== b.hodImage ? "https://images.hertz.com/" +
                                                                                                                               b.hodImage : "https://images.hertz.com/rentacar/misc/refresh09/Hertz-24-7_logo_wordwheel.png";
                                                                                                                           this.tpl = _.template($("#ww-moreinfo-container").html(), b);
                                                                                                                           this.$el.is(":empty") && this.$el.html(this.tpl);
                                                                                                                           var c = new Date(htz.locationPage ? htz.locationPage.pickupDate : window.HomeModel.get("formData").get("pickupDay")),
                                                                                                                               d = new Date(htz.locationPage ? htz.locationPage.dropoffDate : window.HomeModel.get("formData").get("dropoffDay")),
                                                                                                                               f = (htz.locationPage ? htz.locationPage.pickupTime : window.HomeModel.get("formData").get("pickupTime")).replace(":",
                                                                                                                                   "-"),
                                                                                                                               h = (htz.locationPage ? htz.locationPage.dropOffTime : window.HomeModel.get("formData").get("dropoffTime")).replace(":", "-"),
                                                                                                                               c = isNaN(c.getFullYear()) ? "" : c.getFullYear() + "-" + ("0" + (c.getMonth() + 1)).slice(-2) + "-" + ("0" + c.getDate()).slice(-2),
                                                                                                                               d = isNaN(d.getFullYear()) ? "" : d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
                                                                                                                           this.$el.find(".hod-url").attr("href", (htz.homepage && htz.homepage.json ? htz.homepage.json.data.model.metaData.urlHod : htz.locationPage.hodUrl + "Reservation/Index/") +
                                                                                                                               this.model.get("hodLocId") + "?pickupDate=" + c + "&pickupTime=" + f + "&dropoffDate=" + d + "&dropoffTime=" + h + "&linkID=HertzCom");
                                                                                                                           this.$el.show();
                                                                                                                           this.$el.css("left", this.options.parent.$el.find(".wL").width() + 1 + "px");
                                                                                                                           "3" == this.model.get("categoryCode") ? this.parent.parent.$el.hasClass("hide-moreinfo") || this.parent.parent.$el.addClass("hide-moreinfo") : ($(this.parent.parent.el).removeClass("hide-moreinfo"), -1 === this.model.get("displayText").indexOf("locations)") ? (this.$el.find(".ww-moreinfo").empty().html(_.template($("#ww-moreinfo").html(), {
                                                                                                                               data: this.model.attributes
                                                                                                                           })), "phone" != htz.config.deviceGroup && "iOSPhone" != htz.config.deviceGroup && (this.model.get("optHod") ? this.$el.addClass("show-hod") : this.$el.removeClass("show-hod"))) : (a = Wordwheel.input.$el.attr("id"), "pickup-location" === a ? a = "pUp" : "dropoff-location" === a && (a = "dOff"), this.$el.find(".ww-moreinfo").empty().html(_.template($("#ww-moreinfo-more-loc").html(), {
                                                                                                                               data: b,
                                                                                                                               locType: function() {
                                                                                                                                   return a && "" !== a ? "&locType=" + a : ""
                                                                                                                               },
                                                                                                                               getCountryCode: function() {
                                                                                                                                   return b.countryCode && "" !== b.countryCode ?
                                                                                                                                       "&isAutoFill=Y&stateCode=" + b.stateCode + "&countryCode=" + b.countryCode + "&searchType=" + b.searchType : ""
                                                                                                                               }
                                                                                                                           })), this.$el.removeClass("show-hod")));
                                                                                                                           if (!this.map || -1 != navigator.userAgent.toLowerCase().indexOf("msie")) $("#map").empty(), this.map = new MapView(this.model);
                                                                                                                           else if ("null" != this.model.get("latitude") || "null" != this.model.get("longitude")) this.map.map.setView([this.model.get("latitude"), this.model.get("longitude")], 13), this.icon = new L.icon({
                                                                                                                                   iconsize: [33, 34],
                                                                                                                                   iconUrl: htz.config.rootContext + "/assets/images/icons/map_marker.png"
                                                                                                                               }),
                                                                                                                               this.map.map.addLayer(L.marker([this.model.get("latitude"), this.model.get("longitude")], {
                                                                                                                                   icon: this.icon
                                                                                                                               }));
                                                                                                                           (0 == this.model.get("latitude") || null == this.model.get("latitude") || "" == this.model.get("latitude") || 0 == this.model.get("longitude") || null == this.model.get("longitude") || "" == this.model.get("longitude")) && -1 === this.model.get("displayText").indexOf("locations)") ? this.$el.addClass("show-disabled-map") : this.$el.removeClass("show-disabled-map");
                                                                                                                           this.delegateEvents()
                                                                                                                       },
                                                                                                                       showGoldAnytimeOverlay: function(a) {
                                                                                                                           a.preventDefault();
                                                                                                                           var b = this;
                                                                                                                           require([htz.config.apiDomain + "/rest/content/" + htz.config.systemId + "/" + htz.config.dialect + "/all/reservation/common/gold-anytime-overlay?callback=define", "reservation/common/gold-anytime-overlay/core/view/gold-anytime-overlay-view"], function(a, d) {
                                                                                                                               b.lightBox.overlay({
                                                                                                                                   title: a.reservationGlobals.goldAnytime.gaOverlayTitle,
                                                                                                                                   width: "625"
                                                                                                                               }, (new d({
                                                                                                                                   template: "#gold-anytime-overlay-tpl",
                                                                                                                                   content: a
                                                                                                                               })).render().el)
                                                                                                                           })
                                                                                                                       },
                                                                                                                       selectloc: function() {
                                                                                                                           $(this.selLocHtml).trigger("click", "mouseSelect");
                                                                                                                           return !1
                                                                                                                       },
                                                                                                                       backtoloc: function(a) {
                                                                                                                           a.stopPropagation();
                                                                                                                           $(".ww-results .wL").removeClass("showDetails");
                                                                                                                           $(".ww-results .ww-moreinfo-container").animate({
                                                                                                                               left: $(".ww-results").css("width")
                                                                                                                           }, "1000", function() {
                                                                                                                               $("html, body").css("scrollTop", $(".ww-results").offset().top);
                                                                                                                               $(this).hide()
                                                                                                                           })
                                                                                                                       }
                                                                                                                   });
                                                                                                                   var MapView = Backbone.View.extend({
                                                                                                                       el: "#map",
                                                                                                                       initialize: function(a) {
                                                                                                                           _.bindAll(this, "getLatLongByLoc");
                                                                                                                           this.model = a;
                                                                                                                           Wordwheel.mapquestLibLoaded && this.model.get("showMap") ? (L.mapquest.key = "Gmjtd%7Cluuan107n9%2C75%3Do5-lz8w0", this.map = L.mapquest.map("map", {
                                                                                                                               center: [this.model.get("latitude"), this.model.get("longitude")],
                                                                                                                               layers: L.mapquest.tileLayer("map"),
                                                                                                                               zoom: 13
                                                                                                                           }), this.icon = new L.icon({
                                                                                                                               iconsize: [33, 34],
                                                                                                                               iconUrl: htz.config.rootContext + "/assets/images/icons/map_marker.png"
                                                                                                                           }), this.map.addLayer(L.marker([this.model.get("latitude"),
                                                                                                                               this.model.get("longitude")
                                                                                                                           ], {
                                                                                                                               icon: this.icon
                                                                                                                           })), this.mapLoaded = !0) : (this.$el.hide(), this.mapLoaded = !1)
                                                                                                                       },
                                                                                                                       getLatLongByLoc: function() {
                                                                                                                           var a = this;
                                                                                                                           $.ajax({
                                                                                                                               url: "//www.mapquestapi.com/geocoding/v1/address",
                                                                                                                               dataType: "jsonp",
                                                                                                                               crossDomain: !0,
                                                                                                                               data: {
                                                                                                                                   city: this.model.get("city"),
                                                                                                                                   state: this.model.get("stateCode"),
                                                                                                                                   postalCode: this.model.get("zip") || "",
                                                                                                                                   country: this.model.get("countryCode"),
                                                                                                                                   key: decodeURIComponent("Gmjtd%7Cluuan107n9%2C75%3Do5-lz8w0")
                                                                                                                               },
                                                                                                                               success: function(b) {
                                                                                                                                   a.latitude = b.results[0].locations[0].latLng.lat;
                                                                                                                                   a.longitude = b.results[0].locations[0].latLng.lng;
                                                                                                                                   a.map.setCenter({
                                                                                                                                       lat: a.latitude,
                                                                                                                                       lng: a.longitude
                                                                                                                                   }, 10)
                                                                                                                               }
                                                                                                                           })
                                                                                                                       }
                                                                                                                   });
                                                                                                                   WWListView = Backbone.View.extend({
                                                                                                                       locItems: [],
                                                                                                                       className: "ww-results hide-moreinfo",
                                                                                                                       events: {
                                                                                                                           mouseenter: "mouseEnterHandler",
                                                                                                                           mouseleave: "mouseLeaveHandler",
                                                                                                                           mousedown: "mouseDownHandler",
                                                                                                                           mousemove: "mouseMoveHandler"
                                                                                                                       },
                                                                                                                       mouseDownHandler: function() {
                                                                                                                           Wordwheel.keepFocus = !1
                                                                                                                       },
                                                                                                                       mouseEnterHandler: function() {
                                                                                                                           Wordwheel.mouseinside = !0
                                                                                                                       },
                                                                                                                       mouseLeaveHandler: function() {
                                                                                                                           Wordwheel.mouseinside = !1;
                                                                                                                           Wordwheel.keepFocus = !1
                                                                                                                       },
                                                                                                                       mouseMoveHandler: function() {
                                                                                                                           "undefined" == typeof $._data(this.locItems[0].getLocName().$el[0], "events") && $(this.locItems).each(function(a,
                                                                                                                               b) {
                                                                                                                               b.getLocName().delegateEvents();
                                                                                                                               b.getLocName().$el.on("mouseenter", this.highlight).on("mouseleave", this.remHighlight)
                                                                                                                           })
                                                                                                                       },
                                                                                                                       initialize: function() {
                                                                                                                           _.bindAll(this, "render");
                                                                                                                           this.input = this.options.parent.input.$el;
                                                                                                                           Modernizr && Modernizr.touch && this.$el.addClass("touch");
                                                                                                                           this.moreInfo = new MoreInfoView({
                                                                                                                               parent: this
                                                                                                                           });
                                                                                                                           0 < this.collection.length && this.render();
                                                                                                                           this.collection.on("reset", this.render)
                                                                                                                       },
                                                                                                                       render: function() {
                                                                                                                           var a = this,
                                                                                                                               b = "",
                                                                                                                               c, d = '<div class="ww-item"><div class="ww-name"><span class="airplane-space"></span><b>' +
                                                                                                                               htz.wordwheel.noLocationsFound + "</b></div></div>";
                                                                                                                           a.prevCat = "";
                                                                                                                           a.prevSearchType;
                                                                                                                           this.moreInfo.$el.css("left", this.$el.find(".wL").width() + 1 + "px");
                                                                                                                           this.$el.html("");
                                                                                                                           this.moreInfo.$el.hide();
                                                                                                                           this.moreInfo.$el.appendTo(this.$el);
                                                                                                                           this.sltdIndx = 0;
                                                                                                                           $(this.collection.models).each(function(a, b) {
                                                                                                                               b.set({
                                                                                                                                   selected: ""
                                                                                                                               })
                                                                                                                           });
                                                                                                                           this.$el.hasClass("hide-moreinfo") || this.$el.addClass("hide-moreinfo");
                                                                                                                           var f = $("<div>").attr("class", "wL");
                                                                                                                           if (0 < this.collection.length) {
                                                                                                                               $(this.collection.models).each(function(h, i) {
                                                                                                                                   var e = i.get("searchType"),
                                                                                                                                       g = "";
                                                                                                                                   if ("3" == e || "5" == e || "20" == e) g = htz.wordwheel.airportList;
                                                                                                                                   else if ("25" == e) g = htz.wordwheel.railList;
                                                                                                                                   else if ("30" == e || "40" == e || "60" == e || "70" == e) g = htz.wordwheel.cityList;
                                                                                                                                   else if ("75" == e) g = htz.wordwheel.nearbyLocations + " - " + i.get("nearby");
                                                                                                                                   else if ("80" == e || "90" == e) g = htz.wordwheel.stateCountryList;
                                                                                                                                   c = g;
                                                                                                                                   htz.config.isApp && c === htz.wordwheel.stateCountryList || (b !== c && "" !== c && ("75" === i.get("searchType") && 0 === h && f.append($(d)), f.append('<label class="divider">' + c + "</label>")), b = c, e = new locItem({
                                                                                                                                       model: i,
                                                                                                                                       input: a.options.parent.$el,
                                                                                                                                       parent: a
                                                                                                                                   }), a.locItems.push(e), f.append(e.el))
                                                                                                                               });
                                                                                                                               this.$el.append(f).show();
                                                                                                                               var h = parseInt($(this.options.parent.el).css("padding-bottom")) + parseInt($(this.options.parent.el).css("margin-bottom"));
                                                                                                                               this.$el.css("margin-top", "-" + h + "px")
                                                                                                                           } else this.$el.hide();
                                                                                                                           return this
                                                                                                                       },
                                                                                                                       move: function(a) {
                                                                                                                           var b = this;
                                                                                                                           b.type = a;
                                                                                                                           sltdIndx = -2;
                                                                                                                           $(this.collection.models).each(function(a, b) {
                                                                                                                               "true" == b.get("selected") && (sltdIndx = a)
                                                                                                                           });
                                                                                                                           Wordwheel.mouseinside && $(b.locItems).each(function(a, b) {
                                                                                                                               b.getLocName().undelegateEvents();
                                                                                                                               b.getLocName().$el.off("mouseenter mouseleave")
                                                                                                                           });
                                                                                                                           "40" == a ? "undefined" == typeof sltdIndx || sltdIndx == this.collection.length - 1 ? (this.collection.at(this.collection.length - 1).set({
                                                                                                                               selected: ""
                                                                                                                           }), this.collection.at(0).set({
                                                                                                                               selected: "true"
                                                                                                                           }), this.$el.find(".wL").scrollTop("-1")) : "-2" == sltdIndx ? (this.collection.at(0).set({
                                                                                                                               selected: "true"
                                                                                                                           }), this.$el.find(".wL").scrollTop("-1")) : (this.collection.at(sltdIndx).set({
                                                                                                                               selected: ""
                                                                                                                           }), this.collection.at(sltdIndx + 1).set({
                                                                                                                               selected: "true"
                                                                                                                           }), 270 < this.$el.find(".selected").position().top ? this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop() +
                                                                                                                               this.$el.find(".selected").position().top - 270) : 0 > this.$el.position().top && this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop() + this.$el.find(".selected").position().top - 4)) : "38" == a ? "undefined" == typeof sltdIndx || 0 == sltdIndx ? (this.collection.at(0).set({
                                                                                                                               selected: ""
                                                                                                                           }), this.collection.at(this.collection.length - 1).set({
                                                                                                                               selected: "true"
                                                                                                                           }), this.$el.find(".wL").scrollTop(this.$el.find(".wL").attr("scrollHeight"))) : "-2" == sltdIndx ? (this.collection.at(this.collection.length - 1).set({
                                                                                                                                   selected: "true"
                                                                                                                               }),
                                                                                                                               this.$el.find(".wL").scrollTop(this.$el.find(".wL").attr("scrollHeight"))) : (this.collection.at(sltdIndx).set({
                                                                                                                               selected: ""
                                                                                                                           }), this.collection.at(sltdIndx - 1).set({
                                                                                                                               selected: "true"
                                                                                                                           }), 270 < this.$el.find(".selected").position().top ? this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop() + this.$el.find(".selected").position().top - 270) : 0 > this.$el.find(".selected").position().top && this.$el.find(".wL").scrollTop(this.$el.find(".wL").scrollTop() + this.$el.find(".selected").position().top - 4)) : "13" == a && (a =
                                                                                                                               this.$el.find(".selected"), a.length && a.trigger("click"), (a = $(this.input).val()) && 2 < a.length && setTimeout(function() {
                                                                                                                                   $.publish("location.search", $(b.input).val())
                                                                                                                               }, 10), this.hide())
                                                                                                                       },
                                                                                                                       hide: function() {
                                                                                                                           this.$el.hide()
                                                                                                                       }
                                                                                                                   });
                                                                                                                   locItem = Backbone.View.extend({
                                                                                                                       className: "ww-item",
                                                                                                                       initialize: function() {
                                                                                                                           this.render()
                                                                                                                       },
                                                                                                                       render: function() {
                                                                                                                           this.locNameEl = new LocName({
                                                                                                                               model: this.options.model,
                                                                                                                               input: this.options.input,
                                                                                                                               parent: this.options.parent
                                                                                                                           });
                                                                                                                           this.$el.append(this.locNameEl.render().el);
                                                                                                                           "" != this.model.get("preferredOag") && this.$el.append((new MoreLinkView({
                                                                                                                               model: this.options.model,
                                                                                                                               parent: this.options.parent
                                                                                                                           })).el);
                                                                                                                           return this.$el
                                                                                                                       },
                                                                                                                       getLocName: function() {
                                                                                                                           return this.locNameEl
                                                                                                                       }
                                                                                                                   });
                                                                                                                   LocName = Backbone.View.extend({
                                                                                                                       className: "ww-name",
                                                                                                                       initialize: function() {
                                                                                                                           this.input = this.options.input;
                                                                                                                           this.parent = this.options.parent;
                                                                                                                           _.bindAll(this, "render", "highlight", "remHighlight");
                                                                                                                           this.model.on("change:selected", this.render);
                                                                                                                           Modernizr && !Modernizr.touch && (this.$el.on("mouseenter", this.highlight), this.$el.on("mouseleave", this.remHighlight))
                                                                                                                       },
                                                                                                                       events: {
                                                                                                                           click: "select"
                                                                                                                       },
                                                                                                                       render: function() {
                                                                                                                           var a, b = this.model.get("searchType");
                                                                                                                           "true" === this.model.get("selected") ? (this.$el.addClass("selected"), this.parent.moreInfo.model =
                                                                                                                               this.model, this.parent.moreInfo.render()) : (delete this.parent.moreInfo.model, this.$el.removeClass("selected"));
                                                                                                                           this.$el.empty();
                                                                                                                           a = $("<span/>").attr("class", "airplane-space");
                                                                                                                           "25" == b ? a.addClass("icons-rail_icon") : "3" == b || "5" == b || "20" == b ? a.addClass("icons-airplane_icon") : ("30" == b || "40" == b || "60" == b || "70" == b) && a.addClass("icons-city-icon");
                                                                                                                           "1" == this.options.model.get("categoryCode") && ("25" == this.options.model.get("searchType") ? a.addClass("icons-rail_icon") : a.addClass("icons-airplane_icon"));
                                                                                                                           this.$el.append(a);
                                                                                                                           this.$el.append(this.formattedDisplay());
                                                                                                                           return this
                                                                                                                       },
                                                                                                                       formattedDisplay: function() {
                                                                                                                           return "-1" != this.model.get("displayText").toLowerCase().indexOf($(Wordwheel.el).val().toLowerCase()) ? (this.srchText = this.model.get("displayText").substr(this.model.get("displayText").toLowerCase().indexOf($(Wordwheel.el).val().toLowerCase()), $(Wordwheel.el).val().length), this.model.get("displayText").replace(RegExp(this.srchText, "g"), "<b>" + this.srchText + "</b>").replace("(", "<span>(").replace(")", ")</span>")) : this.model.get("displayText").replace("(",
                                                                                                                               "<span>(").replace(")", ")</span>")
                                                                                                                       },
                                                                                                                       highlight: function() {
                                                                                                                           this.model.set({
                                                                                                                               selected: "true"
                                                                                                                           })
                                                                                                                       },
                                                                                                                       remHighlight: function() {
                                                                                                                           $(this.parent.collection.models).each(function(a, b) {
                                                                                                                               b.set({
                                                                                                                                   selected: ""
                                                                                                                               })
                                                                                                                           })
                                                                                                                       },
                                                                                                                       select: function(a, b) {
                                                                                                                           a.preventDefault();
                                                                                                                           this.parent.hide();
                                                                                                                           this.model.get("locationTitle") ? Wordwheel.input.$el.val(this.model.get("locationTitle")) : Wordwheel.input.$el.val(this.model.get("displayText"));
                                                                                                                           this.model.set({
                                                                                                                               locType: Wordwheel.input.$el.attr("id")
                                                                                                                           }, {
                                                                                                                               silent: !0
                                                                                                                           });
                                                                                                                           Wordwheel.model = this.model;
                                                                                                                           "undefined" !==
                                                                                                                           typeof Wordwheel.selectFunc && Wordwheel.selectFunc(this.model);
                                                                                                                           try {
                                                                                                                               "undefined" != typeof _gaq && _gaq.push(["_trackEvent", "WordWheel", "UserSelectedLocation", userInputText + " -> " + Wordwheel.input.$el.val()])
                                                                                                                           } catch (c) {}
                                                                                                                           "keySelect" === b && (Wordwheel.mouseinside = !0, Wordwheel.input.$el.trigger("blur"))
                                                                                                                       }
                                                                                                                   });
                                                                                                                   if (htz.config.isApp) {
                                                                                                                       Wordwheel.loadMapQuestAPI = $.noop;
                                                                                                                       Wordwheel.getWWResultContainer = function(a) {
                                                                                                                           return a.closest("#kendo-ww").find(".ww-result-container")
                                                                                                                       };
                                                                                                                       var orginalRender = WWListView.prototype.render;
                                                                                                                       WWListView.prototype.render = function() {
                                                                                                                           return orginalRender.apply(this, arguments)
                                                                                                                       };
                                                                                                                       MoreLinkView.prototype.initialize = function() {
                                                                                                                           this.$el.html('<span class="icons-ft_arrow_right" style="display: block;"></span>').addClass("km-listview-link")
                                                                                                                       };
                                                                                                                       MapView.prototype.initialize = function() {
                                                                                                                           this.mapLoaded = !1
                                                                                                                       };
                                                                                                                       LocName = LocName.extend({
                                                                                                                           events: {
                                                                                                                               click: "decideAction"
                                                                                                                           },
                                                                                                                           decideAction: function(a) {
                                                                                                                               $(".ww-results").appendTo($(".ww-result-container"));
                                                                                                                               1 < this.model.get("locationCount") ? (a.stopPropagation(), this.showMultiLocation()) : this.select(a)
                                                                                                                           },
                                                                                                                           showMultiLocation: function() {
                                                                                                                               if ("33" == this.model.get("searchType")) var a = htz.config.apiDomain + "/rest/location/search/" + this.model.get("searchText") + "/latitude/0/longitude/0?zip=" + this.model.get("zip") + "&requestPos=" + htz.config.pos;
                                                                                                                               else var a = htz.config.apiDomain + "/rest/location{countryUrlPart}{stateUrlPart}{cityUrlPart}?dialect={dialect}",
                                                                                                                                   b = $.trim(this.model.get("countryCode")),
                                                                                                                                   c = $.trim(this.model.get("stateCode")),
                                                                                                                                   d = $.trim(this.model.get("city")),
                                                                                                                                   a = a.replace("{countryUrlPart}", b ? "/country/" + b : "").replace("{stateUrlPart}", c ? "/state/" + c : "").replace("{cityUrlPart}", d ? "/city/" + d : "").replace("{dialect}", htz.config.dialect);
                                                                                                                               this.prepareWWList();
                                                                                                                               this.fetchMultiLocList(a)
                                                                                                                           },
                                                                                                                           prepareWWList: function() {
                                                                                                                               $(".ww-item").empty();
                                                                                                                               $(".wL label").empty();
                                                                                                                               $("#kendo-ww").data("kendoMobileModalView").scroller.scrollTo(0, 0);
                                                                                                                               kendo.fx($(".ww-results")).slideIn("down").duration(1E3).play();
                                                                                                                               $(".spinner").remove();
                                                                                                                               $("body").append('<div class="spinner">Loading...</div>')
                                                                                                                           },
                                                                                                                           fetchMultiLocList: function(a) {
                                                                                                                               var b = this;
                                                                                                                               multiLocList.fetch({
                                                                                                                                   url: a,
                                                                                                                                   success: function(a, d) {
                                                                                                                                       d.timestamp = (new Date).getTime().toString();
                                                                                                                                       a && a.models && (b.parent.collection.models = a.models, b.parent.render());
                                                                                                                                       $(".spinner").remove()
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           select: function(a, b) {
                                                                                                                               a.preventDefault();
                                                                                                                               this.parent.hide();
                                                                                                                               this.model.get("locationTitle") ? Wordwheel.input.$el.val(this.model.get("locationTitle")) : Wordwheel.input.$el.val(this.model.get("displayText"));
                                                                                                                               this.model.set({
                                                                                                                                   locType: Wordwheel.input.$el.attr("id")
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               Wordwheel.model = this.model;
                                                                                                                               "undefined" !== typeof Wordwheel.selectFunc && Wordwheel.selectFunc(this.model);
                                                                                                                               try {
                                                                                                                                   "undefined" != typeof _gaq && _gaq.push(["_trackEvent", "WordWheel", "UserSelectedLocation", userInputText + " -> " + Wordwheel.input.$el.val()])
                                                                                                                               } catch (c) {}
                                                                                                                               "keySelect" === b && (Wordwheel.mouseinside = !0, Wordwheel.input.$el.trigger("blur"));
                                                                                                                               Wordwheel.input.$el.trigger("change");
                                                                                                                               var d = $(".km-root #kendo-ww").data("kendoMobileModalView");
                                                                                                                               void 0 !=
                                                                                                                                   d && d.close();
                                                                                                                               $(".ww-results").appendTo($(".ww-result-container"))
                                                                                                                           }
                                                                                                                       });
                                                                                                                       var isWWInputChanged = function() {
                                                                                                                               var a = $(".ww-input:visible").attr("name");
                                                                                                                               return 0 < $("input[name=" + a + "]").length && $("input[name=" + a + "]")[0].value !== $("input[name=" + a + "]")[1].value ? !0 : !1
                                                                                                                           },
                                                                                                                           originalBlurHandler = WWInputView.prototype.blurHandler;
                                                                                                                       WWInputView.prototype.blurHandler = function() {
                                                                                                                           !Wordwheel.keepFocus && isWWInputChanged() && originalBlurHandler.apply(this, arguments)
                                                                                                                       }
                                                                                                                   }
                                                                                                                   var multiLocList = new WordwheelMultiLocationCollection,
                                                                                                                       locList = new WordwheelCollection;
                                                                                                                   $(document).ready(Wordwheel.init);
                                                                                                                   var appCore = htz.config.isApp ? "app" : "core";
                                                                                                                   addDependencies("reservation/itinerary/core/view/itinerary-view", "jquery underscore json framework/view/abstract-view config/app-config utils/sessionhelper utils/utils utils/utils-proxy reservation/itinerary/core/view/itinerary-form-view reservation/process-info/core/model/process-model reservation/config reservation/process-config/core/reservation-constants reservation/itinerary/core/view/threeDS-view".split(" "));
                                                                                                                   addDependencies("reservation/itinerary/core/view/itinerary-form-view", "jquery underscore backbone utils/utils utils/utils-proxy framework/view/abstract-view config/app-config utils/sessionhelper reservation/itinerary/core/view/itinerary-ta-country-view reservation/itinerary/core/view/itinerary-location-view reservation/itinerary/core/view/itinerary-date-time-view reservation/itinerary/core/view/itinerary-age-view reservation/itinerary/core/view/itinerary-arrival-info-view reservation/itinerary/core/view/itinerary-redeem-view reservation/itinerary/core/view/itinerary-vehicle-type-view reservation/itinerary/core/view/itinerary-ta-member-view reservation/itinerary/core/view/itinerary-discounts-view reservation/itinerary/core/view/location-closed-overlay-view reservation/itinerary/core/view/helper/view-helper reservation/process-info/core/model/process-model reservation/reservation-info/core/model/reservation-info-model reservation/common/retry/core/view/retry-view reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils reservation/itinerary/core/model/affiliate-member-ID-verification-model reservation/itinerary/core/view/affiliate-member-verification-popup-view reservation/itinerary/core/view/itinerary-residency-view utils/gtm-tracker".split(" "));
                                                                                                                   addDependencies("reservation/itinerary/core/presenter/itinerary-presenter", ["jquery", "utils/sessionhelper", "json", "utils/domhelper", "config/utilconfig", "utils/utils", "config/app-config", "reservation/itinerary/core/model/itinerary-model", "reservation/itinerary/" + appCore + "/view/itinerary-view", "reservation/itinerary/core/view/helper/view-helper", "reservation/process-info/core/model/process-model", "reservation/config", "utils/utils-proxy", "reservation/process-config/core/reservation-constants"]);
                                                                                                                   define("reservation/process-monitor/core/monitor", "jquery config/app-info config/app-config utils/tracker utils/utils-proxy reservation/process-info/core/model/process-model utils/utils reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils reservation/utils/core/test-and-target".split(" "), function(e, j, k, l, i, f, m, d, h, n) {
                                                                                                                       var g = {
                                                                                                                           monitorStep: function(a) {
                                                                                                                               var c = a.page,
                                                                                                                                   b = a.step;
                                                                                                                               b && this.handleTestTarget(b, a.isModify);
                                                                                                                               c && this.updatePage(c);
                                                                                                                               b && this.updateProcessFlow(b);
                                                                                                                               c && (this.handleNav(c), this.handleEstara(b), this.handleHomepageBackground(b), this.handleSeo(c));
                                                                                                                               c && b && l.track({
                                                                                                                                   process: "res",
                                                                                                                                   step: b,
                                                                                                                                   targetPage: c
                                                                                                                               });
                                                                                                                               b && (htz.res.utils.ResourceLazyLoader.trigger(b, 0, a.content), htz.res.utils.ResourceMonitor.trigger(b, 1500), htz.res.utils.DOMMonitor.monitor(b));
                                                                                                                               h.rqrOverlay();
                                                                                                                               h.checkForReferrerUrl()
                                                                                                                           },
                                                                                                                           prepare: function(a) {
                                                                                                                               f.checkAndStartProcess();
                                                                                                                               a && f.setModify(!!a.isModify);
                                                                                                                               if ((a = i.getAciveLightboxes()) && 0 < a.length)
                                                                                                                                   for (var c = null, b = 0; b < a.length; b++) c = a[b], null != c && c.closeOverlay &&
                                                                                                                                       c.closeOverlay();
                                                                                                                               window.scrollTo(0, 0)
                                                                                                                           },
                                                                                                                           prepareNavigate: function() {
                                                                                                                               i.getSpinner().stop()
                                                                                                                           },
                                                                                                                           updatePage: function(a) {
                                                                                                                               a && (k.config.legacyPage = a)
                                                                                                                           },
                                                                                                                           handleNav: function(a) {
                                                                                                                               if (a) {
                                                                                                                                   var c = ["whatView.jsp", "extrasView.jsp", "bookableQuoteView.jsp"],
                                                                                                                                       b = j.getHeader();
                                                                                                                                   b && (a === d.LEGACY_ITINERARY ? (b.showPosFeature(), b.showMemberFeature(), b.showSearchMini()) : (b.hidePosFeature(), "whatView.jsp" === a || "extrasView.jsp" === a || "bookableQuoteView.jsp" === a ? b.showRentalQualificationLink() : b.hideRentalQualification(), a === d.LEGACY_VEHICLES ||
                                                                                                                                       a === d.LEGACY_EXTRAS || a === d.LEGACY_REVIEW_AND_BOOK ? b.hideMemberFeature() : b.showMemberFeature(), b.showSearchFull()), "whatView.jsp" != a && ("extrasView.jsp" != a && "bookableQuoteView.jsp" != a) && b.hideRentalQualification(), c.includes(a) ? (b.hideMenu(), b.hidePosFeature()) : 1248 <= e(document).width() && (b.showMenu(), b.showDesktopPos()))
                                                                                                                               }
                                                                                                                           },
                                                                                                                           handleTestTarget: function(a, c) {
                                                                                                                               n.handleTestTarget(a, c)
                                                                                                                           },
                                                                                                                           handleEstara: function(a) {
                                                                                                                               a && a !== d.REVIEW_AND_BOOK && "undefined" != typeof wv_vars && htz.utils.Global.removeEstara()
                                                                                                                           },
                                                                                                                           handleHomepageBackground: function(a) {
                                                                                                                               a &&
                                                                                                                                   (a === d.ITINERARY ? e("#container").addClass("animated-background") : e("#container").removeClass("animated-background"))
                                                                                                                           },
                                                                                                                           trackError: function(a) {
                                                                                                                               if (WebTracking) {
                                                                                                                                   var c = f.getStep();
                                                                                                                                   WebTracking.setError("debug-runtime-error-" + c + "-" + a + "-" + m.browserDeviceType(), c)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           handleSeo: function(a) {
                                                                                                                               a && a !== d.LEGACY_ITINERARY && e("#footer-container #seo-content").empty().hide()
                                                                                                                           },
                                                                                                                           updateProcessFlow: function(a) {
                                                                                                                               f.addToFlow(a)
                                                                                                                           }
                                                                                                                       };
                                                                                                                       e.subscribe(d.RENDER_PREPARE_PRESENTER, function(a, c) {
                                                                                                                           g.prepare(c)
                                                                                                                       });
                                                                                                                       e.subscribe(d.NAVIGATE_PREPARE_PRESENTER,
                                                                                                                           function() {
                                                                                                                               g.prepareNavigate()
                                                                                                                           });
                                                                                                                       e.subscribe(d.RENDER_DONE_PRESENTER, function(a, c) {
                                                                                                                           g.monitorStep(c)
                                                                                                                       });
                                                                                                                       e.subscribe(d.HANDLE_RENDER_FAIL, function(a, c) {
                                                                                                                           h.handleRenderFail(c)
                                                                                                                       });
                                                                                                                       return g
                                                                                                                   });
                                                                                                                   require(["reservation/process-monitor/core/monitor"], function() {});
                                                                                                                   define("reservation/itinerary/core/model/itinerary-model", "backbone json utils/restmodel utils/utils reservation/itinerary/core/model/itinerary-form-model utils/sessionhelper config/app-config".split(" "), function(f, i, h, j, g, k, e) {
                                                                                                                       return h.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.constructor.__super__.initialize.apply(this, arguments);
                                                                                                                               var c = this.get("formData"),
                                                                                                                                   d = this.get("metaData"),
                                                                                                                                   b, a;
                                                                                                                               c && (b = new g(c), this.set("formData", b));
                                                                                                                               d && (a = new f.Model(d), this.set("metaData", a));
                                                                                                                               b && a && (a.set({
                                                                                                                                   blockAds: e.config.isApp
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), b.metaData = a, this.prepareCarType())
                                                                                                                           },
                                                                                                                           prepareCarType: function() {
                                                                                                                               var c = this.get("metaData"),
                                                                                                                                   d = this.get("formData"),
                                                                                                                                   b = c.get("nvpVehicleGroupSipps");
                                                                                                                               if (b && 0 < b.length)
                                                                                                                                   for (var a = 0; a < b.length; a++)
                                                                                                                                       if (b[a].value === d.get("selectedCarType")) {
                                                                                                                                           c.set({
                                                                                                                                               selectedCarLabel: b[a].name
                                                                                                                                           }, {
                                                                                                                                               silent: !0
                                                                                                                                           });
                                                                                                                                           break
                                                                                                                                       }
                                                                                                                           },
                                                                                                                           parseModel: function(c) {
                                                                                                                               var d = c.formData,
                                                                                                                                   c = c.metaData,
                                                                                                                                   b, a;
                                                                                                                               d && (b = new g(d), this.set("formData", b));
                                                                                                                               c && (a = new f.Model(c), this.set("metaData", a));
                                                                                                                               b && a && (a.set({
                                                                                                                                       blockAds: e.config.isApp
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }), b.metaData =
                                                                                                                                   a, this.prepareCarType())
                                                                                                                           },
                                                                                                                           url: e.config.rootContext + "/rest/hertz/v2/reservations/itinerary"
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-view", getDependencies("reservation/itinerary/core/view/itinerary-view"), function(b, f, k, g, l, m, n, h, e, o, p, i, j) {
                                                                                                                       return g.extend({
                                                                                                                           events: {
                                                                                                                               "click .gaq-rmc-tabs": "toggleTabs",
                                                                                                                               "click .back-button": "showStepOne"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.preInitialize();
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = b("#home-page-tpl").html();
                                                                                                                               this.viewHelper = this.options.viewHelper;
                                                                                                                               this.isRMCExists = !1;
                                                                                                                               this.isSearch = this.options.isSearch;
                                                                                                                               this.prepareModel();
                                                                                                                               this.postInitialize()
                                                                                                                           },
                                                                                                                           loadBanners: function() {
                                                                                                                               var a = this.formData.get("maskedDiscountCode");
                                                                                                                               try {
                                                                                                                                   a && ("" !== a && localStorage.getItem("htzDVal") !== a) && localStorage.setItem("htzDVal", a)
                                                                                                                               } catch (b) {}
                                                                                                                               this.viewHelper.loadMisc(this.metaData.get("blockAds"), this.metaData.get("enableRightBannerAds"), this.metaData.get("enablePickupDropdown"))
                                                                                                                           },
                                                                                                                           bindWindowEvents: function() {
                                                                                                                               b(window).bind("resize.setFooterPadding", this.viewHelper.setFooterPadding);
                                                                                                                               b(window).bind("orientationchange.setFooterPadding", this.viewHelper.setFooterPadding);
                                                                                                                               var a =
                                                                                                                                   b(".new-header").height();
                                                                                                                               b(window).scroll(function() {
                                                                                                                                   b(this).scrollTop() > a ? b("#new-resWidget-containerInner").addClass("sticky") : b("#new-resWidget-containerInner").removeClass("sticky")
                                                                                                                               })
                                                                                                                           },
                                                                                                                           prepareModel: function() {
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData")
                                                                                                                           },
                                                                                                                           openWindow: function(a, b, c) {
                                                                                                                               return window.open(a, b, c)
                                                                                                                           },
                                                                                                                           toggleTabs: function(a) {
                                                                                                                               var a = b(a.target),
                                                                                                                                   d = b(".res-form");
                                                                                                                               a.parent().hasClass("selected") || (d.find("td").each(function() {
                                                                                                                                       b(this).toggleClass("selected")
                                                                                                                                   }),
                                                                                                                                   htz.config.isApp && d.find(".section").each(function() {
                                                                                                                                       b(this).toggleClass("hidden")
                                                                                                                                   }), this.$("#error-list").children().length && this.$("#error-list").toggle(), "rmc-tab" === a.parent().attr("id") && this.renderLookup())
                                                                                                                           },
                                                                                                                           showTab: function(a) {
                                                                                                                               var d = b(".res-form");
                                                                                                                               b("#" + a).hasClass("selected") || (d.find("td").each(function() {
                                                                                                                                   b(this).toggleClass("selected")
                                                                                                                               }), d.find(".section").each(function() {
                                                                                                                                   b(this).toggleClass("hidden")
                                                                                                                               }), b("#error-list").children().length && b("#error-list").toggle(), "rmc-tab" === a && this.renderLookup())
                                                                                                                           },
                                                                                                                           renderForm: function() {
                                                                                                                               this.bindWindowEvents();
                                                                                                                               this.formView && this.formView.undelegateEvents();
                                                                                                                               this.formView = htz.config.isApp ? new e({
                                                                                                                                   el: "#gaq-section",
                                                                                                                                   template: "#res-itinerary-tpl",
                                                                                                                                   content: this.content,
                                                                                                                                   model: this.model,
                                                                                                                                   referrer: this.$el,
                                                                                                                                   isResWidget: !1,
                                                                                                                                   hertzGoldPlusImage: htz.localLoyaltyLogo.hertzGoldPlusImage,
                                                                                                                                   isResFlowEdit: !1,
                                                                                                                                   isSearch: this.isSearch,
                                                                                                                                   isNewHomepage: !0
                                                                                                                               }) : new e({
                                                                                                                                   el: "#new-widget",
                                                                                                                                   template: "#res-homepage-itinerary-tpl",
                                                                                                                                   content: this.content,
                                                                                                                                   model: this.model,
                                                                                                                                   referrer: this.$el,
                                                                                                                                   isResWidget: !1,
                                                                                                                                   hertzGoldPlusImage: htz.localLoyaltyLogo.hertzGoldPlusImage,
                                                                                                                                   isResFlowEdit: !1,
                                                                                                                                   isSearch: this.isSearch,
                                                                                                                                   isNewHomepage: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           renderLookup: function() {
                                                                                                                               var a = this;
                                                                                                                               a.isRMCExists || require(["reservation/lookup/core/presenter/lookup-presenter"], function(d) {
                                                                                                                                   var c;
                                                                                                                                   !0 == htz.config.isApp ? c = "#rmc-section" : c = "#new-resLookup";
                                                                                                                                   c = b.extend(a.metaData.toJSON(), {
                                                                                                                                       target: c,
                                                                                                                                       referrer: a.$el
                                                                                                                                   });
                                                                                                                                   c.formData = {
                                                                                                                                       confirmationNumber: a.formData.get("confirmationNumber"),
                                                                                                                                       lastName: a.formData.get("lastName"),
                                                                                                                                       arrivingUpdate: a.formData.get("arrivingUpdate")
                                                                                                                                   };
                                                                                                                                   var e = b("#res-lookup-template");
                                                                                                                                   0 < e.length && (c.template = e.html(), c.content = a.content);
                                                                                                                                   a.lookuppresenter = d;
                                                                                                                                   a.isRMCExists = !0;
                                                                                                                                   d.show(c)
                                                                                                                               })
                                                                                                                           },
                                                                                                                           render3DSview: function() {
                                                                                                                               h.getLightbox().overlay({
                                                                                                                                   dismiss: !1,
                                                                                                                                   title: this.content.homePage.homePageContent.threeDSpopupTitle,
                                                                                                                                   width: 584,
                                                                                                                                   center: !0,
                                                                                                                                   suppressClose: !0
                                                                                                                               }, (new j({
                                                                                                                                   model: this.model,
                                                                                                                                   content: this.content,
                                                                                                                                   referrer: this
                                                                                                                               })).render().el);
                                                                                                                               b(".lb-background").css({
                                                                                                                                   display: "block"
                                                                                                                               });
                                                                                                                               b(".lb-foreground").css({
                                                                                                                                   display: "block"
                                                                                                                               })
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               try {
                                                                                                                                   return this.preRender(),
                                                                                                                                       this.$el.append(f.template(this.template, {
                                                                                                                                           metaData: this.metaData.attributes,
                                                                                                                                           content: this.content
                                                                                                                                       })), this.renderForm(), this.loadBanners(), htz.config.isApp || (!0 == this.metaData.get("threeDReq") || void 0 != this.metaData.get("threeDMsg") && "" != this.metaData.get("threeDMsg")) && this.render3DSview(this), this.postRender(), this
                                                                                                                               } catch (a) {
                                                                                                                                   b.publish(i.HANDLE_RENDER_FAIL, a.message)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           refresh: function() {
                                                                                                                               this.preRender();
                                                                                                                               this.prepareModel();
                                                                                                                               this.loadBanners();
                                                                                                                               this.formView || this.renderForm();
                                                                                                                               this.lookuppresenter || this.renderLookup();
                                                                                                                               this.formData.off("change", this.renderForm(), this);
                                                                                                                               this.formData.on("change", this.renderForm(), this);
                                                                                                                               this.postRender()
                                                                                                                           },
                                                                                                                           arrivalRadioButton: function() {
                                                                                                                               b("#arriving-info").prop("checked", !0)
                                                                                                                           },
                                                                                                                           showStepOne: function() {
                                                                                                                               this.$el.find(".home").removeClass("step-discount")
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.viewHelper.doCleanup && this.viewHelper.doCleanup();
                                                                                                                               this.redeemViewRef && this.redeemViewRef.doCleanup && this.redeemViewRef.doCleanup();
                                                                                                                               this.lookuppresenter && this.lookuppresenter.doCleanup && this.lookuppresenter.doCleanup();
                                                                                                                               this.template = this.content = this.metaData = this.formData = this.redeemViewRef = this.viewHelper = this.lookuppresenter = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/model/itinerary-form-model", ["utils/restmodel", "config/app-config", "reservation/utils/core/reservation-utils"], function(c, f, d) {
                                                                                                                       return c.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.constructor.__super__.initialize.apply(this, arguments)
                                                                                                                           },
                                                                                                                           validate: function(a, b) {
                                                                                                                               if (this.metaData.get("enablePickupDropdown")) {
                                                                                                                                   if (!this.get("pickupCountry") || "" === this.get("pickupCountry")) return "pickupCountry";
                                                                                                                                   if (!this.get("pickupHiddenEOAG") || "" === this.get("pickupHiddenEOAG")) return "pickupLocation";
                                                                                                                                   if ("on" === this.get("returnAtDifferentLocationCheckbox") && (!this.get("dropoffCountry") || "" === this.get("dropoffCountry"))) return "dropoffCountry";
                                                                                                                                   if ("on" === this.get("returnAtDifferentLocationCheckbox") && (!this.get("dropoffHiddenEOAG") || "" === this.get("dropoffHiddenEOAG"))) return "dropoffLocation"
                                                                                                                               }
                                                                                                                               if (!this.get("pickupDay") || "" === this.get("pickupDay")) return "pickupDay";
                                                                                                                               if (!this.get("dropoffDay") || "" === this.get("dropoffDay")) return "dropoffDay";
                                                                                                                               if (!this.metaData.get("bookAsMember") && this.metaData.get("showAgeDropdown") &&
                                                                                                                                   (!this.get("ageSelector") || "" === this.get("ageSelector") || "0" === this.get("ageSelector")) && "none" != $("#itn-age").css("display")) return "ageSelector";
                                                                                                                               if (b && b.stepValidation) return !1;
                                                                                                                               if ("0" !== this.get("cdpField") && "" != this.get("cdpField") || "otherCdpIndicator" === this.get("cdpRadioButton") && "0" !== this.get("memberOtherCdpField") && "" !== this.get("memberOtherCdpField") || "profileCdpIndicator" === this.get("cdpRadioButton") && this.get("memberSelectedCdp") && "0" !== this.get("memberSelectedCdp") && "" !== this.get("memberSelectedCdp")) return this.metaData.get("isIncludeCDPOptions") &&
                                                                                                                                   !this.metaData.get("applicant") && this.metaData.get("isIncludeDiscountSection") && ("L" !== this.metaData.get("travelType") && "B" !== this.metaData.get("travelType") || "B" == this.metaData.get("travelType") && this.metaData.get("allowContractRate") && "yes" !== this.get("corpRate") && "no" !== this.get("corpRate")) ? "cdpDiscounts" : !1;
                                                                                                                               if (!this.metaData.get("enablePickupDropdown") && ("" !== this.get("pickupHiddenEOAG") || "" !== this.get("dropoffHiddenEOAG"))) {
                                                                                                                                   if (("Y" === this.get("inpPickupIsServedBy") || !0 == this.get("inpPickupIsServedBy") ||
                                                                                                                                           "Y" === this.get("inpPickupHasSpecialInstruction") || !0 == this.get("inpPickupHasSpecialInstruction")) && !0 !== this.metaData.get("pickupLocPopup")) return "pickupHasSpecialInstruction";
                                                                                                                                   if (this.get("pickupHiddenEOAG") !== this.get("dropoffHiddenEOAG") && "on" === this.get("returnAtDifferentLocationCheckbox") && ("Y" === this.get("inpDropoffHasSpecialInstruction") || "Y" === this.get("inpDropoffIsServedBy")) && !0 !== this.metaData.get("dropoffLocPopup")) return "dropoffHasSpecialInstruction"
                                                                                                                               }
                                                                                                                           },
                                                                                                                           url: function() {
                                                                                                                               var a = this.get("href");
                                                                                                                               return a && 0 <= a.indexOf("/rest/home") ? (a = a.split("/rest/home"), a[0] + "/rest/home/v2" + a[1]) : a
                                                                                                                           },
                                                                                                                           set: function(a, b, e) {
                                                                                                                               a = c.prototype.set.call(this, a, b, e);
                                                                                                                               b = this.get("militaryClock");
                                                                                                                               this.changed.pickupDay && (this.attributes.pickupDayStandard = d.standardizeDate(this.attributes.pickupDay, b));
                                                                                                                               this.changed.dropoffDay && (this.attributes.dropoffDayStandard = d.standardizeDate(this.attributes.dropoffDay, b));
                                                                                                                               return a
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define('reservation/itinerary/core/view/itinerary-form-view',
                                                                                                                       getDependencies('reservation/itinerary/core/view/itinerary-form-view'),
                                                                                                                       function($, _, Backbone, Utils, utilsProxy, AbstractView, appConfig, SessionHelper, taCountryView, locationView, dateTimeView, ageView, arrivalInfoView, redeemView, vehicleTypeView,
                                                                                                                           taMemberView, discountsView, locationClosedOverlayView, viewHelper, process, reservationInfo, retryView, resConstants, resUtils, affiliateMemberIDverificationModel, affiliateMemberVerificationPopupView, itineraryResidencyView, gtmTracker) {

                                                                                                                           var lightbox = null;

                                                                                                                           function getLightBox(isNew) {
                                                                                                                               if (lightbox === null) {
                                                                                                                                   lightbox = utilsProxy.getLightbox();
                                                                                                                               } else if (isNew) {
                                                                                                                                   lightbox = utilsProxy.getLightbox();
                                                                                                                               }
                                                                                                                               return lightbox;
                                                                                                                           }

                                                                                                                           var itineraryFormView = AbstractView.extend({
                                                                                                                               events: {
                                                                                                                                   'keyup input': 'eventHandler',
                                                                                                                                   'change input': 'eventHandler',
                                                                                                                                   'change select': 'eventHandler',
                                                                                                                                   'click .res-submit': 'bookAsGuestSubmitRes',
                                                                                                                                   'click .res-flow-submit': 'handleCDPVerification', //dtc4102//IRAC-4849//Verify AAA CDP//changed resEditSubmit to handleCDPVerification
                                                                                                                                   'click .login-submit': 'memberSubmit',
                                                                                                                                   'change #new-locSelect': 'toggleOneWay', //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                                   'click #new-viewEditCancel': 'showRMC' //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                               },
                                                                                                                               initialize: function() {
                                                                                                                                   this.isNewHomepage = this.options.isNewHomepage; //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                                   this.template = this.options.template;
                                                                                                                                   this.content = this.options.content;
                                                                                                                                   this.referrer = this.options.referrer;
                                                                                                                                   this.isResWidget = this.options.isResWidget;
                                                                                                                                   this.hertzGoldPlusImage = this.options.hertzGoldPlusImage
                                                                                                                                   this.viewHelper = viewHelper;
                                                                                                                                   this.prepareModel();
                                                                                                                                   this.isSearch = this.options.isSearch;
                                                                                                                                   this.isResFlowEdit = this.options.isResFlowEdit;
                                                                                                                                   this.prepareItineraryInfo();
                                                                                                                                   this.subscribe();

                                                                                                                                   this.render();

                                                                                                                                   this.bindDataEvents();
                                                                                                                                   this.handleVEC();
                                                                                                                               },

                                                                                                                               //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                               showRMC: function() {
                                                                                                                                   $('#rmc-tab h2').trigger('click');
                                                                                                                                   $("#new-resWidget").hide();
                                                                                                                                   $("#new-resLookup").show();

                                                                                                                               },
                                                                                                                               //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                               renderNewHomepage: function() {
                                                                                                                                   this.preRender();

                                                                                                                                   this.$el.empty();
                                                                                                                                   this.$el.append(_.template($(this.template).html(), {
                                                                                                                                       content: this.content,
                                                                                                                                       metaData: this.metaData
                                                                                                                                   }));

                                                                                                                                   this.renderNewLocation();
                                                                                                                                   this.renderTaCountry(newHomepage = true);
                                                                                                                                   this.renderDateTime(newHomepage = true);
                                                                                                                                   this.renderNewAge();
                                                                                                                                   this.renderArrivalInfo();
                                                                                                                                   this.renderVehicleType();
                                                                                                                                   this.renderTaMember(newHomepage = true);

                                                                                                                                   this.renderDiscounts(newHomepage = true);
                                                                                                                                   this.renderButtons();
                                                                                                                                   this.renderModify();
                                                                                                                                   this.renderErrors(newHomepage = true);

                                                                                                                                   //dtc4102 //Residency Toggle
                                                                                                                                   if (htz.config.pos.toUpperCase() === "US" && !htz.config.isApp) {
                                                                                                                                       this.renderResidencyToggle();
                                                                                                                                   }

                                                                                                                                   if (this.redeemViewRef && this.formData.get('redeemPoints') == 'on') {
                                                                                                                                       this.redeemViewRef.redeemPoints();
                                                                                                                                   }
                                                                                                                                   this.handleErrorData(SessionHelper.getItem(resConstants.ERRORS), false);

                                                                                                                                   this.postRender();

                                                                                                                                   return this;
                                                                                                                               },

                                                                                                                               //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                               toggleOneWay: function(e) {
                                                                                                                                   var returnLocation = this.$el.find('#new-dropoffLoc-containerInner');
                                                                                                                                   var value = $(e.target).val();
                                                                                                                                   if ($("#one-way").is(":checked")) {
                                                                                                                                       if (value === "sameRL") {
                                                                                                                                           $("#one-way").trigger("click");
                                                                                                                                           returnLocation.hide();
                                                                                                                                       } else {
                                                                                                                                           returnLocation.show();
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       if (value === "diffRL") {
                                                                                                                                           $("#one-way").trigger("click");
                                                                                                                                           returnLocation.show();
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                               renderNewAge: function() {
                                                                                                                                   if (this.metaData.get('showAgeDropdown') && !this.isResFlowEdit) {
                                                                                                                                       new ageView({
                                                                                                                                           el: this.$el.find('#itn-age-info'),
                                                                                                                                           template: $('#itinerary-homepage-age-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else if (!this.isResFlowEdit && (this.formData.get('pickupHiddenEOAG') != "") && !this.metaData.get('showAgeDropdown') && !this.metaData.get('loggedIn')) {
                                                                                                                                       new ageView({
                                                                                                                                           el: this.$el.find('#itn-age-info'),
                                                                                                                                           template: $('#itinerary-homepage-age-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else if (!this.isResFlowEdit && this.formData.get('inpPickupCountryCode') != "" && !this.metaData.get('loggedIn') && this.formData.get('inpPickupAutoFill') == 'Y') {
                                                                                                                                       new ageView({
                                                                                                                                           el: this.$el.find('#itn-age-info'),
                                                                                                                                           template: $('#itinerary-homepage-age-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-age').hide();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                               renderNewLocation: function() {
                                                                                                                                   var template;

                                                                                                                                   template = $('#itinerary-homepage-location-tpl').html();

                                                                                                                                   var locationViewRef = new locationView({
                                                                                                                                       el: this.$el.find('#itn-location'),
                                                                                                                                       template: template,
                                                                                                                                       model: this.model,
                                                                                                                                       viewHelper: this.viewHelper,
                                                                                                                                       content: this.content,
                                                                                                                                       isResFlowEdit: this.isResFlowEdit
                                                                                                                                   }).render();
                                                                                                                                   if (this.metaData.get('enablePickupDropdown')) {
                                                                                                                                       locationViewRef.renderDropDownLocations();
                                                                                                                                   }

                                                                                                                                   window.itineraryLocationView = locationViewRef;

                                                                                                                                   if ($("#one-way").is(":checked")) {
                                                                                                                                       $("#new-locSelect").val("diffRL").trigger("change");
                                                                                                                                       $("#new-dropoffLoc-containerInner").show();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               render: function() {
                                                                                                                                   if (!htz.config.isApp && this.options.isNewHomepage == true) {
                                                                                                                                       this.renderNewHomepage();
                                                                                                                                       return
                                                                                                                                   }
                                                                                                                                   this.preRender();

                                                                                                                                   this.$el.empty();
                                                                                                                                   this.$el.append(_.template($(this.template).html()));

                                                                                                                                   this.renderTaCountry();
                                                                                                                                   this.renderLocation();
                                                                                                                                   this.renderDateTime();
                                                                                                                                   this.renderAge();
                                                                                                                                   this.renderArrivalInfo();
                                                                                                                                   this.renderVehicleType();
                                                                                                                                   this.renderTaMember();
                                                                                                                                   this.renderRedeemPoints();
                                                                                                                                   this.renderDiscounts();
                                                                                                                                   this.renderButtons();
                                                                                                                                   this.renderModify();
                                                                                                                                   this.renderErrors();

                                                                                                                                   //dtc4102 //Residency Toggle
                                                                                                                                   if (htz.config.pos.toUpperCase() === "US" && !htz.config.isApp) {
                                                                                                                                       this.renderResidencyToggle();
                                                                                                                                   }

                                                                                                                                   if (this.redeemViewRef && this.formData.get('redeemPoints') == 'on') {
                                                                                                                                       this.redeemViewRef.redeemPoints();
                                                                                                                                   }
                                                                                                                                   this.handleErrorData(SessionHelper.getItem(resConstants.ERRORS), false);

                                                                                                                                   this.postRender();

                                                                                                                                   return this;
                                                                                                                               },
                                                                                                                               prepareModel: function() {
                                                                                                                                   this.metaData = this.model.get('metaData');
                                                                                                                                   this.formData = this.model.get('formData');
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Submit as member or guest from special instructions popup
                                                                                                                               	@function
                                                                                                                               	@param {Boolean} flag pickupLocPopup or dropoffLocPopup passed from accepting the special instructions popup
                                                                                                                                */
                                                                                                                               handlePopupSubmit: function(flag) {
                                                                                                                                   this.metaData.set(flag, true, {
                                                                                                                                       silent: true
                                                                                                                                   });

                                                                                                                                   if (!this.metaData.get('loggedIn') && this.metaData.get('bookAsMember')) {
                                                                                                                                       this.submitResMemberLogin();
                                                                                                                                   } else {
                                                                                                                                       this.submitRes();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderAdditionMemberOverlay: function() {
                                                                                                                                   var self = this;
                                                                                                                                   require(['reservation/itinerary/core/view/member-info-view'], function(memberInfoView) {
                                                                                                                                       getLightBox().overlay({
                                                                                                                                           title: self.content.homePage.homePageContent.memberIdOverlayTitle,
                                                                                                                                           width: 584,
                                                                                                                                           center: true,
                                                                                                                                           dismiss: false
                                                                                                                                       }, new memberInfoView({
                                                                                                                                           template: $('#member-info-tpl').html(),
                                                                                                                                           model: self.model,
                                                                                                                                           content: self.content,
                                                                                                                                           referrer: appConfig.homepage.resData
                                                                                                                                       }).render().el);
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               renderTaCountry: function(newHomepage) {
                                                                                                                                   if (this.metaData.get("loggedIn") && this.metaData.get('enableTA')) {
                                                                                                                                       if (newHomepage == true) {
                                                                                                                                           new taCountryView({
                                                                                                                                               el: this.$el.find('#itn-ta-country'),
                                                                                                                                               template: $('#itinerary-homepage-ta-country-list-tpl').html(),
                                                                                                                                               model: this.model,
                                                                                                                                               content: this.content,
                                                                                                                                               resizeElements: true
                                                                                                                                           }).render();
                                                                                                                                       } else {
                                                                                                                                           new taCountryView({
                                                                                                                                               el: this.$el.find('#itn-ta-country'),
                                                                                                                                               template: $('#itinerary-ta-country-list-tpl').html(),
                                                                                                                                               model: this.model,
                                                                                                                                               content: this.content
                                                                                                                                           }).render();
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-ta-country').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderLocation: function() {
                                                                                                                                   var template;
                                                                                                                                   if (this.metaData.get('enablePickupDropdown')) {
                                                                                                                                       template = $('#itinerary-dropdown-location-tpl').html();
                                                                                                                                   } else {
                                                                                                                                       template = $('#itinerary-fts-location-tpl').html();
                                                                                                                                   }
                                                                                                                                   var locationViewRef = new locationView({
                                                                                                                                       el: this.$el.find('#itn-location'),
                                                                                                                                       template: template,
                                                                                                                                       model: this.model,
                                                                                                                                       viewHelper: this.viewHelper,
                                                                                                                                       content: this.content,
                                                                                                                                       isResFlowEdit: this.isResFlowEdit
                                                                                                                                   }).render();
                                                                                                                                   if (this.metaData.get('enablePickupDropdown')) {
                                                                                                                                       locationViewRef.renderDropDownLocations();
                                                                                                                                   }

                                                                                                                                   window.itineraryLocationView = locationViewRef;
                                                                                                                               },
                                                                                                                               renderDateTime: function(newHomepage) {
                                                                                                                                   //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                                   if (newHomepage == true) {
                                                                                                                                       new dateTimeView({
                                                                                                                                           el: this.$el.find('#new-datePicker-container'),
                                                                                                                                           template: $('#itinerary-homepage-date-time-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else {
                                                                                                                                       new dateTimeView({
                                                                                                                                           el: this.$el.find('#itn-date-time'),
                                                                                                                                           template: $('#itinerary-date-time-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               //dtc4102 //Residency Toggle
                                                                                                                               renderResidencyToggle: function() {
                                                                                                                                   if (!this.metaData.get("loggedIn") && !this.metaData.get("applicant") && !this.metaData.get("enableTA")) {
                                                                                                                                       new itineraryResidencyView({
                                                                                                                                           el: this.$el.closest("#res-form").find('#itn-residency'),
                                                                                                                                           template: $('#itn-residency-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else {
                                                                                                                                       this.$el.closest("#res-form").find('#itn-residency').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               //dtc4102
                                                                                                                               //PR011617-Pricing Clarity
                                                                                                                               //Changed the renderAge function to handle the the following scenarios
                                                                                                                               //-regular default flow
                                                                                                                               //-pickupHiddenEOAG in browser session(autofill)
                                                                                                                               //-user coming to the home page with no EOAG code in session
                                                                                                                               renderAge: function() {
                                                                                                                                   if (this.metaData.get('showAgeDropdown') && !this.isResFlowEdit) {
                                                                                                                                       new ageView({
                                                                                                                                           el: this.$el.find('#itn-age-info'),
                                                                                                                                           template: $('#itinerary-age-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else if (!this.isResFlowEdit && (this.formData.get('pickupHiddenEOAG') != "") && !this.metaData.get('showAgeDropdown') && !this.metaData.get('loggedIn')) {
                                                                                                                                       new ageView({
                                                                                                                                           el: this.$el.find('#itn-age-info'),
                                                                                                                                           template: $('#itinerary-age-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else if (!this.isResFlowEdit && this.formData.get('inpPickupCountryCode') != "" && !this.metaData.get('loggedIn') && this.formData.get('inpPickupAutoFill') == 'Y') {
                                                                                                                                       new ageView({
                                                                                                                                           el: this.$el.find('#itn-age-info'),
                                                                                                                                           template: $('#itinerary-age-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-age').hide();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderArrivalInfo: function() {
                                                                                                                                   if (this.metaData.get('enableArrivalOptions')) {
                                                                                                                                       new arrivalInfoView({
                                                                                                                                           el: this.$el.find('#itn-arrival-info'),
                                                                                                                                           template: $('#itinerary-arrival-info-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-arrival-info').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderVehicleType: function() {
                                                                                                                                   this.metaData.set("isResWidget", this.isResWidget);
                                                                                                                                   if (this.metaData.get('enableCarDropDown') && this.metaData.get('vehicleGroupSippsAvailable') && !this.isResFlowEdit) {
                                                                                                                                       new vehicleTypeView({
                                                                                                                                           el: this.$el.closest("#res-form").find('#itn-vehicle-type'),
                                                                                                                                           template: $('#itinerary-vehicle-type-tpl').html(),
                                                                                                                                           model: this.model,
                                                                                                                                           content: this.content
                                                                                                                                       }).render();
                                                                                                                                   } else {
                                                                                                                                       this.$el.closest("#res-form").find('#itn-vehicle-type').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderTaMember: function(newHomepage) {
                                                                                                                                   if (this.metaData.get('enableTA')) {
                                                                                                                                       if (newHomepage == true) {
                                                                                                                                           new taMemberView({
                                                                                                                                               el: this.$el.find('#itn-ta-member-info'),
                                                                                                                                               template: $('#itinerary-homepage-ta-member-info-tpl').html(),
                                                                                                                                               model: this.model,
                                                                                                                                               content: this.content
                                                                                                                                           }).render();
                                                                                                                                       } else {
                                                                                                                                           new taMemberView({
                                                                                                                                               el: this.$el.find('#itn-ta-member-info'),
                                                                                                                                               template: $('#itinerary-ta-member-info-tpl').html(),
                                                                                                                                               model: this.model,
                                                                                                                                               content: this.content
                                                                                                                                           }).render();
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-ta-member-info').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderRedeemPoints: function(newHomepage) {
                                                                                                                                   if (this.metaData.get('loggedIn') && !this.isResFlowEdit && !this.metaData.get('applicant')) { //dtc4102//22.23//irac-20//Discount Overlay on hertz.com homepage - INC001258567
                                                                                                                                       if (newHomepage == true) {
                                                                                                                                           this.redeemViewRef = new redeemView({
                                                                                                                                               el: this.$el.find('.new-member-points'),
                                                                                                                                               template: $('#itinerary-homepage-redeem-point-tpl').html(),
                                                                                                                                               model: this.model,
                                                                                                                                               content: this.content
                                                                                                                                           }).render();
                                                                                                                                       } else {
                                                                                                                                           this.redeemViewRef = new redeemView({
                                                                                                                                               el: this.$el.find('#redeem-section'),
                                                                                                                                               template: $('#itinerary-redeem-point-tpl').html(),
                                                                                                                                               model: this.model,
                                                                                                                                               content: this.content
                                                                                                                                           }).render();
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#redeem-section').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderDiscounts: function(newHomepage) {
                                                                                                                                   var self = this;
                                                                                                                                   if (this.metaData.get('isIncludeDiscountSection')) {
                                                                                                                                       //dtc4102//22.23/irac-42-Getting_the_blank_discount_overlay
                                                                                                                                       if (this.metaData.get('applicant') && (!this.formData.get("memberSelectedCdp") || this.formData.get("memberSelectedCdp") == "")) {
                                                                                                                                           return 0;
                                                                                                                                       } else {
                                                                                                                                           //dtc4102//IRAC-5329//Re-skin of Hertz.com legacy - INC001102442
                                                                                                                                           if (newHomepage == true) {
                                                                                                                                               new discountsView({
                                                                                                                                                   el: this.$el.find('#itn-homepage-discounts'),
                                                                                                                                                   template: $('#itinerary-homepage-discounts-tpl').html(),
                                                                                                                                                   model: this.model,
                                                                                                                                                   metaData: this.metaData,
                                                                                                                                                   formData: this.formData,
                                                                                                                                                   viewHelper: this.viewHelper,
                                                                                                                                                   content: this.content,
                                                                                                                                                   isNewHomepage: true
                                                                                                                                               }).render();
                                                                                                                                               self.renderRedeemPoints(newHomepage = true);
                                                                                                                                           } else {
                                                                                                                                               new discountsView({
                                                                                                                                                   el: this.$el.find('#itn-discounts'),
                                                                                                                                                   template: $('#itinerary-discounts-tpl').html(),
                                                                                                                                                   model: this.model,
                                                                                                                                                   metaData: this.metaData,
                                                                                                                                                   formData: this.formData,
                                                                                                                                                   viewHelper: this.viewHelper,
                                                                                                                                                   content: this.content
                                                                                                                                               }).render();
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-discounts').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderModify: function() {
                                                                                                                                   if (this.metaData.get('resRmcProcess') && !this.isResFlowEdit) {
                                                                                                                                       if (this.metaData.get('prepaidModify') && this.formData.get("originalRqCheckBox") !== "on") {
                                                                                                                                           this.formData.set("originalRqCheckBox", "on");
                                                                                                                                       }
                                                                                                                                       this.$el.find('#itn-modify-keep-rate').append(_.template($('#itinerary-modify-keep-rate-tpl').html(), {
                                                                                                                                           metaData: this.metaData.attributes,
                                                                                                                                           formData: this.formData.attributes,
                                                                                                                                           content: this.content
                                                                                                                                       }));
                                                                                                                                   } else {
                                                                                                                                       this.$el.find('#itn-modify-keep-rate').remove();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderErrors: function(newHomePage) {
                                                                                                                                   var errorData = SessionHelper.getItem(resConstants.ITINERARY_ERROR_DATA);

                                                                                                                                   if (errorData) {
                                                                                                                                       var errorString = JSON.parse(errorData);

                                                                                                                                       if (errorString && errorString.systemErrors && errorString.systemErrors.length > 0) {
                                                                                                                                           errorString = errorString.systemErrors[0];

                                                                                                                                           if (errorString.indexOf("NRX196") >= 0) {
                                                                                                                                               this.renderAdditionMemberOverlay();
                                                                                                                                           }
                                                                                                                                       } else if (errorString && errorString.messages && errorString.messages.length > 0) {
                                                                                                                                           errorString = errorString.messages[0];

                                                                                                                                           if (errorString.indexOf("NZX305") >= 0) {
                                                                                                                                               var referrerUrl = SessionHelper.getItem(resConstants.REFERRER_URL);

                                                                                                                                               if (referrerUrl) {
                                                                                                                                                   window.location.href = "https://" + referrerUrl;
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       }

                                                                                                                                       errorData = JSON.parse(errorData);
                                                                                                                                       Utils.displayAllErrors(errorData, this.referrer.find('#error-list'));
                                                                                                                                       SessionHelper.removeItem(resConstants.ITINERARY_ERROR_DATA);
                                                                                                                                       SessionHelper.removeItem(resConstants.REFERRER_URL);
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               renderButtons: function() {
                                                                                                                                   this.$el.find('#res-submit-btns').append(_.template($('#itinerary-buttons-tpl').html(), {
                                                                                                                                       metaData: this.metaData.attributes,
                                                                                                                                       content: this.content,
                                                                                                                                       isResFlowEdit: this.isResFlowEdit
                                                                                                                                   }));
                                                                                                                               },
                                                                                                                               bindDataEvents: function() {
                                                                                                                                   this.formData.off('error', this.handleFormError, this);
                                                                                                                                   this.formData.off('fieldError', this.displayError, this);
                                                                                                                                   this.formData.off('ageChanged', this.ageChanged, this);
                                                                                                                                   this.formData.off('systemErrors', this.handleSystemErrors, this);

                                                                                                                                   this.formData.on('error', this.handleFormError, this);
                                                                                                                                   this.formData.on('fieldError', this.displayError, this);
                                                                                                                                   this.formData.on('ageChanged', this.ageChanged, this);

                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Display age dropdown overlay
                                                                                                                               	@function
                                                                                                                               	@param {object} formData
                                                                                                                                */
                                                                                                                               showAgeOverlay: function(formData) {
                                                                                                                                   var self = this;
                                                                                                                                   require(['reservation/itinerary/core/view/age-view'], function(ageView) {
                                                                                                                                       getLightBox().overlay({
                                                                                                                                           title: self.content.homePage.homePageContent.ageSelectOverlayTitle,
                                                                                                                                           width: 584,
                                                                                                                                           center: true
                                                                                                                                       }, new ageView({
                                                                                                                                           model: self.model,
                                                                                                                                           content: self.content,
                                                                                                                                           referrer: self
                                                                                                                                       }).render().el);
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Display res search errors
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               displayError: function(model, errors, target) {
                                                                                                                                   Utils.displayFieldErrors(errors, target);
                                                                                                                                   window.scrollTo(0, 0);
                                                                                                                               },
                                                                                                                               handleSystemErrors: function(systemErrors) {
                                                                                                                                   // no op
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Determine whether to return front end validation alerts or save to local storage and render form.
                                                                                                                               	@function
                                                                                                                               	@param {object} formData
                                                                                                                               	@param {String} errorCode
                                                                                                                                */
                                                                                                                               handleFormError: function(formData, errorCode) {
                                                                                                                                   var content = this.content;
                                                                                                                                   var nAlert = utilsProxy.getNotifier().alert;

                                                                                                                                   if (!htz.config.isApp && errorCode.responseJSON) {
                                                                                                                                       var options = {};
                                                                                                                                       options.scenario = 'system-errordata-tracking';
                                                                                                                                       var errMsg = errorCode.responseJSON.message.messages;
                                                                                                                                       var errData = errorCode.responseJSON.message.errorData;
                                                                                                                                       var sysData = errorCode.responseJSON.message.systemErrors;
                                                                                                                                       if (errMsg != undefined) {
                                                                                                                                           options.payload = errMsg;
                                                                                                                                       } else if (errData != undefined) {
                                                                                                                                           options.payload = errorCode.responseJSON.message.errorData.message;
                                                                                                                                       } else if (sysData != undefined) {
                                                                                                                                           options.payload = sysData;
                                                                                                                                       } else {
                                                                                                                                           options.payload = '';
                                                                                                                                       }
                                                                                                                                       gtmTracker.track(options);
                                                                                                                                   }

                                                                                                                                   if (typeof errorCode === 'string') {
                                                                                                                                       switch (errorCode) {
                                                                                                                                           case "pickupCountry":
                                                                                                                                               nAlert(content.homePage.jsErrorContent.selectCountry);
                                                                                                                                               this.$el.find('#pickup-country').focus();
                                                                                                                                               break;
                                                                                                                                           case "pickupLocation":
                                                                                                                                               nAlert(content.homePage.jsErrorContent.selectPickupLocation);
                                                                                                                                               this.$el.find('#pickup-location').focus();
                                                                                                                                               break;
                                                                                                                                           case "dropoffCountry":
                                                                                                                                               nAlert('Please select a Dropoff Country');
                                                                                                                                               this.$el.find('#dropoff-country').focus();
                                                                                                                                               break;
                                                                                                                                           case "dropoffLocation":
                                                                                                                                               nAlert(content.homePage.jsErrorContent.selectDropoffLocation);
                                                                                                                                               this.$el.find('#dropoff-location').focus();
                                                                                                                                               break;
                                                                                                                                           case "pickupDay":
                                                                                                                                               nAlert(content.homePage.jsErrorContent.validPickupDate);
                                                                                                                                               break;
                                                                                                                                           case "dropoffDay":
                                                                                                                                               nAlert(content.homePage.jsErrorContent.validDropoffDate);
                                                                                                                                               break;
                                                                                                                                           case "ageSelector":
                                                                                                                                               this.handleAgeError();
                                                                                                                                               break;
                                                                                                                                           case "cdpDiscounts":
                                                                                                                                               this.displayCDPNotification();
                                                                                                                                               break;
                                                                                                                                           case "pickupHasSpecialInstruction":
                                                                                                                                               this.locationPopupMessage('pickupLocPopup', formData.get('pickupHiddenEOAG'));
                                                                                                                                               break;
                                                                                                                                           case "dropoffHasSpecialInstruction":
                                                                                                                                               this.locationPopupMessage('dropoffLocPopup', formData.get('dropoffHiddenEOAG'));
                                                                                                                                               break;
                                                                                                                                           default:
                                                                                                                                               break;
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       if (!appConfig.config.isApp && appConfig.config.deviceGroup !== 'phone') {
                                                                                                                                           this.render(this.options.isNewHomepage);
                                                                                                                                       }
                                                                                                                                       this.handleErrorData(errorCode.responseText, true);
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               handleVEC() {
                                                                                                                                   if (this.isSearch) {
                                                                                                                                       $('#rmc-tab h2').trigger('click');
                                                                                                                                       $("#new-resWidget").hide();
                                                                                                                                       $("#new-resLookup").show();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Location specific special instructions popup message on submit
                                                                                                                               	@function
                                                                                                                               	@param {String} location pickupLocPopup or dropoffLocPopup
                                                                                                                               	@param {String} eoag EOAG
                                                                                                                                */
                                                                                                                               locationPopupMessage: function(location, eoag) {

                                                                                                                                   this.viewHelper.locationPopupMessage(this.content.locationDetailsView.locationDetails.locTitle, location, eoag, this);

                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Event handler to set checkbox value to in formData if checked
                                                                                                                               	@function
                                                                                                                               	@param {event} e Event which was fired from the target dom element
                                                                                                                                */
                                                                                                                               eventHandler: function(e) {
                                                                                                                                   var obj = $(e.target),
                                                                                                                                       val = $.trim(obj.val());
                                                                                                                                   var self = this;

                                                                                                                                   if (obj.is(':checkbox')) {
                                                                                                                                       val = obj.is(':checked') ? val : '';
                                                                                                                                   }


                                                                                                                                   //dtc4102//AAA verification
                                                                                                                                   //when user selects other cdp or cdp from the dropdown list
                                                                                                                                   if (this.metaData.get('loggedIn')) {
                                                                                                                                       if (obj.attr('id') === "profile-cdp-indicator" && obj.is(':checked')) {
                                                                                                                                           $('#member-selected-cdp').trigger("change");
                                                                                                                                       } else if (obj.attr('id') === "other-cdp-indicator" && obj.is(':checked')) {
                                                                                                                                           $('#member-other-cdp').trigger("change");
                                                                                                                                       }
                                                                                                                                   }

                                                                                                                                   this.formData.set(obj.attr('name'), val, {
                                                                                                                                       silent: true
                                                                                                                                   });

                                                                                                                                   if (obj.attr('id') === "one-way") {
                                                                                                                                       self.handleAffiliateCDPVerification();
                                                                                                                                   }
                                                                                                                               },

                                                                                                                               //dtc4102//AAA verification
                                                                                                                               //Trigger call to /required when location changes
                                                                                                                               handleAffiliateCDPVerification: function() {
                                                                                                                                   var self = this;

                                                                                                                                   if (this.metaData.get('loggedIn')) {
                                                                                                                                       if (this.formData.get("memberOtherCdpField") != "") {
                                                                                                                                           $('#member-other-cdp').trigger("change");
                                                                                                                                       } else {
                                                                                                                                           $('#member-selected-cdp').trigger("change");
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       if (this.formData.get('cdpField') != "") {
                                                                                                                                           $('#cdp-textfield').trigger("change");
                                                                                                                                       }
                                                                                                                                   }

                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Age error handling
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               handleAgeError: function() {
                                                                                                                                   this.showAgeOverlay(this.formData);

                                                                                                                                   var lBox = getLightBox();
                                                                                                                                   if (lBox.inUse) {
                                                                                                                                       lBox.closeOverlay();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Set selected age on homepage as age is being changed on age dropdown overlay
                                                                                                                               	@function
                                                                                                                               	@param {String} value value of age dropdown
                                                                                                                                */
                                                                                                                               ageChanged: function(value) {
                                                                                                                                   var self = this;
                                                                                                                                   this.$el.find('#ageSelector option').each(function() {
                                                                                                                                       if (this.value === value) {
                                                                                                                                           $(this).prop('selected', true);
                                                                                                                                           $(this).parent().trigger("change");
                                                                                                                                           self.formData.attributes.ageSelector = value;
                                                                                                                                           return;
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                               },

                                                                                                                               displayLocationClosedError: function(locations, callback) {
                                                                                                                                   if (getLightBox().inUse && !this.isResFlowEdit) {
                                                                                                                                       getLightBox().closeOverlay();
                                                                                                                                   }
                                                                                                                                   var close = function() {
                                                                                                                                       viewHelper.trackLocationClosedOverlay('Close');
                                                                                                                                   };
                                                                                                                                   viewHelper.trackLocationClosedOverlay('DisplayLocationClosedOverlay');
                                                                                                                                   var isNew = this.isResFlowEdit ? true : false;

                                                                                                                                   getLightBox(isNew).overlay({
                                                                                                                                       title: this.content.homePage.locationClosedProcess.locationClosed,
                                                                                                                                       width: 584,
                                                                                                                                       center: true,
                                                                                                                                       close: close
                                                                                                                                   }, new locationClosedOverlayView({
                                                                                                                                       formData: this.formData,
                                                                                                                                       metaData: this.metaData,
                                                                                                                                       content: this.content,
                                                                                                                                       locations: locations,
                                                                                                                                       template: "#location-closed-overlay-tpl",
                                                                                                                                       callback: callback,
                                                                                                                                       model: this.model
                                                                                                                                   }).render().el);

                                                                                                                               },


                                                                                                                               /**
                                                                                                                               	@description Member submit
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               memberSubmit: function() {

                                                                                                                                   if (this.metaData.get('loggedIn')) {
                                                                                                                                       this.bookAsGuestSubmitRes();
                                                                                                                                   } else {
                                                                                                                                       this.trackMemberRes();
                                                                                                                                       // Set model to Book As Member
                                                                                                                                       this.metaData.set({
                                                                                                                                           bookAsMember: 1
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                       this.submitRes();
                                                                                                                                   }
                                                                                                                               },

                                                                                                                               //dtc4102//IRAC-4849//Verify AAA CDP
                                                                                                                               isCDPVerificationReq: function(CDP) {
                                                                                                                                   var self = this;

                                                                                                                                   var deferred = $.Deferred();

                                                                                                                                   var cdp;
                                                                                                                                   try {
                                                                                                                                       cdp = CDP;
                                                                                                                                   } catch (e) {
                                                                                                                                       cdp = "";
                                                                                                                                   }

                                                                                                                                   $.ajax({
                                                                                                                                       type: 'GET',
                                                                                                                                       url: appConfig.config.rootContext + "/rest/hertz/v2/reservations/AAA/itinerary/" + cdp,
                                                                                                                                       cache: false,
                                                                                                                                       async: false,
                                                                                                                                       dataType: 'jsonp',
                                                                                                                                       success: function(response, textStatus, jqXHR) {
                                                                                                                                           if (response.data == "true") {
                                                                                                                                               deferred.resolve();
                                                                                                                                           } else {
                                                                                                                                               deferred.reject();
                                                                                                                                           }
                                                                                                                                       },
                                                                                                                                       error: function(jqXHR, textStatus, errThrown) {
                                                                                                                                           console.error("error fetching isCDPVerificationReq endpoint");
                                                                                                                                           console.error(textStatus);
                                                                                                                                           console.error(errThrown);
                                                                                                                                           deferred.reject();
                                                                                                                                       }
                                                                                                                                   });

                                                                                                                                   return deferred.promise();
                                                                                                                               },

                                                                                                                               //dtc4102//IRAC-4849//Verify AAA CDP
                                                                                                                               handleCDPVerification: _.debounce(function() {
                                                                                                                                       var self = this;

                                                                                                                                       var cdp;

                                                                                                                                       if (self.metaData.get("loggedIn")) {
                                                                                                                                           cdp = (self.formData.get("cdpRadioButton") == "otherCdpIndicator") ? self.formData.get("memberOtherCdpField") : self.formData.get("memberSelectedCdp");
                                                                                                                                       } else {
                                                                                                                                           cdp = self.formData.get("cdpField");
                                                                                                                                       }
                                                                                                                                       try {
                                                                                                                                           if (htz.config.pos == "US") {
                                                                                                                                               this.isCDPVerificationReq(cdp).done(function() {

                                                                                                                                                   function itinraryMemberVerificationEventHandler(e) {
                                                                                                                                                       e.stopPropagation();

                                                                                                                                                       var key = e.message ? "message" : "data";
                                                                                                                                                       var data = e[key];

                                                                                                                                                       if (e.data.status == "memberValidationSuccess" || e.data.status == "memberValidationCancel") {

                                                                                                                                                           var errorTxt = self.content.reservationGlobals.errorMsg.AAAValidationFailed ? self.content.reservationGlobals.errorMsg.AAAValidationFailed : "Discount code validation failed";

                                                                                                                                                           if (e.data.status == "memberValidationSuccess") {

                                                                                                                                                               var memberInfo = e.data.memberInfo;

                                                                                                                                                               // Success Logic Here
                                                                                                                                                               window.removeEventListener(messageEvent, itinraryMemberVerificationEventHandler, false);
                                                                                                                                                               $("#aaanational-membervalidation").remove();

                                                                                                                                                               //Google Data Layer
                                                                                                                                                               if (!htz.config.isApp) {
                                                                                                                                                                   try {
                                                                                                                                                                       var options = {};
                                                                                                                                                                       options.scenario = 'cdp_validation';
                                                                                                                                                                       options.payload = {};
                                                                                                                                                                       options.payload.id = self.model.get("formData").get("cdpField");
                                                                                                                                                                       options.payload.name = "AAA";
                                                                                                                                                                       options.payload.status = "validated";
                                                                                                                                                                       gtmTracker.track(options);
                                                                                                                                                                   } catch (e) {
                                                                                                                                                                       console.log("Error with AAA CDP validation." + e.message);
                                                                                                                                                                   }
                                                                                                                                                               }

                                                                                                                                                               self.resEditSubmit("partnerCDPVerified");

                                                                                                                                                           } else if (e.data.status == "memberValidationCancel") {

                                                                                                                                                               // Cancel Logic Here
                                                                                                                                                               window.removeEventListener(messageEvent, itinraryMemberVerificationEventHandler, false);
                                                                                                                                                               $("#aaanational-membervalidation").remove();

                                                                                                                                                               SessionHelper.setItem(resConstants.ITINERARY_ERROR_DATA, '{"messages":["' + errorTxt + '"]}');

                                                                                                                                                               //Google Data Layer
                                                                                                                                                               if (!htz.config.isApp) {
                                                                                                                                                                   try {
                                                                                                                                                                       var options = {};
                                                                                                                                                                       options.scenario = 'cdp_validation';
                                                                                                                                                                       options.payload = {};
                                                                                                                                                                       options.payload.id = self.model.get("formData").get("cdpField");
                                                                                                                                                                       options.payload.name = "AAA";
                                                                                                                                                                       options.payload.status = "canceled";
                                                                                                                                                                       gtmTracker.track(options);
                                                                                                                                                                   } catch (e) {
                                                                                                                                                                       console.log("Error with AAA CDPvalidation." + e.message);
                                                                                                                                                                   }
                                                                                                                                                               }

                                                                                                                                                               self.formData.set({
                                                                                                                                                                   'cdpField': '',
                                                                                                                                                                   'checkDiscount': '',
                                                                                                                                                                   'memberOtherCdpField': ''
                                                                                                                                                               }, {
                                                                                                                                                                   silent: true
                                                                                                                                                               });
                                                                                                                                                               self.formData.trigger('error', self.model.get("formData"), JSON.parse('{"messages":["' + errorTxt + '"]}'));
                                                                                                                                                           }

                                                                                                                                                       } else if (e.data.status === "memberValidationLoaded") {
                                                                                                                                                           window.AAAValidationLoaded = true;
                                                                                                                                                       }
                                                                                                                                                   }

                                                                                                                                                   var iframe = document.createElement("iframe");

                                                                                                                                                   iframe.src = "https://www.aaa.com/sharedservices/validate?vendor=hertz";
                                                                                                                                                   iframe.style.display = "block";
                                                                                                                                                   iframe.style.position = "fixed";
                                                                                                                                                   iframe.style.width = "100%"
                                                                                                                                                   iframe.style.height = "100%"
                                                                                                                                                   iframe.style.margin = "0"
                                                                                                                                                   iframe.style.padding = "0"
                                                                                                                                                   iframe.style.border = "0"
                                                                                                                                                   iframe.style.background = "transparent"
                                                                                                                                                   iframe.style.zIndex = "100000000"
                                                                                                                                                   iframe.id = "aaanational-membervalidation"

                                                                                                                                                   var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
                                                                                                                                                   var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";

                                                                                                                                                   // Listen to message from child window
                                                                                                                                                   window[eventMethod](messageEvent, itinraryMemberVerificationEventHandler, false);

                                                                                                                                                   // Position as the first element on the page
                                                                                                                                                   document.getElementsByTagName("body")[0].insertBefore(iframe, document.getElementsByTagName("body")[0].firstChild)

                                                                                                                                                   //Google Data Layer
                                                                                                                                                   if (!htz.config.isApp) {
                                                                                                                                                       try {
                                                                                                                                                           var options = {};
                                                                                                                                                           options.scenario = 'cdp_validation';
                                                                                                                                                           options.payload = {};
                                                                                                                                                           options.payload.id = self.model.get("formData").get("cdpField");
                                                                                                                                                           options.payload.name = "AAA";
                                                                                                                                                           options.payload.status = "shown";
                                                                                                                                                           gtmTracker.track(options);
                                                                                                                                                       } catch (e) {
                                                                                                                                                           console.log("Error with AAA CDPvalidation." + e.message);
                                                                                                                                                       }
                                                                                                                                                   }

                                                                                                                                                   setTimeout(function() {
                                                                                                                                                       if (!window.AAAValidationLoaded) {
                                                                                                                                                           document.getElementById('aaanational-membervalidation').remove()
                                                                                                                                                       }
                                                                                                                                                   }, 20000)

                                                                                                                                               }).fail(function() {
                                                                                                                                                   self.resEditSubmit();
                                                                                                                                               });
                                                                                                                                           } else {
                                                                                                                                               self.resEditSubmit();
                                                                                                                                           }
                                                                                                                                       } catch (e) {
                                                                                                                                           console.log("error processing handleCDPVerification form itenerary");
                                                                                                                                           self.resEditSubmit();
                                                                                                                                       }
                                                                                                                                   },
                                                                                                                                   1000),

                                                                                                                               resEditSubmit: function(partnerCDPVerified) {
                                                                                                                                   if (partnerCDPVerified) {
                                                                                                                                       this.formData.set({
                                                                                                                                           "partnerCDPVerified": 1
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   } else {
                                                                                                                                       this.formData.set({
                                                                                                                                           "partnerCDPVerified": 0
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   }

                                                                                                                                   if (!this.metaData.get('loggedIn')) {

                                                                                                                                       this.bookAsGuestSubmitRes();
                                                                                                                                   } else {

                                                                                                                                       this.memberSubmit();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               handleClosedLocation: function() {
                                                                                                                                   this.viewHelper.pickupAndDropoffTimesAreValid(this.formData.attributes, this.metaData.attributes, function(locations) {
                                                                                                                                       this.displayLocationClosedError(locations, this.bookAsGuestSubmitRes.bind(this));
                                                                                                                                   }.bind(this));
                                                                                                                               },
                                                                                                                               preSubmitCheck: function(submitFn) {
                                                                                                                                   var closedFn = this.handleClosedLocation.bind(this);

                                                                                                                                   // We will only do this if member is potentially eligible for gold anytime res
                                                                                                                                   if (this.viewHelper.isEligibleMemberLevel(this.metaData)) {

                                                                                                                                       var destinationDeferred = $.Deferred();

                                                                                                                                       var submitted = false;
                                                                                                                                       var self = this;

                                                                                                                                       //Register "done" action
                                                                                                                                       destinationDeferred.done(function(destinationData) {
                                                                                                                                           if (destinationData && !destinationData.isOneWay && destinationData.pickup && destinationData.pickup.optGoldAnytime) {

                                                                                                                                               var memberPrefData = {
                                                                                                                                                   'destinationCountryCode': destinationData.pickup.countryCode
                                                                                                                                               };

                                                                                                                                               var memberNumber = self.formData.get('no1ClubNumber');

                                                                                                                                               if (self.metaData.get('enableTA') && memberNumber) {
                                                                                                                                                   memberPrefData.memberNumber = memberNumber;
                                                                                                                                               }

                                                                                                                                               var memberPref = self.viewHelper.getMemberPreferences(memberPrefData);

                                                                                                                                               if (memberPref) {
                                                                                                                                                   self.viewHelper.storeMemberPrefs(memberPref);
                                                                                                                                                   var gaEligible = memberPref.get('goldAnytimeEligible');

                                                                                                                                                   if (gaEligible) {
                                                                                                                                                       if (submitFn && typeof submitFn === 'function') {
                                                                                                                                                           submitFn();
                                                                                                                                                           submitted = true;
                                                                                                                                                       }
                                                                                                                                                   }

                                                                                                                                               } else {
                                                                                                                                                   if (submitFn && typeof submitFn === 'function') {
                                                                                                                                                       submitFn();
                                                                                                                                                       submitted = true;
                                                                                                                                                   }
                                                                                                                                               }
                                                                                                                                           }

                                                                                                                                           if (!submitted) {
                                                                                                                                               self.viewHelper.checkLocationsAndSubmit(self.formData, self.metaData, submitFn, closedFn);
                                                                                                                                           }

                                                                                                                                       });

                                                                                                                                       // On fail, simply submit and let backend handle it
                                                                                                                                       destinationDeferred.fail(function() {
                                                                                                                                           if (submitFn && typeof submitFn === 'function') submitFn();
                                                                                                                                       });

                                                                                                                                       //Get Destination Data
                                                                                                                                       this.viewHelper.getDestinationData(this.formData, destinationDeferred);
                                                                                                                                   } else {
                                                                                                                                       this.viewHelper.checkLocationsAndSubmit(this.formData, this.metaData, submitFn, closedFn);
                                                                                                                                   }

                                                                                                                               },

                                                                                                                               /**
                                                                                                                               	@description Submit book as guest
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               bookAsGuestSubmitRes: function() {

                                                                                                                                   if (this.metaData.get('isRedeemPoints')) {
                                                                                                                                       this.formData.set({
                                                                                                                                           redeemPoints: 'on'
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   } else {
                                                                                                                                       this.formData.set({
                                                                                                                                           redeemPoints: ''
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                                   htz.helpers.SessionHelper.setItem('returnAtDifferentLocationCheckbox', this.formData.get("returnAtDifferentLocationCheckbox"));
                                                                                                                                   if (this.metaData.get('isRedeemPoints') && !this.metaData.get('loggedIn')) {
                                                                                                                                       this.memberSubmit();
                                                                                                                                   } else {
                                                                                                                                       this.metaData.set({
                                                                                                                                           bookAsMember: 0
                                                                                                                                       });
                                                                                                                                       this.trackGuestRes();
                                                                                                                                       this.preSubmitCheck(this.submitRes.bind(this));
                                                                                                                                   }
                                                                                                                               },

                                                                                                                               /**
                                                                                                                               	@description Submit book as member called by emember login overlay after login is successful
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               bookAsMemberSubmitRes: function(memberFirstName) {

                                                                                                                                   var self = this,
                                                                                                                                       formChanged = self.formData.toJSON(),
                                                                                                                                       metaChanged = self.metaData.changedAttributes();

                                                                                                                                   //dtc4102//AAA verification
                                                                                                                                   //Book as member scenario
                                                                                                                                   //Member name needs to be passed to the popup
                                                                                                                                   var loggedInMemberName = "";
                                                                                                                                   if (memberFirstName != undefined) {
                                                                                                                                       typeof memberFirstName === 'string' ? loggedInMemberName = memberFirstName : loggedInMemberName = "";
                                                                                                                                   }

                                                                                                                                   //Grab the logged in user's home page data
                                                                                                                                   self.model.fetch({
                                                                                                                                       success: function(model, res) {
                                                                                                                                           self.prepareModel();
                                                                                                                                           self.bindDataEvents();

                                                                                                                                           self.metaData.set({
                                                                                                                                               bookAsMember: 1
                                                                                                                                           }, {
                                                                                                                                               silent: true
                                                                                                                                           });

                                                                                                                                           //The following code overrites whatever is in the profile with what user has filled out in the form for the current rate request
                                                                                                                                           if (metaChanged) {
                                                                                                                                               self.metaData.set(metaChanged, {
                                                                                                                                                   silent: true
                                                                                                                                               });
                                                                                                                                           }

                                                                                                                                           var cdp = formChanged.cdpField,
                                                                                                                                               sipp = formChanged.selectedCarType,
                                                                                                                                               profileSipp = self.formData.get('selectedCarType'),
                                                                                                                                               profileSelectedCDP = self.formData.get('memberSelectedCdp');

                                                                                                                                           if (formChanged.militaryClock !== self.formData.get('militaryClock')) {
                                                                                                                                               formChanged.militaryClock = self.formData.get('militaryClock');
                                                                                                                                               formChanged.pickupDay = self.flipDate(formChanged.pickupDay);
                                                                                                                                               formChanged.dropoffDay = self.flipDate(formChanged.dropoffDay);
                                                                                                                                           }

                                                                                                                                           self.formData.set(formChanged, {
                                                                                                                                               silent: true
                                                                                                                                           });

                                                                                                                                           if (cdp && cdp !== '') {
                                                                                                                                               var data = {
                                                                                                                                                   cdpRadioButton: 'otherCdpIndicator',
                                                                                                                                                   memberOtherCdpField: cdp,
                                                                                                                                                   checkDiscount: 'on'
                                                                                                                                               };
                                                                                                                                               self.formData.set(data, {
                                                                                                                                                   silent: true
                                                                                                                                               });
                                                                                                                                           } else if (profileSelectedCDP) {
                                                                                                                                               var data = {
                                                                                                                                                   cdpRadioButton: 'profileCdpIndicator',
                                                                                                                                                   memberSelectedCdp: profileSelectedCDP,
                                                                                                                                                   checkDiscount: 'on'
                                                                                                                                               };
                                                                                                                                               self.formData.set(data, {
                                                                                                                                                   silent: true
                                                                                                                                               });
                                                                                                                                           }

                                                                                                                                           if (!sipp || sipp === 'ACAR') {
                                                                                                                                               self.formData.set({
                                                                                                                                                   selectedCarType: profileSipp
                                                                                                                                               }, {
                                                                                                                                                   silent: true
                                                                                                                                               });
                                                                                                                                           }

                                                                                                                                           //dtc4102//AAA verification
                                                                                                                                           //Book as member scenario
                                                                                                                                           //Send the prefered CDP in profile to the new affiliate member verification popup
                                                                                                                                           var isCookied;

                                                                                                                                           try {
                                                                                                                                               var memberCDP = (self.formData.get("memberOtherCdpField") != "") ? self.formData.get("memberOtherCdpField") : self.formData.get("memberSelectedCdp");
                                                                                                                                               var expression = new RegExp("affiliateID_" + self.metaData.get("memberNumber") + "_" + memberCDP + "=([^;]+)");
                                                                                                                                               var cookieValue = expression.exec(document.cookie);
                                                                                                                                               isCookied = (cookieValue != null) ? true : false;
                                                                                                                                           } catch (e) {
                                                                                                                                               isCookied = false;
                                                                                                                                           }

                                                                                                                                           if ((cdp != "" || profileSelectedCDP != "") && !isCookied) {
                                                                                                                                               var selectedCDP = cdp != "" ? cdp : profileSelectedCDP;
                                                                                                                                               self.handleAffiliateMemberBookAsMember(selectedCDP, loggedInMemberName);
                                                                                                                                               utilsProxy.getSpinner().stop();
                                                                                                                                           } else {
                                                                                                                                               self.preSubmitCheck(self.submit.bind(self));
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                               },

                                                                                                                               //dtc4102//AAA verification
                                                                                                                               //call the web service to check and see if we need to verify affiliate member ID 
                                                                                                                               //when user presses book as member
                                                                                                                               handleAffiliateMemberBookAsMember: function(profileSelectedCDP, loggedInMemberName) {
                                                                                                                                   var self = this;

                                                                                                                                   var cdp = $.trim(profileSelectedCDP),
                                                                                                                                       POS = appConfig.config.pos,
                                                                                                                                       dialect = appConfig.config.dialect,
                                                                                                                                       pickupLocationCode = this.formData.get('pickupHiddenEOAG'),
                                                                                                                                       dropOffLocationCode = this.formData.get('returnAtDifferentLocationCheckbox') == "on" ? (this.formData.get('dropoffHiddenEOAG') ? this.formData.get('dropoffHiddenEOAG') : "") : "",
                                                                                                                                       name = $.trim(loggedInMemberName);

                                                                                                                                   $.ajax({
                                                                                                                                       cache: false,
                                                                                                                                       async: true,
                                                                                                                                       data: $.param({
                                                                                                                                           'POS': POS,
                                                                                                                                           'pickupLocationCode': pickupLocationCode,
                                                                                                                                           'dropOffLocationCode': dropOffLocationCode,
                                                                                                                                           'CDP': cdp,
                                                                                                                                           'dialect': dialect
                                                                                                                                       }),
                                                                                                                                       url: appConfig.config.apiDomain + '/rest/partner/cdp/memberID/required',
                                                                                                                                       dataType: 'jsonp',
                                                                                                                                       type: 'GET',
                                                                                                                                       success: function(res, textStatus, jqXHR) {

                                                                                                                                           if (res.data && res.data.verifyPartnerMember == true) {
                                                                                                                                               self.formData.set({
                                                                                                                                                   'companyId': res.data.companyId
                                                                                                                                               }, {
                                                                                                                                                   silent: true
                                                                                                                                               });

                                                                                                                                               getLightBox().overlay({
                                                                                                                                                       title: "<img src=" + self.hertzGoldPlusImage + " alt='' class='gold-plus-lightbox-logo' />",
                                                                                                                                                       suppressClose: true,
                                                                                                                                                       dismiss: false,
                                                                                                                                                       width: 481,
                                                                                                                                                       noPadding: false
                                                                                                                                                   }, new affiliateMemberVerificationPopupView({
                                                                                                                                                       el: "#homePageAffiliateMember",
                                                                                                                                                       cdp: cdp,
                                                                                                                                                       name: name,
                                                                                                                                                       lBoxRef: getLightBox(),
                                                                                                                                                       referrer: self,
                                                                                                                                                       content: res.data.content
                                                                                                                                                   })
                                                                                                                                                   .render().el);
                                                                                                                                           } else {
                                                                                                                                               self.preSubmitCheck(self.submit.bind(self));
                                                                                                                                           }
                                                                                                                                       },
                                                                                                                                       error: function(jqXHR, textStatus, errThrown) {
                                                                                                                                           console.log("error fetching /required");
                                                                                                                                           console.log(textStatus);
                                                                                                                                           console.log(jqXHR);
                                                                                                                                           console.log(errThrown);
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Submit member login reservation
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               submitResMemberLogin: function() {
                                                                                                                                   var self = this;
                                                                                                                                   if (self.formData.isValid()) {
                                                                                                                                       var close = function() {
                                                                                                                                           self.metaData.set({
                                                                                                                                               bookAsMember: 0
                                                                                                                                           }, {
                                                                                                                                               silent: true
                                                                                                                                           });
                                                                                                                                       };
                                                                                                                                       self.model.set('metaData', self.metaData);
                                                                                                                                       $.ajax({
                                                                                                                                           url: appConfig.config.rootContext + "/member/login/overlay",
                                                                                                                                           cache: false,
                                                                                                                                           dataType: 'html',
                                                                                                                                           success: function(res) {
                                                                                                                                               $('#hp-overlays').append(res);
                                                                                                                                               window.scrollTo(0, 0);
                                                                                                                                               getLightBox().overlay({
                                                                                                                                                   title: "<img src=" + self.hertzGoldPlusImage + " alt='' class='gold-plus-lightbox-logo' />",
                                                                                                                                                   close: close,
                                                                                                                                                   dismiss: false,
                                                                                                                                                   width: 762,
                                                                                                                                                   noPadding: true
                                                                                                                                               }, $('#homePageloginBox'));

                                                                                                                                               var lm = new loginModel();
                                                                                                                                               var lv = new loginView({
                                                                                                                                                   el: "#homePageloginBox",
                                                                                                                                                   model: lm,
                                                                                                                                                   isRes: true,
                                                                                                                                                   metaModel: self.model.get('metaData')
                                                                                                                                               });
                                                                                                                                           }
                                                                                                                                       });
                                                                                                                                   } else {
                                                                                                                                       self.formData.trigger('error', self.formData, self.formData.validate());
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Returns the date with day and month flipped
                                                                                                                               	@function
                                                                                                                               	@param {String} date Date passed in either dd/mm/yy or mm/dd/yy format
                                                                                                                               	@returns {String}
                                                                                                                                */
                                                                                                                               flipDate: function(date) {
                                                                                                                                   var str = date.split("/");
                                                                                                                                   return str[1] + "/" + str[0] + "/" + str[2];
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Omniture tracking for reservation as guest
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               trackGuestRes: function() {
                                                                                                                                   if (typeof WebTracking !== 'undefined') {
                                                                                                                                       WebTracking.trackData({
                                                                                                                                           eVar37: 'guest',
                                                                                                                                           events: 'event7'
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Omniture tracking for reservation as member
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               trackMemberRes: function() {
                                                                                                                                   if (typeof WebTracking !== 'undefined') {
                                                                                                                                       WebTracking.trackData({
                                                                                                                                           eVar37: 'member',
                                                                                                                                           events: 'event7'
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                               },

                                                                                                                               //dtc4102//AAA Verification
                                                                                                                               handleAffiliateMember: function() {
                                                                                                                                   var self = this;

                                                                                                                                   if (self.metaData.get('travelType') === "") {
                                                                                                                                       self.submit();
                                                                                                                                   } else {

                                                                                                                                       self.viewHelper.validateAffiliateMember(self.getCdpfield(), self.formData.get("affiliateMemberID"), self, false).done(function() {
                                                                                                                                           self.submit();
                                                                                                                                       }).fail(function(errData) {
                                                                                                                                           self.$el.find('#affiliate-member-ID').val("");
                                                                                                                                           self.formData.set({
                                                                                                                                               "affiliateMemberJoin": "",
                                                                                                                                               "affiliateMemberID": ""
                                                                                                                                           }, {
                                                                                                                                               silent: true
                                                                                                                                           });

                                                                                                                                           var err = JSON.parse(errData.responseText);
                                                                                                                                           var errCode = err.resultInfo.resultCode;

                                                                                                                                           if (errCode === 307 || errCode === 301) {
                                                                                                                                               htz.helpers.SessionHelper.setItem('originalCDP', self.formData.get("cdpField"));

                                                                                                                                               getLightBox().overlay({
                                                                                                                                                   title: err.content.CDPLbTitle,
                                                                                                                                                   width: 654,
                                                                                                                                                   center: true,
                                                                                                                                                   dismiss: false
                                                                                                                                               }, _.template($('#alternative-cdp-tpl').html(), {
                                                                                                                                                   content: self.content,
                                                                                                                                                   error: err.message.messages
                                                                                                                                               }));

                                                                                                                                               setTimeout(function() {
                                                                                                                                                   if (errCode === 301) {
                                                                                                                                                       self.formData.set({
                                                                                                                                                           affiliateMemberJoin: "on"
                                                                                                                                                       }, {
                                                                                                                                                           silent: true
                                                                                                                                                       });
                                                                                                                                                       self.formData.set({
                                                                                                                                                           affiliateCallCount: 1
                                                                                                                                                       }, {
                                                                                                                                                           silent: true
                                                                                                                                                       });
                                                                                                                                                   } else if (errCode === 307) {
                                                                                                                                                       self.formData.set({
                                                                                                                                                           affiliateCallCount: htz.res.config.affiliateMemberCallCount[self.formData.get("companyId")]
                                                                                                                                                       }, {
                                                                                                                                                           silent: true
                                                                                                                                                       });
                                                                                                                                                   }
                                                                                                                                                   getLightBox().closeOverlay();
                                                                                                                                                   self.submit();

                                                                                                                                               }, 4000);

                                                                                                                                           } else {
                                                                                                                                               self.formData.trigger('error', null, errData, self.referrer.find("#error-list"));
                                                                                                                                           }
                                                                                                                                       });
                                                                                                                                   }

                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Submit reservation for rate request
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               submitRes: function() {

                                                                                                                                   SessionHelper.removeItem(resConstants.VEHICLES_ERROR_DATA); //dtc4102//IRAC-4849//Verify AAA CDP

                                                                                                                                   var self = this;

                                                                                                                                   if (self.isResWidget) {
                                                                                                                                       self.viewHelper.specialOffersExtrasCheck();
                                                                                                                                   }

                                                                                                                                   if (self.formData.get('cdpRadioButton') === 'profileCdpIndicator' && self.metaData.get('loggedIn')) {
                                                                                                                                       if (self.metaData.get('verifyPartnerMember')) {
                                                                                                                                           this.handleAffiliateMember();
                                                                                                                                       } else {
                                                                                                                                           self.submit();
                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       self.viewHelper.validateCdp(self.getCdpfield()).done(function() {
                                                                                                                                           if (self.metaData.get('bookAsMember')) {
                                                                                                                                               self.submitResMemberLogin();
                                                                                                                                           } else {
                                                                                                                                               if (self.metaData.get('verifyPartnerMember')) {
                                                                                                                                                   self.handleAffiliateMember();

                                                                                                                                               } else {
                                                                                                                                                   self.submit();
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       }).fail(function(errData) {
                                                                                                                                           self.formData.trigger('error', null, errData, self.referrer.find("#error-list"));
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               submit: function() {
                                                                                                                                   var self = this;
                                                                                                                                   if (appConfig.config.isApp) {
                                                                                                                                       if (hzm.utils.isIPHONE()) {
                                                                                                                                           if (self.formData.attributes.pickupTime == "00:00") {
                                                                                                                                               self.formData.attributes.pickupTime = $("#pickup-date-box-app").val().replace(/^.{0,}T/, "").substring(0, 5);
                                                                                                                                           }
                                                                                                                                           if (self.formData.attributes.dropoffTime == "00:00") {
                                                                                                                                               self.formData.attributes.dropoffTime = $("#dropoff-date-box-app").val().replace(/^.{0,}T/, "").substring(0, 5);
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                                   self.setDiscounts();
                                                                                                                                   if (!this.preSubmit()) {
                                                                                                                                       return;
                                                                                                                                   }
                                                                                                                                   self.resetErrors();
                                                                                                                                   self.removeGeoPrefIndicator();

                                                                                                                                   SessionHelper.setItem(resConstants.HOD_VEHICLES, '');

                                                                                                                                   try {
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.appCodeName = navigator.appCodeName;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.appName = navigator.appName;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.appVersion = navigator.appVersion;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.cookieEnabled = navigator.cookieEnabled;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.onLine = navigator.onLine;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.platform = navigator.platform;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.product = navigator.product;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.userAgent = navigator.userAgent;
                                                                                                                                       self.formData.attributes.recommendationBrowserInfo.language = navigator.language;
                                                                                                                                   } catch (e) {
                                                                                                                                       console.log(e.getMessage);
                                                                                                                                   }

                                                                                                                                   var url, type = null,
                                                                                                                                       prevData = self.formData.toJSON();
                                                                                                                                   if (this.isResFlowEdit) {
                                                                                                                                       if (self.formData.isValid()) {
                                                                                                                                           if (process.isModify()) {
                                                                                                                                               var confNumber = SessionHelper.getItem(resConstants.CONFIRMATION_NUMBER);
                                                                                                                                               url = appConfig.config.rootContext + '/rest/hertz/v2/reservations/' + confNumber + '/makeReservation';
                                                                                                                                           } else {
                                                                                                                                               url = appConfig.config.rootContext + '/rest/hertz/v2/reservations/makeReservation';
                                                                                                                                           }
                                                                                                                                           type = 'POST';
                                                                                                                                           require(['reservation/res-flow/core/view/helper/view-helper'], function(resFlowHelper) {
                                                                                                                                               var resData = resFlowHelper.prepareDataToSubmit(self.formData.toJSON());
                                                                                                                                               var modelRef = new Backbone.Model(resData);
                                                                                                                                               self.submitResData(url, type, modelRef, self, prevData);
                                                                                                                                           });
                                                                                                                                       } else {
                                                                                                                                           self.formData.trigger('error', self.formData, self.formData.validate());
                                                                                                                                       }
                                                                                                                                   } else if (process.isModify()) {
                                                                                                                                       var confNumber = SessionHelper.getItem(resConstants.CONFIRMATION_NUMBER);
                                                                                                                                       url = appConfig.config.rootContext + "/rest/hertz/v2/itinerary/vehicles/" + confNumber;
                                                                                                                                       type = 'POST'; //PUT
                                                                                                                                       self.submitResData(url, type, self.formData, self, prevData);
                                                                                                                                   } else {
                                                                                                                                       url = appConfig.config.rootContext + "/rest/hertz/v2/itinerary/vehicles";
                                                                                                                                       type = 'POST';
                                                                                                                                       self.submitResData(url, type, self.formData, self, prevData);
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               submitResData: function(url, type, resData, self, prevData) {
                                                                                                                                   retryView.saveWithRetry(resData, {}, {
                                                                                                                                       url: url,
                                                                                                                                       type: type,
                                                                                                                                       beforeSend: function() {
                                                                                                                                           if (appConfig.config.isApp) {
                                                                                                                                               htz.utils.Spinner.spin();
                                                                                                                                           } else {
                                                                                                                                               utilsProxy.getSpinner().spin();
                                                                                                                                           }
                                                                                                                                       },

                                                                                                                                       error: function(model, res, retryCount) {

                                                                                                                                           if (res == 'cdpDiscounts') {
                                                                                                                                               if (appConfig.config.isApp) {
                                                                                                                                                   htz.utils.Spinner.stop();
                                                                                                                                               } else {
                                                                                                                                                   utilsProxy.getSpinner().stop();
                                                                                                                                               }
                                                                                                                                               self.displayCDPNotification();
                                                                                                                                           } else {
                                                                                                                                               if (!self.isResFlowEdit) {
                                                                                                                                                   self.model.set('formData', model);
                                                                                                                                               }
                                                                                                                                               self.handleRateFailure(model, res, self.referrer.find("#error-list"), retryCount);
                                                                                                                                               if (appConfig.config.isApp) {
                                                                                                                                                   htz.utils.Spinner.stop();
                                                                                                                                               } else {
                                                                                                                                                   utilsProxy.getSpinner().stop();
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       },
                                                                                                                                       success: function(model, res) {
                                                                                                                                           //dtc4102//IRAC-5349 Recommendation Engine Tracking
                                                                                                                                           var isRecommendationEngine = ""
                                                                                                                                           try {
                                                                                                                                               isRecommendationEngine = ((res.data.model.recommendationSipp && res.data.model.recommendationWeight) && (res.data.model.recommendationSipp != "" && res.data.model.recommendationWeight > 0)) ? true : "undefined";
                                                                                                                                           } catch (ex) {
                                                                                                                                               var isRecommendationEngine = false;
                                                                                                                                           }

                                                                                                                                           //dtc4102//PRC91530//Google Data Layer
                                                                                                                                           //Rental Search
                                                                                                                                           if (!htz.config.isApp) {
                                                                                                                                               var options = {};
                                                                                                                                               options.scenario = 'rental-search';
                                                                                                                                               options.payload = [model.toJSON(), isRecommendationEngine]; //dtc4102//IRAC-5349 Recommendation Engine Tracking
                                                                                                                                               gtmTracker.track(options);
                                                                                                                                           }


                                                                                                                                           //dtc4102//IRAC-5349 Recommendation Engine Tracking
                                                                                                                                           if (!htz.config.isApp && isRecommendationEngine == true) {
                                                                                                                                               var options = {};
                                                                                                                                               options.scenario = 'recommendation-engine';
                                                                                                                                               options.payload = res.data.model;
                                                                                                                                               gtmTracker.track(options);
                                                                                                                                           }

                                                                                                                                           if (res.resultInfo.url != null && res.resultInfo.url.indexOf("UrlHod") != -1) {
                                                                                                                                               var hodUrl = location.protocol + model.metaData.attributes.urlHod + res.resultInfo.url.substring("UrlHod".length);
                                                                                                                                               if (self.formData.get('pickupHiddenEOAG') == self.formData.get('dropoffHiddenEOAG') || (self.formData.get('returnAtDifferentLocationCheckbox') == '')) {

                                                                                                                                                   var destinationUrl = hodUrl.split("/");
                                                                                                                                                   var countryCode = (model.get('inpPickupCountryCode') || model.get('inpDropoffCountryCode'));
                                                                                                                                                   if (destinationUrl[2].includes("hertz247") && countryCode === 'GB') {
                                                                                                                                                       destinationUrl[2] = destinationUrl[2].replace(destinationUrl[2], "www.hertz247.co.uk");
                                                                                                                                                   }
                                                                                                                                                   if (destinationUrl[2].includes("hertz247") && countryCode != null && countryCode != 'GB') {
                                                                                                                                                       destinationUrl[2] = destinationUrl[2].replace(destinationUrl[2], "www.hertz247." + countryCode.toLowerCase() + "/" + countryCode.toLowerCase());
                                                                                                                                                   }
                                                                                                                                                   destinationUrl = destinationUrl.join().replaceAll(",", "/");
                                                                                                                                                   hodUrl = destinationUrl;

                                                                                                                                                   window.location.href = hodUrl;
                                                                                                                                               } else {
                                                                                                                                                   self.createErrorListContainer();
                                                                                                                                                   self.referrer.find('#error-list ul').append("<li>" + res.message.messages + "</li>");
                                                                                                                                                   self.referrer.find('#error-list').show();
                                                                                                                                                   htz.utils.Spinner.stop();
                                                                                                                                                   if (lightbox.inUse) {
                                                                                                                                                       lightbox.closeOverlay();
                                                                                                                                                   }

                                                                                                                                               }
                                                                                                                                           }

                                                                                                                                           if (!self.metaData.get('enableDNC')) {
                                                                                                                                               try {
                                                                                                                                                   self.storeResInfoInLocalStorage(prevData, model.get("itinerary"), self.getPrevResStorageKey());
                                                                                                                                               } catch (e) {}
                                                                                                                                           }
                                                                                                                                           if (res && res.data && res.data.href) {
                                                                                                                                               var href = res.data.href;
                                                                                                                                               var splited = href.split("/");
                                                                                                                                               var quoteId = splited[splited.length - 1];

                                                                                                                                               SessionHelper.setItem(resConstants.QUOTE_ID, quoteId);

                                                                                                                                               reservationInfo.setReservationId(quoteId);
                                                                                                                                           }

                                                                                                                                           self.formData.clear({
                                                                                                                                               silent: true
                                                                                                                                           });
                                                                                                                                           self.formData.set(prevData, {
                                                                                                                                               silent: true
                                                                                                                                           });

                                                                                                                                           self.handleRateSuccess(self.metaData, self.formData, self.model, res);
                                                                                                                                       },
                                                                                                                                       complete: function() {
                                                                                                                                           self.$el.find('.home').removeClass('step-discount');
                                                                                                                                           if (getLightBox().inUse && !self.isResFlowEdit) {
                                                                                                                                               getLightBox().closeOverlay();
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               getCdpfield: function() {
                                                                                                                                   return this.metaData.get('loggedIn') && this.formData.get('memberOtherCdpField') ? this.formData.get('memberOtherCdpField') : this.formData.get('cdpField');
                                                                                                                               },
                                                                                                                               prepareItineraryInfo: function() {
                                                                                                                                   var previousSearch = this.getLatestPrevSearch(this.getPrevResStorageKey());
                                                                                                                                   if (this.isFormDataEmpty() && !this.isSearch) {
                                                                                                                                       var newTime = this.viewHelper.getUpdatedTime();

                                                                                                                                       this.formData.set({
                                                                                                                                           pickupTime: newTime,
                                                                                                                                           dropoffTime: newTime
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                       if (previousSearch) {
                                                                                                                                           this.loadLocalStorageResInfo(previousSearch);
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                                   this.storeDialect();
                                                                                                                               },
                                                                                                                               storeDialect: function() {
                                                                                                                                   resUtils.updateReservationInfo({
                                                                                                                                       dialect: appConfig.config.dialect
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               isFormDataEmpty: function() {
                                                                                                                                   var data = this.formData.attributes;

                                                                                                                                   return (data.pickupDay === "" && data.dropoffDay === "" && data.pickupTime === "10:00" && data.dropoffTime === "10:00" && data.cdpField === "" && data.memberOtherCdpField === "" && data.corporateRate === "" && data.officialTravel === "" && data.pcNumber === "" && data.cvNumber === "" && data.itNumber === "" && data.typeInRateQuote === "");
                                                                                                                               },
                                                                                                                               getLatestPrevSearch: function(key) {
                                                                                                                                   try {
                                                                                                                                       this.itnInfo = localStorage.getItem(key);
                                                                                                                                       if (this.itnInfo) {
                                                                                                                                           this.itnInfo = JSON.parse(this.itnInfo);

                                                                                                                                           if (!appConfig.config.isApp) {
                                                                                                                                               this.metaData.set({
                                                                                                                                                   isOldResInfo: true
                                                                                                                                               });
                                                                                                                                           }
                                                                                                                                           return this.itnInfo.prevResData[this.itnInfo.prevResData.length - 1].resFormData;
                                                                                                                                       }
                                                                                                                                   } catch (e) {}
                                                                                                                               },
                                                                                                                               getPrevResStorageKey: function() {
                                                                                                                                   return this.metaData.get('loggedIn') ? resConstants.MEMBER_SEARCH_DATA : resConstants.NON_MEMBER_SEARCH_DATA;
                                                                                                                               },
                                                                                                                               storeResInfoInLocalStorage: function(resData, itineraryData, key) {
                                                                                                                                   if (itineraryData) {
                                                                                                                                       var itnData = {},
                                                                                                                                           data = {},
                                                                                                                                           i;

                                                                                                                                       if (this.metaData.get('loggedIn')) {
                                                                                                                                           data.resFormData = {};
                                                                                                                                           var memRequiredData = ['pickupLocation', 'pickupHiddenEOAG', 'dropoffLocation', 'dropoffHiddenEOAG', 'returnAtDifferentLocationCheckbox',
                                                                                                                                               'pickupDay', 'pickupDayStandard', 'dropoffDayStandard', 'dropoffDay', 'pickupTime', 'dropoffTime', 'militaryClock', 'selectedCarType',
                                                                                                                                               'inpPickupAutoFill', 'inpPickupStateCode', 'inpPickupCountryCode', 'inpPickupSearchType', 'inpDropoffAutoFill', 'inpDropoffStateCode', 'inpDropoffCountryCode', 'inpDropoffSearchType'
                                                                                                                                           ];
                                                                                                                                           for (i = 0; i < memRequiredData.length; i++) {
                                                                                                                                               data.resFormData[memRequiredData[i]] = resData[memRequiredData[i]];
                                                                                                                                           }
                                                                                                                                       } else {
                                                                                                                                           data.resFormData = resData;
                                                                                                                                       }

                                                                                                                                       var itnRequiredData = ['age', 'arrivalInfo', 'discounts', 'pickupDate', 'dropoffDate'];
                                                                                                                                       for (i = 0; i < itnRequiredData.length; i++) {
                                                                                                                                           itnData[itnRequiredData[i]] = itineraryData[itnRequiredData[i]];
                                                                                                                                       }
                                                                                                                                       this.itnInfo = localStorage.getItem(key);
                                                                                                                                       if (!this.itnInfo) {
                                                                                                                                           this.itnInfo = {};
                                                                                                                                           this.itnInfo.prevResData = [];
                                                                                                                                       } else {
                                                                                                                                           this.itnInfo = JSON.parse(this.itnInfo);
                                                                                                                                       }
                                                                                                                                       data.itnData = itnData;
                                                                                                                                       if (this.checkResExistsInPrevRental(data.resFormData)) {
                                                                                                                                           if (this.itnInfo.prevResData.length >= 5) {
                                                                                                                                               this.itnInfo.prevResData.splice(0, 1);
                                                                                                                                           }
                                                                                                                                           this.itnInfo.prevResData.push(data);
                                                                                                                                           try {
                                                                                                                                               localStorage.setItem(key, JSON.stringify(this.itnInfo));
                                                                                                                                           } catch (e) {}
                                                                                                                                       }
                                                                                                                                   }

                                                                                                                               },
                                                                                                                               loadLocalStorageResInfo: function(previousSearch) {
                                                                                                                                   var data = this.formatRecentSearchData(previousSearch, true);
                                                                                                                                   this.formData.set(data, {
                                                                                                                                       silent: true
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               loadPreviousSearch: function(data) {
                                                                                                                                   this.prepareModel();
                                                                                                                                   var previousSearch = this.formatRecentSearchData(data, false);
                                                                                                                                   this.formData.set(previousSearch, {
                                                                                                                                       silent: true
                                                                                                                                   });
                                                                                                                                   this.metaData.set({
                                                                                                                                       isOldResInfo: true
                                                                                                                                   });
                                                                                                                                   this.render();
                                                                                                                               },
                                                                                                                               formatRecentSearchData: function(data, selFromOverlay) {
                                                                                                                                   if (data) {
                                                                                                                                       var latestFormData = this.formData.attributes;
                                                                                                                                       if (selFromOverlay) {
                                                                                                                                           if (data.pickupLocation != latestFormData.pickupLocation && latestFormData.pickupLocation) {
                                                                                                                                               data.pickupLocation = latestFormData.pickupLocation;
                                                                                                                                               data.pickupHiddenEOAG = latestFormData.pickupHiddenEOAG;
                                                                                                                                           }
                                                                                                                                           if (data.dropoffLocation != latestFormData.dropoffLocation && latestFormData.dropoffLocation) {
                                                                                                                                               data.dropoffLocation = latestFormData.dropoffLocation;
                                                                                                                                               data.dropoffHiddenEOAG = latestFormData.dropoffHiddenEOAG;
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                       if (data.returnAtDifferentLocationCheckbox === '') {
                                                                                                                                           data.dropoffLocation = data.dropoffHiddenEOAG = '';
                                                                                                                                       }

                                                                                                                                       data.inpPickupCountryCode = latestFormData.inpPickupCountryCode;

                                                                                                                                       data.pickupDay = resUtils.formatDate(this.oldDateCheck(data.pickupDayStandard, false), this.formData.get('militaryClock'));
                                                                                                                                       data.dropoffDay = resUtils.formatDate(this.oldDateCheck(data.dropoffDayStandard, true), this.formData.get('militaryClock'));

                                                                                                                                       data.militaryClock = this.formData.get('militaryClock');

                                                                                                                                       if (!this.metaData.get('loggedIn')) {
                                                                                                                                           if (data.ageSelector && !this.metaData.get('ageDropdownOptions')) {
                                                                                                                                               data.ageSelector = '';
                                                                                                                                           }

                                                                                                                                           if (data.selectedCarType && this.metaData.get('nvpVehicleGroupSipps')) {
                                                                                                                                               this.metaData.set('selectedCarLabel', this.viewHelper.findCarTypeLabel(data.selectedCarType, this.metaData.get('nvpVehicleGroupSipps')));
                                                                                                                                           }

                                                                                                                                           if (data.cdpField === '') {
                                                                                                                                               data.checkDiscount = '';
                                                                                                                                               this.metaData.set({
                                                                                                                                                   'discountExists': false
                                                                                                                                               }, {
                                                                                                                                                   silent: true
                                                                                                                                               });
                                                                                                                                           }

                                                                                                                                           if (data.checkDiscount === 'on') {
                                                                                                                                               this.metaData.set({
                                                                                                                                                   'discountExists': true
                                                                                                                                               }, {
                                                                                                                                                   silent: true
                                                                                                                                               });
                                                                                                                                               data.memberSelectedCdp = '';
                                                                                                                                               data.memberOtherCdpField = '';

                                                                                                                                               if (data.cdpField !== '') {
                                                                                                                                                   data.corporateRate == '';
                                                                                                                                                   data.officialTravel == '';

                                                                                                                                                   this.metaData.set({
                                                                                                                                                       'isShowCDPOptions': true
                                                                                                                                                   }, {
                                                                                                                                                       silent: true
                                                                                                                                                   });
                                                                                                                                               } else {
                                                                                                                                                   this.metaData.set({
                                                                                                                                                       'isShowCDPOptions': false
                                                                                                                                                   }, {
                                                                                                                                                       silent: true
                                                                                                                                                   });
                                                                                                                                               }
                                                                                                                                           }

                                                                                                                                           data.originalRqCheckBox = '';
                                                                                                                                       }
                                                                                                                                   }

                                                                                                                                   return data;
                                                                                                                               },

                                                                                                                               checkResExistsInPrevRental: function(data) {
                                                                                                                                   if (this.itnInfo) {
                                                                                                                                       var isResExistsInPrevRental = false,
                                                                                                                                           prevRentalInfo = this.itnInfo.prevResData;
                                                                                                                                       this.objectKeysPolyfill();
                                                                                                                                       if (prevRentalInfo) {
                                                                                                                                           for (var i = 0; i < prevRentalInfo.length; i++) {
                                                                                                                                               if (JSON.stringify(prevRentalInfo[i].resFormData, Object.keys(prevRentalInfo[i].resFormData).sort()) === JSON.stringify(data, Object.keys(data).sort())) {
                                                                                                                                                   isResExistsInPrevRental = true;
                                                                                                                                                   break;
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       }

                                                                                                                                       if (isResExistsInPrevRental) {
                                                                                                                                           return false;
                                                                                                                                       } else {
                                                                                                                                           return true;
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               objectKeysPolyfill: function() {
                                                                                                                                   if (!Object.keys) {
                                                                                                                                       Object.keys = function(obj) {
                                                                                                                                           var keys = [];
                                                                                                                                           for (var i in obj) {
                                                                                                                                               if (obj.hasOwnProperty(i)) {
                                                                                                                                                   keys.push(i);
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                           return keys;
                                                                                                                                       };
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               oldDateCheck: function(date, dropoff) { //rabbondanza

                                                                                                                                   var today = new Date();
                                                                                                                                   var resDate = new Date(date);

                                                                                                                                   //TODO: this is just a quick fix to get rid of the NaN - better solution being developed
                                                                                                                                   if (isNaN(resDate.getMonth()) || resDate < today) {
                                                                                                                                       resDate = dropoff ? new Date(today.getTime() + 86400000) : today;
                                                                                                                                   }

                                                                                                                                   return resDate;

                                                                                                                               },
                                                                                                                               subscribe: function() {
                                                                                                                                   var self = this;
                                                                                                                                   $.subscribe(resConstants.RECENT_SEARCH_DATA, function(_, data) {
                                                                                                                                       self.loadPreviousSearch(data);
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               setDiscounts: function() {
                                                                                                                                   var self = this;
                                                                                                                                   try {
                                                                                                                                       if (localStorage.getItem('htzDVal')) {
                                                                                                                                           this.formData.set({
                                                                                                                                               maskedDiscountCode: localStorage.getItem('htzDVal')
                                                                                                                                           }, {
                                                                                                                                               silent: true
                                                                                                                                           });
                                                                                                                                       }
                                                                                                                                   } catch (e) {}

                                                                                                                                   if (this.metaData.get('isRedeemPoints')) {
                                                                                                                                       this.formData.set({
                                                                                                                                           cvNumber: '',
                                                                                                                                           pcNumber: '',
                                                                                                                                           typeInRateQuote: '',
                                                                                                                                           itNumber: ''
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                                   if (this.formData.get('checkDiscount') != "on") {
                                                                                                                                       this.formData.set({
                                                                                                                                           memberSelectedCdp: '',
                                                                                                                                           memberOtherCdpField: '',
                                                                                                                                           cdpRadioButton: ''
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   }

                                                                                                                                   if ((self.metaData.get('loggedIn') && (self.formData.get('memberSelectedCdp') !== '' || self.formData.get('memberOtherCdpField') !== '')) ||
                                                                                                                                       (!self.metaData.get('loggedIn') && (self.formData.get('cdpField') !== '')) ||
                                                                                                                                       (self.formData.get('pcNumber') !== '' || self.formData.get('cvNumber') || self.formData.get('itNumber') || self.formData.get('typeInRateQuote'))) {

                                                                                                                                       this.metaData.set({
                                                                                                                                           discountExists: 1
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   } else {
                                                                                                                                       this.metaData.set({
                                                                                                                                           discountExists: 0
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               resetErrors: function() {
                                                                                                                                   Utils.clearErrorMessage(this.referrer.find('#error-list'));
                                                                                                                               },
                                                                                                                               trackRetryErrorInfo: function(res, retryCount) {
                                                                                                                                   try {
                                                                                                                                       if (retryCount >= 0) {
                                                                                                                                           var errors = res.responseText;
                                                                                                                                           if (errors.indexOf('RE100') > 0) {
                                                                                                                                               resUtils.updateReservationInfo({
                                                                                                                                                   pickupLocationCode: this.formData.get('pickupHiddenEOAG'),
                                                                                                                                                   pickupDate: this.formData.get('pickupDay'),
                                                                                                                                                   pickupTime: this.formData.get('pickupTime'),
                                                                                                                                                   returnDate: this.formData.get('dropoffDay'),
                                                                                                                                                   returnTime: this.formData.get('dropoffTime')
                                                                                                                                               });

                                                                                                                                               resUtils.trackWarning({
                                                                                                                                                   warning: 'RE100-Itn-' + retryCount
                                                                                                                                               });
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                   } catch (e) {}
                                                                                                                               },
                                                                                                                               handleRateFailure: function(model, res, target, retryCount) {
                                                                                                                                   var self = this;
                                                                                                                                   self.bindDataEvents();
                                                                                                                                   self.trackLocationInfo();

                                                                                                                                   if (self.metaData.get('bookAsMember')) {
                                                                                                                                       //During book as member, if the user was successful in logging but their res validation fails,
                                                                                                                                       //need to save error into session storage and refresh the page to show logged in status
                                                                                                                                       var errors;
                                                                                                                                       try {
                                                                                                                                           errors = JSON.parse(res.responseText).message;
                                                                                                                                           Utils.trackError(errors);
                                                                                                                                           SessionHelper.setItem(resConstants.ERRORS, JSON.stringify(errors));
                                                                                                                                       } catch (e) {}

                                                                                                                                       if (Utils.isUseStoragePolyfill()) {
                                                                                                                                           Utils.storeItemIE('ieErrors', errors);
                                                                                                                                       }

                                                                                                                                       self.metaData.set({
                                                                                                                                           bookAsMember: 0
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                       window.location.reload();
                                                                                                                                   } else {

                                                                                                                                       self.formData.trigger('error', model, res, target);
                                                                                                                                   }
                                                                                                                                   if (self.isResFlowEdit) {
                                                                                                                                       //updating itinerary data in session with the latest itinerary data for vehicle/extras unavailable scenario
                                                                                                                                       SessionHelper.setItem(resConstants.ITINERARY_DATA, JSON.stringify(self.model.toJSON()));
                                                                                                                                       var modelRef = new Backbone.Model(res.responseJSON);
                                                                                                                                       resUtils.goToPageFromResData(modelRef);
                                                                                                                                   }
                                                                                                                                   self.trackRetryErrorInfo(res, retryCount);
                                                                                                                               },
                                                                                                                               handleRateSuccess: function(metaData, formData, model, res) {
                                                                                                                                   var self = this;
                                                                                                                                   self.metaData = metaData;
                                                                                                                                   self.formData = formData;


                                                                                                                                   self.model = model;

                                                                                                                                   if (!self.metaData.get('discountExists')) {
                                                                                                                                       self.formData.set({
                                                                                                                                           cdpField: "",
                                                                                                                                           checkDiscount: "",
                                                                                                                                           corporateRate: "",
                                                                                                                                           cvNumber: "",
                                                                                                                                           pcNumber: "",
                                                                                                                                           typeInRateQuote: "",
                                                                                                                                           itNumber: "",
                                                                                                                                           officialTravel: ""
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       });
                                                                                                                                   }

                                                                                                                                   self.model.set({
                                                                                                                                       'formData': self.formData,
                                                                                                                                       'metaData': self.metaData
                                                                                                                                   });

                                                                                                                                   if (res && res.resultInfo) {
                                                                                                                                       SessionHelper.setItem(resConstants.ITINERARY_DATA, JSON.stringify(self.model.toJSON()));

                                                                                                                                       if (res.resultInfo.result === 'fts') {
                                                                                                                                           self.handleFTSRedirect(res.resultInfo.url);
                                                                                                                                       } else if (res.resultInfo.result === 'geo') {
                                                                                                                                           self.handleMemberGeographyPref(res.resultInfo.url);
                                                                                                                                       } else {
                                                                                                                                           self.formData.set({
                                                                                                                                               'dropoffDay': res.data.itinerary.dropoffDateValue,
                                                                                                                                               'dropoffTime': res.data.itinerary.dropoffTimeValue
                                                                                                                                           });
                                                                                                                                           self.model.set('formData', self.formData);
                                                                                                                                           if ((res && res.data && res.data.meta && res.data.meta.target === resConstants.VEHICLES) || !self.isResFlowEdit) {
                                                                                                                                               SessionHelper.setItem(resConstants.VEHICLES_DATA, JSON.stringify(res.data.model));
                                                                                                                                               if (res.message) {
                                                                                                                                                   try {
                                                                                                                                                       SessionHelper.setItem(resConstants.VEHICLES_ERROR_DATA, JSON.stringify(res.message));
                                                                                                                                                   } catch (e) {}
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                           SessionHelper.setItem(resConstants.ITINERARY_INFO_DATA, JSON.stringify(res.data.itinerary));
                                                                                                                                           if (res.data.rateDetails) {
                                                                                                                                               SessionHelper.setItem(resConstants.RATE_DETAILS_DATA, JSON.stringify(res.data.rateDetails));
                                                                                                                                           }
                                                                                                                                           self.navigateToVehiclePage(res);

                                                                                                                                           //dtc4102//PRC91530//Google Data Layer
                                                                                                                                           //Impressions - Product Data Car
                                                                                                                                           if (!htz.config.isApp) {
                                                                                                                                               var options = {};
                                                                                                                                               options.scenario = 'impressions-car';
                                                                                                                                               options.payload = res.data.model.vehicles;
                                                                                                                                               gtmTracker.track(options);

                                                                                                                                               //Checkout Funnel//	Step 1 - Choose your vehicle
                                                                                                                                               options.scenario = 'begin_checkout';
                                                                                                                                               gtmTracker.track(options);
                                                                                                                                           }

                                                                                                                                       }
                                                                                                                                   } else {
                                                                                                                                       if (WebTracking) {
                                                                                                                                           WebTracking.setError("debug-itinerary-submit-failure" + "-" + resUtils.getResponseText(res) + "-" + Utils.browserDeviceType(), "itinerary");
                                                                                                                                       }
                                                                                                                                       if (appConfig.config.isApp) {
                                                                                                                                           htz.utils.Spinner.stop();
                                                                                                                                       } else {
                                                                                                                                           utilsProxy.getSpinner().stop();
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               navigateToVehiclePage: function(res) {
                                                                                                                                   if (this.isResFlowEdit) {
                                                                                                                                       var dataKeys = [resConstants.VEHICLES_DATA, resConstants.EXTRAS_DATA, resConstants.ITINERARY_INFO_DATA, resConstants.RATE_DETAILS_DATA];
                                                                                                                                       resUtils.clearSessionStorage(dataKeys);
                                                                                                                                       var modelRef = new Backbone.Model(res);
                                                                                                                                       resUtils.goToPageFromResData(modelRef);
                                                                                                                                   } else if (!this.isResWidget) {
                                                                                                                                       require(['reservation/config'], function(resConfig) {
                                                                                                                                           var toPage = 'vehicles';
                                                                                                                                           $('body').css('background-color', '#ededed');
                                                                                                                                           if (process.isModify()) {
                                                                                                                                               toPage = 'modify/' + toPage;
                                                                                                                                           }
                                                                                                                                           resConfig.getRotar().rotate(toPage);
                                                                                                                                       });
                                                                                                                                   } else {
                                                                                                                                       window.location.href = appConfig.config.rootContext + "/reservation/vehicles";
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               handleFTSRedirect: function(url) {
                                                                                                                                   window.location.href = url;
                                                                                                                               },
                                                                                                                               handleMemberGeographyPref: function(url) {
                                                                                                                                   var self = this;

                                                                                                                                   if (self.geoPrefLocationFound()) {
                                                                                                                                       viewHelper.geoPreferencesSubmitWithItnInfo(self, getLightBox());
                                                                                                                                   } else {
                                                                                                                                       require(['reservation/itinerary/core/view/itinerary-geo-preferences-overlay-view'], function(itnGeoPrefOverlayView) {
                                                                                                                                           var isNew = self.isResFlowEdit ? true : false;
                                                                                                                                           getLightBox(isNew).overlay({
                                                                                                                                               title: self.content.ememberGlobals.geoPreferencesForResModalTitle
                                                                                                                                           }, new itnGeoPrefOverlayView({
                                                                                                                                               content: self.content,
                                                                                                                                               template: "#geo-preferences-overlay-tpl",
                                                                                                                                               referrer: self,
                                                                                                                                               lBoxRef: getLightBox(),
                                                                                                                                               viewHelper: viewHelper
                                                                                                                                           }).render().el);
                                                                                                                                           utilsProxy.getSpinner().stop();
                                                                                                                                       });
                                                                                                                                   }

                                                                                                                               },
                                                                                                                               geoPrefLocationFound: function() {
                                                                                                                                   if (this.metaData.get('loggedIn')) {
                                                                                                                                       return resUtils.checkIfGeoPrefLocation(this.formData.get('pickupHiddenEOAG') || this.formData.get('pickupLocation'));
                                                                                                                                   } else {
                                                                                                                                       return false;
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               keepTrackOfGeoPrefLocation: function() {
                                                                                                                                   resUtils.keepTrackOfGeoPrefLocation(this.formData.get('pickupHiddenEOAG') || this.formData.get('pickupLocation'));
                                                                                                                               },
                                                                                                                               removeGeoPrefIndicator: function() {
                                                                                                                                   //IRAC-2852 - Must reset the fromProfileForGoldService indicator to blank on resubmit or else any update to discounts are not set in session.
                                                                                                                                   if (this.formData.get('fromProfileForGoldService') == 'Y') {
                                                                                                                                       this.formData.set({
                                                                                                                                           'fromProfileForGoldService': ''
                                                                                                                                       }, {
                                                                                                                                           silent: true
                                                                                                                                       })
                                                                                                                                   }
                                                                                                                               },

                                                                                                                               /**
                                                                                                                               	@description If there is errorData pass to the handleLocationErrors method
                                                                                                                               	@function
                                                                                                                               	@param {object} errorData messages
                                                                                                                               	@param {boolean} nested
                                                                                                                                */
                                                                                                                               handleErrorData: function(errors, nested) {
                                                                                                                                   if (errors) {
                                                                                                                                       var errorData = this.viewHelper.parseErrorObject(errors, nested);
                                                                                                                                       this.handleLocationErrors(errorData);
                                                                                                                                       SessionHelper.removeItem(resConstants.ERRORS);
                                                                                                                                   } else return;
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Determine whether to pass to handle as proximity search or hod functionality
                                                                                                                               	@function
                                                                                                                               	@param {object} errorData messages
                                                                                                                               	@param {boolean} nested
                                                                                                                                */
                                                                                                                               handleLocationErrors: function(errorData) {
                                                                                                                                   if (errorData) {
                                                                                                                                       Utils.clearErrorMessage();
                                                                                                                                       for (var i = 0; i < errorData.length; i++) {
                                                                                                                                           if (errorData[i].informationForRedirection) {
                                                                                                                                               switch (errorData[i].informationForRedirection.functionality) {
                                                                                                                                                   case "proximitySearch":
                                                                                                                                                       this.showNearbyLocations(errorData[i]);
                                                                                                                                                       break;
                                                                                                                                                   case "hod":
                                                                                                                                                       this.showHODLocations(errorData[i]);
                                                                                                                                                       break;
                                                                                                                                                   case "hod24X7":
                                                                                                                                                       this.handleHOD24X7(errorData[i]);
                                                                                                                                                       break;
                                                                                                                                                   case "dtg":
                                                                                                                                                       if (this.isDtgProximity(errorData)) {
                                                                                                                                                           delete errorData[i].message;
                                                                                                                                                       }

                                                                                                                                                       this.showDTGLocations(errorData[i]);
                                                                                                                                                       break;
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Display error with link to nearby locations
                                                                                                                               	@function
                                                                                                                               	@param {object} errorData messages
                                                                                                                                */
                                                                                                                               showNearbyLocations: function(errorData) {
                                                                                                                                   this.createErrorListContainer();

                                                                                                                                   var nearBy = this.referrer.find('#error-list ul').append(_.template($('#nearby-locations-tpl').html()));

                                                                                                                                   nearBy.find('li:last .nearby-message').append(errorData.message.replace("[" + errorData.errorCode + "]", ""));

                                                                                                                                   var proxSearch = nearBy.find('li:last .proximity-search'),
                                                                                                                                       linkInfo = errorData.informationForRedirection.linkInformation;

                                                                                                                                   for (var i = 0; i < linkInfo.length; i++) {
                                                                                                                                       proxSearch.attr('href', linkInfo[i].linkUrl);
                                                                                                                                       proxSearch.append(linkInfo[i].linkContent);
                                                                                                                                   }
                                                                                                                                   nearBy.find('li:last .nearby-message-code').append("[" + errorData.errorCode + "]");
                                                                                                                                   this.referrer.find('#error-list').show();
                                                                                                                               },

                                                                                                                               /**
                                                                                                                               	@description Display error with HOD content and link
                                                                                                                               	@function
                                                                                                                               	@param {object} errorData messages
                                                                                                                                */
                                                                                                                               showHODLocations: function(errorData) {
                                                                                                                                   var self = this;

                                                                                                                                   self.createErrorListContainer();
                                                                                                                                   self.referrer.find('#error-list ul').append("<li>" + errorData.message + "</li>");

                                                                                                                                   if (errorData.informationForRedirection && errorData.informationForRedirection.linkInformation) {
                                                                                                                                       require(['reservation/itinerary/core/view/hod-link-view'], function(hodLinkView) {
                                                                                                                                           new hodLinkView({
                                                                                                                                               collection: errorData.informationForRedirection.linkInformation
                                                                                                                                           });

                                                                                                                                           self.referrer.find('#error-list').show();
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               isDtgProximity: function(errorData) {
                                                                                                                                   return (errorData.length > 1 && errorData[0].informationForRedirection.functionality == 'dtg' &&
                                                                                                                                       errorData[1].informationForRedirection.functionality == 'proximitySearch');
                                                                                                                               },
                                                                                                                               showDTGLocations: function(errorData) {
                                                                                                                                   var self = this;

                                                                                                                                   if (errorData.message) {
                                                                                                                                       this.createErrorListContainer();
                                                                                                                                       this.referrer.find('#error-list ul').append("<li>" + errorData.message + "</li>");
                                                                                                                                       this.referrer.find('#error-list').show();
                                                                                                                                   }

                                                                                                                                   if (errorData.informationForRedirection && errorData.informationForRedirection.linkInformation) {
                                                                                                                                       require(['reservation/dollar-thrifty-redirect/core/presenter/dtg-presenter'], function(presenter) {
                                                                                                                                           presenter.showDtgRedirect(self.content.reservationGlobals.dtgRedirection.dtgHeader, errorData.informationForRedirection.linkInformation);
                                                                                                                                       });
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Create the error list container
                                                                                                                               	@function
                                                                                                                                */
                                                                                                                               createErrorListContainer: function() {
                                                                                                                                   if (!this.referrer.find('#error-list li').length) {
                                                                                                                                       this.referrer.find('#error-list').append("<ul></ul>");
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Determine how to handle the HOD 24x7 scenarios based calling the HOD vehicle availability web service
                                                                                                                               	@function
                                                                                                                               	@param {object} errorData messages
                                                                                                                                */
                                                                                                                               handleHOD24X7: function(errorData) {
                                                                                                                                   utilsProxy.getSpinner().spin();

                                                                                                                                   var self = this,
                                                                                                                                       url, hodSessionData, linkType, linkInfo = errorData.informationForRedirection.linkInformation,
                                                                                                                                       dataKeys = [resConstants.ITINERARY_DATA, resConstants.ITINERARY_INFO_DATA, resConstants.RATE_DETAILS_DATA, resConstants.VEHICLES_DATA];
                                                                                                                                   resUtils.clearSessionStorage(dataKeys);

                                                                                                                                   if (linkInfo.length > 0) {
                                                                                                                                       if (!!linkInfo[0].hod24X7VehicleAvailabilityServiceLink) {
                                                                                                                                           linkType = 'vehicleAvailability';
                                                                                                                                           url = linkInfo[0].hod24X7VehicleAvailabilityServiceLink;
                                                                                                                                       } else if (!!linkInfo[0].proximitySearchServiceLink) {
                                                                                                                                           linkType = 'proximitySearch';
                                                                                                                                           url = linkInfo[0].proximitySearchServiceLink;
                                                                                                                                       }
                                                                                                                                   }

                                                                                                                                   if (url) { // If a web service url exists, call the web service
                                                                                                                                       self.callHodWebService(url, linkType, errorData);
                                                                                                                                   } else { // else, go to the vehicle page
                                                                                                                                       SessionHelper.setItem(resConstants.HOD_VEHICLES, '');
                                                                                                                                       utilsProxy.getSpinner().stop();
                                                                                                                                       self.navigateToVehiclePage();
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Call the HOD web service and handle based on linkType
                                                                                                                               	@function
                                                                                                                               	@param {String} url Webservice URL
                                                                                                                               	@param {object} hodSessionData object
                                                                                                                                */
                                                                                                                               callHodWebService: function(url, linkType, errorData) {
                                                                                                                                   var self = this,
                                                                                                                                       hodSessionData;

                                                                                                                                   $.ajax({
                                                                                                                                       url: url,
                                                                                                                                       dataType: 'jsonp',
                                                                                                                                       jsonpCallback: 'callback',
                                                                                                                                       contentType: 'application/json',
                                                                                                                                       timeout: 10000,
                                                                                                                                       success: function(res) {
                                                                                                                                           if (linkType === 'vehicleAvailability' && res === 'true') { // If the HOD vehicle availability web service returns true, go to the vehicle page
                                                                                                                                               SessionHelper.setItem(resConstants.HOD_VEHICLES, 'true');
                                                                                                                                               self.navigateToVehiclePage();
                                                                                                                                           } else if (linkType === 'proximitySearch' && res.locationsAvailable) { // Else if the HOD proximity search web service returns true, go to the vehicle page to show map
                                                                                                                                               self.navigateToVehiclePage();
                                                                                                                                           } else {
                                                                                                                                               if (linkType === 'vehicleAvailability') {
                                                                                                                                                   SessionHelper.setItem(resConstants.HOD_VEHICLES, 'false');
                                                                                                                                               }
                                                                                                                                               self.showNearbyLocations(errorData); // Else load the nearby locations error on the homepage
                                                                                                                                           }
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           SessionHelper.setItem(resConstants.HOD_VEHICLES, '');
                                                                                                                                           self.showNearbyLocations(errorData);
                                                                                                                                       },
                                                                                                                                       complete: function() {
                                                                                                                                           utilsProxy.getSpinner().stop();
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Set HOD 24x7 variables in session storage
                                                                                                                               	@function
                                                                                                                               	@param {object} hodLocationInfo object
                                                                                                                                */
                                                                                                                               setHodSessionStorage: function(hodLocationInfo) {
                                                                                                                                   Utils.storeItemIE('ieHodLocationInfo', hodLocationInfo, {
                                                                                                                                       async: false,
                                                                                                                                       timeout: 3000
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               /**
                                                                                                                               	@description Track pickup and dropoff location eoag
                                                                                                                               	@function
                                                                                                                               */
                                                                                                                               trackLocationInfo: function() {
                                                                                                                                   var pickupEOAG = this.formData.get('pickupHiddenEOAG');
                                                                                                                                   var dropoffEOAG = this.formData.get('dropoffHiddenEOAG');
                                                                                                                                   if (dropoffEOAG === '') {
                                                                                                                                       dropoffEOAG = pickupEOAG;
                                                                                                                                   }

                                                                                                                                   var data = {
                                                                                                                                       linkTrackVars: 'eVar3,eVar4',
                                                                                                                                       eVar3: pickupEOAG,
                                                                                                                                       eVar4: dropoffEOAG
                                                                                                                                   };

                                                                                                                                   if (typeof WebTracking !== 'undefined') {
                                                                                                                                       WebTracking.sendTrackingData('Pickup and Dropoff Locations', data, true);
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               displayCDPNotification: function() {
                                                                                                                                   var lBox = getLightBox();
                                                                                                                                   if (lBox.inUse && !this.isResFlowEdit) {
                                                                                                                                       lBox.closeOverlay();
                                                                                                                                   }

                                                                                                                                   var self = this;
                                                                                                                                   var close = function() {
                                                                                                                                       self.viewHelper.trackCdpOptions('close');
                                                                                                                                   };

                                                                                                                                   require(['reservation/itinerary/core/view/itinerary-cdp-view'], function(cdpView) {
                                                                                                                                       var isNew = self.isResFlowEdit ? true : false;
                                                                                                                                       getLightBox(isNew).overlay({
                                                                                                                                               title: self.content.homePage.homePageContent.cdpOverlayTitle,
                                                                                                                                               dismiss: false,
                                                                                                                                               close: close
                                                                                                                                           },
                                                                                                                                           new cdpView({
                                                                                                                                               model: self.model,
                                                                                                                                               metaData: self.metaData,
                                                                                                                                               formData: self.formData,
                                                                                                                                               content: self.content,
                                                                                                                                               referrer: self,
                                                                                                                                               lBoxRef: getLightBox()
                                                                                                                                           }).render().el
                                                                                                                                       );
                                                                                                                                   });
                                                                                                                               },
                                                                                                                               doCleanup: function() {
                                                                                                                                   if (this.redeemViewRef && this.redeemViewRef.doCleanup) {
                                                                                                                                       this.redeemViewRef.doCleanup();
                                                                                                                                   }
                                                                                                                                   this.template = this.content = this.metaData = this.formData = this.redeemViewRef = this.viewHelper = lightbox = null;
                                                                                                                               }
                                                                                                                           });
                                                                                                                           return itineraryFormView;
                                                                                                                       });

                                                                                                                   define("reservation/itinerary/core/view/itinerary-ta-country-view", ["jquery", "underscore", "backbone"], function(c, d, e) {
                                                                                                                       return e.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup select": "eventHandler"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData");
                                                                                                                               this.resizeElements = this.options.resizeElements ? this.options.resizeElements : !1
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") &&
                                                                                                                                   (b = a.is(":checked") ? b : "");
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(d.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               !0 == this.resizeElements && this.reseizeElementsforGTM();
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           reseizeElementsforGTM: function() {
                                                                                                                               1050 <= c(window).width() && this.$el.closest("#new-itineraryRow").find("#new-locationPicker-container").css("width", "49%")
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData =
                                                                                                                                   this.formData = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-location-view", "jquery underscore backbone config/app-config utils/utils-proxy reservation/process-config/core/reservation-constants reservation/itinerary/core/view/itinerary-age-view reservation/itinerary/core/view/helper/view-helper".split(" "), function(d, i, n, f, o, g, k, l) {
                                                                                                                       var j = null;
                                                                                                                       return n.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup .ww-input": "triggerWordwheel",
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler",
                                                                                                                               "change select": "eventHandler",
                                                                                                                               "click #one-way": "showOneWay",
                                                                                                                               "click .find-location": "findLocations",
                                                                                                                               "click #one-way-info": "displayOneWayOverlay",
                                                                                                                               "click .icons-location": "setGeoLocation",
                                                                                                                               "click #previous-rentals": "previousRentals",
                                                                                                                               "click #previous-search": "previousSearch",
                                                                                                                               "keydown #pickup-location": "setDandCChangedValue",
                                                                                                                               "change #pickup-location": "setDandCChangedValue",
                                                                                                                               "keydown #dropoff-location": "setDandCChangedValue",
                                                                                                                               "change #dropoff-location": "setDandCChangedValue",
                                                                                                                               "click .dnc-button": "showDncOverlay",
                                                                                                                               "click .dnc-link": "showDandCLocationLink",
                                                                                                                               "change #pickup-location": "trackReservationStart",
                                                                                                                               "change #pickup-location": "handleAgeDropdownOnEOAGChange",
                                                                                                                               "change #pickup-location": "handleAffiliateCDPVerificationOAG",
                                                                                                                               "change #dropoff-location": "handleAffiliateCDPVerificationOAG"
                                                                                                                           },
                                                                                                                           handleAffiliateCDPVerification: function() {
                                                                                                                               this.metaData.get("loggedIn") ? "" != this.formData.get("memberOtherCdpField") ? this.$el.prevObject.find("#member-other-cdp").trigger("change") : this.$el.prevObject.find("#member-selected-cdp").trigger("change") : "" != this.formData.get("cdpField") && this.$el.prevObject.find("#cdp-textfield").trigger("change")
                                                                                                                           },
                                                                                                                           handleAffiliateCDPVerificationOAG: function(a) {
                                                                                                                               a = d(a.target);
                                                                                                                               "pickupLocation" === a.attr("name") ? this.formData.set({
                                                                                                                                   pickupHiddenEOAG: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }) : "dropoffLocation" === a.attr("name") && this.formData.set({
                                                                                                                                   dropoffHiddenEOAG: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.handleAffiliateCDPVerification()
                                                                                                                           },
                                                                                                                           triggerWordwheel: function(a) {
                                                                                                                               "9" != a.keyCode && Wordwheel.trigWW(a)
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               var a = this;
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.viewHelper = this.options.viewHelper;
                                                                                                                               this.isResFlowEdit =
                                                                                                                                   this.options.isResFlowEdit;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData");
                                                                                                                               this.subscribe();
                                                                                                                               Wordwheel.input = null;
                                                                                                                               Wordwheel.selectFunc = function(b) {
                                                                                                                                   a.setLocation(b);
                                                                                                                                   a.saveLocationInSession(b);
                                                                                                                                   !1 === htz.config.isApp && "pickup-location" === b.get("locType") && a.handleAgeDropdownOnEOAGChange(!0)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           setPickupLocation: function(a) {
                                                                                                                               this.formData.set(a, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.$el.find("#pickup-location").val(a.pickupLocation)
                                                                                                                           },
                                                                                                                           setDeliveryPickupLocation: function(a) {
                                                                                                                               this.formData.set(a.formData, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.metaData.set(a.metaData, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.setPickupLocationField(a.formData.pickupLocation);
                                                                                                                               this.$el.find("#delivery-infolink").show()
                                                                                                                           },
                                                                                                                           setCollectionDropoffLocation: function(a) {
                                                                                                                               this.formData.set(a.formData, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.metaData.set(a.metaData, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.setDropoffLocationField(a.formData.dropoffLocation);
                                                                                                                               this.$el.find("#collection-infolink").show()
                                                                                                                           },
                                                                                                                           setPickupLocationField: function(a) {
                                                                                                                               this.$el.find("#pickup-location").val(a)
                                                                                                                           },
                                                                                                                           setDropoffLocationField: function(a) {
                                                                                                                               this.$el.find("#dropoff-location").val(a)
                                                                                                                           },
                                                                                                                           subscribe: function() {
                                                                                                                               var a = this;
                                                                                                                               d.subscribe(g.LOCATION_PICKUP, function(b, c) {
                                                                                                                                   a.setPickupLocation(c)
                                                                                                                               });
                                                                                                                               a.deliveryAndCollectionSubscribe()
                                                                                                                           },
                                                                                                                           deliveryAndCollectionSubscribe: function() {
                                                                                                                               var a = this;
                                                                                                                               d.unsubscribe(g.LOCATION_DELIVERY_PICKUP);
                                                                                                                               d.unsubscribe(g.LOCATION_COLLECTION_DROPOFF);
                                                                                                                               d.subscribe(g.LOCATION_DELIVERY_PICKUP, function(b, c) {
                                                                                                                                   a.setDeliveryPickupLocation(c)
                                                                                                                               });
                                                                                                                               d.subscribe(g.LOCATION_COLLECTION_DROPOFF, function(b, c) {
                                                                                                                                   a.setCollectionDropoffLocation(c)
                                                                                                                               })
                                                                                                                           },
                                                                                                                           resetLocations: function(a) {
                                                                                                                               "pickup-country" ===
                                                                                                                               a ? (this.pickupLocationList.resetting = !0, this.pickupLocationList.model.reset()) : "dropoff-country" === a && (this.dropoffLocationList.resetting = !0, this.dropoffLocationList.model.reset())
                                                                                                                           },
                                                                                                                           resetLocationValues: function(a, b) {
                                                                                                                               this.formData.set(a, b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           renderDropDownLocations: function() {
                                                                                                                               var a = this;
                                                                                                                               require(["reservation/common/location-list/core/presenter/location-presenter"], function(b) {
                                                                                                                                   a.pickupLocationList = null;
                                                                                                                                   a.dropoffLocationList = null;
                                                                                                                                   b.buildCountryLists([a.formData.get("pickupCountry"), a.formData.get("dropoffCountry")], ["#pickup-country", "#dropoff-country"], a);
                                                                                                                                   a.formData.get("pickupCountry") && (a.pickupLocationList = b.buildLocationsList(a.content, a.formData.get("pickupCountry"), a.formData.get("pickupHiddenEOAG"), "#pickup-location", a));
                                                                                                                                   a.formData.get("dropoffCountry") && (a.dropoffLocationList = b.buildLocationsList(a.content, a.formData.get("dropoffCountry"), a.formData.get("dropoffHiddenEOAG"), "#dropoff-location", a))
                                                                                                                               })
                                                                                                                           },
                                                                                                                           getLocationsForCountry: function(a, b) {
                                                                                                                               var c = this;
                                                                                                                               require(["reservation/common/location-list/core/presenter/location-presenter"],
                                                                                                                                   function(d) {
                                                                                                                                       "pickup-country" === b.attr("id") ? c.pickupLocationList = d.buildLocationsList(c.content, a, c.formData.get("pickupHiddenEOAG"), "#pickup-location", c) : c.dropoffLocationList = d.buildLocationsList(c.content, a, c.formData.get("dropoffHiddenEOAG"), "#dropoff-location", c)
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           refreshBanner: function(a, b, c) {
                                                                                                                               this.viewHelper.refreshBanner(a, b, c)
                                                                                                                           },
                                                                                                                           setGeoLocation: function(a) {
                                                                                                                               this.viewHelper.setGeoLocation(d(a.target).attr("id"), ["#pickup-location", "#dropoff-location"], this.content)
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a =
                                                                                                                                   d(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ? b : "");
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           findLocations: function(a) {
                                                                                                                               var b, c, h, e, m = 0,
                                                                                                                                   g = 0;
                                                                                                                               c = d("#pickup-location").val();
                                                                                                                               h = d("#dropoff-location").val();
                                                                                                                               b = f.config.rootContext + "/location?search=";
                                                                                                                               "return-loc" === d(a.target).parent().attr("id") ? (b += h + "&triggerSearch=true&searchFrom=Homepage&locType=dOff", e = h) : (b += c + "&triggerSearch=true&searchFrom=Homepage&locType=pUp", e = c);
                                                                                                                               void 0 != typeof locList && "" != locList && i.each(locList.models,
                                                                                                                                   function(a) {
                                                                                                                                       a.get("searchTerm") === e && (30 == a.get("searchType") && (m = a.get("latitude"), g = a.get("longitude"), b += "&lat=" + m + "&lng=" + g), 3 == a.get("categoryCode") && (HStorage.setItem("cCodeHomepage", a.get("countryCode"), "", "s"), HStorage.setItem("cNameHomepage", a.get("countryName"), "", "s"), HStorage.setItem("sCodeHomepage", a.get("stateCode"), "", "s"), HStorage.setItem("sNameHomepage", a.get("stateName"), "", "s"), HStorage.setItem("cityHomepage", a.get("city"), "", "s"), b += "&locTab=2"))
                                                                                                                                   });
                                                                                                                               window.location.href = b;
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           displayOneWayOverlay: function() {
                                                                                                                               null == j && (j = o.getLightbox());
                                                                                                                               j.overlay({
                                                                                                                                   url: "one-way-overlay",
                                                                                                                                   title: this.content.homePage.homePageContent.oneWayOverlayTitle,
                                                                                                                                   width: 584,
                                                                                                                                   center: !0
                                                                                                                               }, i.template(d("#one-way-tpl").html(), {
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           showOneWay: function(a) {
                                                                                                                               var b = this.$el.find("#return-loc");
                                                                                                                               d(a.target).prop("checked") ? b.show() : b.hide();
                                                                                                                               this.viewHelper.setFooterPadding()
                                                                                                                           },
                                                                                                                           setValue: function(a, b, c) {
                                                                                                                               b[c] = a ? a : ""
                                                                                                                           },
                                                                                                                           setLocation: function(a) {
                                                                                                                               var b = "pickup-location" === a.get("locType") ? "inpPickup" :
                                                                                                                                   "inpDropoff",
                                                                                                                                   c = "",
                                                                                                                                   d = a.get("searchType") ? a.get("searchType").toString() : a.get("searchType"),
                                                                                                                                   c = !a.get("locationTitle") && !a.get("displayText") ? this.$el.find("#" + a.get("locType")).val() : a.get("locationTitle") || a.get("displayText"),
                                                                                                                                   e = {},
                                                                                                                                   f = "inpPickup" === b ? "pickup" : "dropoff";
                                                                                                                               this.setValue(c, e, f + "Location");
                                                                                                                               this.setValue(a.get("preferredOag"), e, f + "HiddenEOAG");
                                                                                                                               a.get("hasSpecialInstruction") ? this.setValue("Y", e, b + "HasSpecialInstruction") : this.setValue("N", e, b + "HasSpecialInstruction");
                                                                                                                               this.setValue(a.get("isServedBy"),
                                                                                                                                   e, b + "IsServedBy");
                                                                                                                               this.setValue(a.get("stateCode"), e, b + "StateCode");
                                                                                                                               this.setValue(a.get("countryCode"), e, b + "CountryCode");
                                                                                                                               this.setValue(d, e, b + "SearchType");
                                                                                                                               this.setValue(a.get("displayText") ? "Y" : "", e, b + "AutoFill");
                                                                                                                               this.setValue(a.get("optGoldAnytime"), e, b + "OptGoldAnytime");
                                                                                                                               33 == a.get("searchType") && this.setValue(a.get("zip"), e, f + "ZipCode");
                                                                                                                               this.formData.set(e, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.metaData.set(f + "LocPopup", !1, {
                                                                                                                                   silent: !1
                                                                                                                               });
                                                                                                                               a.get("preferredOag") && ("pickup-location" === a.get("locType") ? this.refreshBanner(!this.metaData.get("blockAds"),
                                                                                                                                   a.get("preferredOag")) : this.refreshBanner(!1, a.get("preferredOag")));
                                                                                                                               this.metaData.get("enableDNC") && ("inpPickup" === b && this.metaData.get("deliveryLocation") ? this.metaData.unset("deliveryLocation") : "inpDropoff" === b && this.metaData.get("collectionLocation") && this.metaData.unset("collectionLocation"))
                                                                                                                           },
                                                                                                                           handleAgeDropdownOnEOAGChange: i.debounce(function(a) {
                                                                                                                               (a = a && "boolean" == typeof a ? !0 : !1) || this.model.get("formData").set({
                                                                                                                                   pickupHiddenEOAG: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.metaData.get("loggedIn") || ("" === d("#pickup-location").val() ?
                                                                                                                                   (this.formData.set({
                                                                                                                                       ageSelector: ""
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }), d("#itn-age").hide()) : window.location.href.includes("/rentacar/reservation") ? (new k({
                                                                                                                                       el: this.$el.closest("form").find("#itn-age-info"),
                                                                                                                                       template: d("#itinerary-homepage-age-tpl").html(),
                                                                                                                                       model: this.model,
                                                                                                                                       content: this.content,
                                                                                                                                       fromWW: a
                                                                                                                                   })).render() : (new k({
                                                                                                                                       el: this.$el.closest("form").find("#itn-age-info"),
                                                                                                                                       template: d("#itinerary-age-tpl").html(),
                                                                                                                                       model: this.model,
                                                                                                                                       content: this.content,
                                                                                                                                       fromWW: a
                                                                                                                                   })).render())
                                                                                                                           }, 500),
                                                                                                                           getLocationHours: function(a) {
                                                                                                                               var b = this;
                                                                                                                               a && l.getRentalLocationDetails(a,
                                                                                                                                   function() {
                                                                                                                                       l.storeLocationOag();
                                                                                                                                       b.handleAffiliateCDPVerification()
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           saveLocationInSession: function(a, b) {
                                                                                                                               var b = a.get("locType"),
                                                                                                                                   c = this.formData.get("pickupHiddenEOAG"),
                                                                                                                                   h = this.formData.get("dropoffHiddenEOAG");
                                                                                                                               if ("" !== c && "pickup-location" === b) {
                                                                                                                                   var e = {
                                                                                                                                       pickupLocation: a.get("locationTitle") || a.get("displayText"),
                                                                                                                                       inpPickupStateCode: a.get("stateCode"),
                                                                                                                                       inpPickupCountryCode: a.get("countryCode"),
                                                                                                                                       inpPickupSearchType: a.get("searchType"),
                                                                                                                                       inpPickupAutoFill: this.formData.get("inpPickupAutoFill"),
                                                                                                                                       pickupOptGoldAnytime: a.get("optGoldAnytime"),
                                                                                                                                       pickupHiddenEOAG: c
                                                                                                                                   };
                                                                                                                                   d.ajax({
                                                                                                                                       url: f.config.rootContext + "/handlers/SaveSessionInformationHandler",
                                                                                                                                       data: e
                                                                                                                                   });
                                                                                                                                   this.getLocationHours(c)
                                                                                                                               }
                                                                                                                               "" === c && "pickup-location" === b && (e = {
                                                                                                                                   pickupLocation: this.formData.get("pickupLocation")
                                                                                                                               }, d.ajax({
                                                                                                                                   url: f.config.rootContext + "/handlers/SaveSessionInformationHandler",
                                                                                                                                   data: e
                                                                                                                               }));
                                                                                                                               "" !== h && "dropoff-location" === b && (e = {
                                                                                                                                   dropoffLocation: a.get("locationTitle") || a.get("displayText"),
                                                                                                                                   inpDropoffStateCode: a.get("stateCode"),
                                                                                                                                   inpDropoffCountryCode: a.get("countryCode"),
                                                                                                                                   inpDropoffSearchType: a.get("searchType"),
                                                                                                                                   inpDropoffAutofill: this.formData.get("inpDropoffAutoFill"),
                                                                                                                                   dropoffOptGoldAnytime: a.get("optGoldAnytime"),
                                                                                                                                   dropoffHiddenEOAG: h,
                                                                                                                                   returnAtDifferentLocationCheckbox: "on"
                                                                                                                               }, d.ajax({
                                                                                                                                   url: f.config.rootContext + "/handlers/SaveSessionInformationHandler",
                                                                                                                                   data: e
                                                                                                                               }), this.getLocationHours(h));
                                                                                                                               "" === h && "dropoff-location" === b && (e = {
                                                                                                                                   dropoffLocation: this.formData.get("dropoffLocation")
                                                                                                                               }, d.ajax({
                                                                                                                                   url: f.config.rootContext + "/handlers/SaveSessionInformationHandler",
                                                                                                                                   data: e
                                                                                                                               }))
                                                                                                                           },
                                                                                                                           previousSearch: function() {
                                                                                                                               var a = this;
                                                                                                                               a.trackPreviousRentals();
                                                                                                                               require(["reservation/previous-itinerary/core/presenter/previous-itinerary-presenter"], function(b) {
                                                                                                                                   b.show(a.content, a.metaData.get("loggedIn"), a.metaData.get("nvpVehicleGroupSipps"), a.viewHelper)
                                                                                                                               });
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           previousRentals: function() {
                                                                                                                               var a = this;
                                                                                                                               require(["reservation/previous-rentals/core/presenter/previous-rentals-presenter"], function(b) {
                                                                                                                                   b.show(a.content.homePage.dandCHomePageContent.previousRentals)
                                                                                                                               });
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           trackPreviousRentals: function() {
                                                                                                                               "undefined" !== typeof WebTracking && WebTracking.trackPage("previous-searches-link")
                                                                                                                           },
                                                                                                                           openWindow: function(a, b, c) {
                                                                                                                               return window.open(a, b, c)
                                                                                                                           },
                                                                                                                           showDncOverlay: function(a) {
                                                                                                                               var b, c, f = this.metaData.get("loginRequired");
                                                                                                                               "delivery" === d(a.currentTarget).attr("id") ? (b = this.metaData.get("urlDeliverVehicle"), c = "D") : "collection" === d(a.currentTarget).attr("id") && (b = this.metaData.get("urlCollectVehicle"), c = "C");
                                                                                                                               f ? document.location.href = b : this.displayDeliveryAndCollectionOptions(c)
                                                                                                                           },
                                                                                                                           displayDeliveryAndCollectionOptions: function(a) {
                                                                                                                               var b = this;
                                                                                                                               require(["reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter",
                                                                                                                                   "text!" + f.config.rootContext + "/assets/" + f.config.buildId + "/html/all/reservation/delivery-and-collection/delivery-and-collection.html"
                                                                                                                               ], function(c, f) {
                                                                                                                                   d("body").append(f);
                                                                                                                                   c.showCountriesView(a, d("#dandc-tpl"), b.content.DandCView.DandC.locationSearch)
                                                                                                                               })
                                                                                                                           },
                                                                                                                           showDandCLocationLink: function(a) {
                                                                                                                               var a = d(a.target).parent().attr("id"),
                                                                                                                                   b;
                                                                                                                               "delivery-infolink" === a ? b = this.formData.get("pickupHiddenEOAG") : "collection-infolink" === a && (b = this.formData.get("dropoffHiddenEOAG"));
                                                                                                                               require(["reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter"],
                                                                                                                                   function(a) {
                                                                                                                                       a.showLocationInfo(b)
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           setDandCChangedValue: function(a) {
                                                                                                                               if (this.metaData.get("enableDNC"))
                                                                                                                                   if (a = d(a.target), "pickup-location" === a.attr("id")) {
                                                                                                                                       var b = this.model.get("formData").previous("pickupLocation");
                                                                                                                                       b && a[0].value != b && this.formData.set({
                                                                                                                                           isDeliveryChanged: "Y"
                                                                                                                                       }, {
                                                                                                                                           silent: !0
                                                                                                                                       })
                                                                                                                                   } else "dropoff-location" === a.attr("id") && (b = this.model.get("formData").previous("dropoffLocation")) && a[0].value != b && this.formData.set({
                                                                                                                                       isCollectChanged: "Y"
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           setAutoFocus: function() {
                                                                                                                               "desktop" !== f.config.deviceGroup &&
                                                                                                                                   ("tablet" !== f.config.deviceGroup && "phone" !== f.config.deviceGroup) && this.$el.find("#pickup-location").trigger("focus")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(i.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content,
                                                                                                                                   isResFlowEdit: this.isResFlowEdit
                                                                                                                               }));
                                                                                                                               this.setAutoFocus();
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           trackReservationStart: function() {
                                                                                                                               "undefined" !== typeof WebTracking && WebTracking.trackData({
                                                                                                                                   events: "event23"
                                                                                                                               })
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.viewHelper.doCleanup && this.viewHelper.doCleanup();
                                                                                                                               this.pickupLocationList && (this.pickupLocationList = null);
                                                                                                                               this.dropoffLocationList && (this.dropoffLocationList = null);
                                                                                                                               this.template = this.content = this.metaData = this.formData = this.viewHelper = j = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-date-time-view", "jquery underscore backbone config/app-config utils/sessionhelper tools/calendar tools/timelist reservation/process-config/core/reservation-constants reservation/process-info/core/model/process-model utils/restmodel".split(" "), function(d, e, i, b, f, j, c, l, m, g) {
                                                                                                                       return i.View.extend({
                                                                                                                           events: {
                                                                                                                               "change select[name=localPickUpTime]": "handlePickUpTime",
                                                                                                                               "change select[name=localDropOffTime]": "handleDropOffTime"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.content =
                                                                                                                                   this.options.content;
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(e.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.renderDates();
                                                                                                                               this.renderTimes();
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           handlePickUpTime: function(a) {
                                                                                                                               this.formData.set({
                                                                                                                                   pickupTime: a.currentTarget.value
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           handleDropOffTime: function(a) {
                                                                                                                               this.formData.set({
                                                                                                                                   dropoffTime: a.currentTarget.value
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           renderDates: function() {
                                                                                                                               var a = "phone" === b.config.deviceGroup ? this.$el : null,
                                                                                                                                   k = f.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE) && "phone" !== b.config.deviceGroup ? parseInt(f.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE)) : 2;
                                                                                                                               new j({
                                                                                                                                   mode: k,
                                                                                                                                   euro: this.formData.get("militaryClock"),
                                                                                                                                   start: this.$el.find("#pickup-date"),
                                                                                                                                   end: this.$el.find("#dropoff-date"),
                                                                                                                                   startText: this.$el.find("#pickup-date-box"),
                                                                                                                                   endText: this.$el.find("#dropoff-date-box"),
                                                                                                                                   target: a,
                                                                                                                                   content: this.content
                                                                                                                               });
                                                                                                                               try {
                                                                                                                                   if (localStorage.getItem("PICK_UP_DATE")) {
                                                                                                                                       var c =
                                                                                                                                           g.standardizeDate(localStorage.getItem("PICK_UP_DATE"), milClock);
                                                                                                                                       this.formData.set({
                                                                                                                                           pickupDay: c
                                                                                                                                       }, {
                                                                                                                                           silent: !0
                                                                                                                                       });
                                                                                                                                       this.$el.find("#pickup-date-box").find(".value").text(c)
                                                                                                                                   }
                                                                                                                                   if (localStorage.getItem("DROP_OFF_DATE")) {
                                                                                                                                       var h = g.standardizeDate(localStorage.getItem("DROP_OFF_DATE"), milClock);
                                                                                                                                       this.formData.set({
                                                                                                                                           dropoffDay: h
                                                                                                                                       }, {
                                                                                                                                           silent: !0
                                                                                                                                       });
                                                                                                                                       this.$el.find("#dropoff-date-box").find(".value").text(h)
                                                                                                                                   }
                                                                                                                                   "phone" == b.config.deviceGroup && d("div.calendar.elastic").attr("style", "position: absolute ;top: 50%;left: 50%;transform: translate(-50%, -50%);width: 90%")
                                                                                                                               } catch (e) {}
                                                                                                                           },
                                                                                                                           renderTimes: function() {
                                                                                                                               var a = d(c.drawTime(this.formData.get("pickupTime"), this.formData.get("militaryClock"))).attr("name", "pickupTime"),
                                                                                                                                   b = d(c.drawTime(this.formData.get("dropoffTime"), this.formData.get("militaryClock"))).attr("name", "dropoffTime");
                                                                                                                               this.$el.find("#pickup-time").append(a);
                                                                                                                               this.$el.find("#dropoff-time").append(b)
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData = this.formData = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-age-view", "jquery underscore backbone utils/utils-proxy utils/sessionhelper reservation/process-config/core/reservation-constants".split(" "), function(c, e, i, j, f, g) {
                                                                                                                       var d = null;
                                                                                                                       return i.View.extend({
                                                                                                                           events: {
                                                                                                                               "change select": "eventHandler",
                                                                                                                               "click #age-info-link": "displayAgeInfo",
                                                                                                                               "click #new-ageValue": "triggerAgeSlector",
                                                                                                                               "click #new-ageInfo": "displayAgeInfo"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData =
                                                                                                                                   this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData");
                                                                                                                               this.fromWW = this.options.fromWW ? !0 : !1
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ? b : "");
                                                                                                                               "" != b && b <= this.metaData.get("minAgeAdvisory") ? c("#ageAdvisory").show() : c("#ageAdvisory").hide();
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               "ageSelector" == a.attr("id") && this.updateGtmUI()
                                                                                                                           },
                                                                                                                           displayAgeInfo: function() {
                                                                                                                               null == d && (d = j.getLightbox());
                                                                                                                               d.overlay({
                                                                                                                                   url: "age-info-overlay",
                                                                                                                                   title: this.content.homePage.homePageContent.ageSelectOverlayTitle,
                                                                                                                                   width: 584,
                                                                                                                                   center: !0
                                                                                                                               }, e.template(c("#age-info-tpl").html(), {
                                                                                                                                   content: this.metaData.get("agePopUpMsg")
                                                                                                                               }))
                                                                                                                           },
                                                                                                                           updateGtmUI: function() {
                                                                                                                               this.$el.closest("#new-age-container").find("#new-ageValue").text(this.$el.find("#ageSelector option:selected").text())
                                                                                                                           },
                                                                                                                           triggerAgeSlector: function() {
                                                                                                                               this.$el.find("#ageSelector").click()
                                                                                                                           },
                                                                                                                           triggerAgeInfo: function() {
                                                                                                                               this.displayAgeInfo()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               var a = this,
                                                                                                                                   b = "";
                                                                                                                               if (!0 === htz.config.isApp) this.$el.empty(), this.$el.append(e.template(this.template, {
                                                                                                                                   ageDropdownOptions: this.metaData.get("ageDropdownOptions"),
                                                                                                                                   ageSelector: this.formData.get("ageSelector"),
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               else {
                                                                                                                                   if ("" != this.formData.get("pickupLocation") && (3 == this.formData.get("pickupLocation").length || 6 == this.formData.get("pickupLocation").length)) b = htz.config.apiDomain + "/rest/" + htz.config.subSystemId + "/v2/age-dropDown/dialect/" + htz.config.dialect + "/location-code/" + this.formData.get("pickupLocation") + "/''";
                                                                                                                                   else if ("" != this.formData.get("pickupHiddenEOAG") && this.fromWW) b = htz.config.apiDomain + "/rest/" + htz.config.subSystemId + "/v2/age-dropDown/dialect/" +
                                                                                                                                       htz.config.dialect + "/location-code/" + this.formData.get("pickupHiddenEOAG") + "/''";
                                                                                                                                   else if ("" != this.formData.get("inpPickupCountryCode") && (this.fromWW || "Y" == this.formData.get("inpPickupAutoFill"))) b = htz.config.apiDomain + "/rest/" + htz.config.subSystemId + "/v2/age-dropDown/dialect/" + htz.config.dialect + "/location-code/''/" + this.formData.get("inpPickupCountryCode");
                                                                                                                                   else if ("" != this.formData.get("pickupHiddenEOAG")) {
                                                                                                                                       if (this.metaData.get("ageDropdownOptions")) {
                                                                                                                                           this.$el.empty();
                                                                                                                                           this.$el.append(e.template(this.template, {
                                                                                                                                               ageDropdownOptions: this.metaData.get("ageDropdownOptions"),
                                                                                                                                               ageSelector: this.formData.get("ageSelector"),
                                                                                                                                               ageAdvisoryMsg: this.metaData.get("ageAdvisoryMsg"),
                                                                                                                                               content: this.content
                                                                                                                                           }));
                                                                                                                                           c("#ageSelector").trigger("change");
                                                                                                                                           c("#itn-age").show();
                                                                                                                                           return
                                                                                                                                       }
                                                                                                                                       b = htz.config.apiDomain + "/rest/" + htz.config.subSystemId + "/v2/age-dropDown/dialect/" + htz.config.dialect + "/location-code/" + this.formData.get("pickupHiddenEOAG") + "/''"
                                                                                                                                   } else {
                                                                                                                                       this.formData.set({
                                                                                                                                           ageSelector: ""
                                                                                                                                       }, {
                                                                                                                                           silent: !0
                                                                                                                                       });
                                                                                                                                       c("#itn-age").hide();
                                                                                                                                       return
                                                                                                                                   }
                                                                                                                                   c.ajax({
                                                                                                                                       url: b,
                                                                                                                                       type: "GET",
                                                                                                                                       dataType: "jsonp",
                                                                                                                                       cache: !1,
                                                                                                                                       async: !0,
                                                                                                                                       jsonpCallback: "ageDropDown",
                                                                                                                                       beforeSend: function() {},
                                                                                                                                       success: function(b) {
                                                                                                                                           a.metaData.set({
                                                                                                                                               ageDropdownOptions: b.data.ageDropdownOptions,
                                                                                                                                               showAgeDropdown: !0,
                                                                                                                                               ageAdvisoryMsg: b.data.ageAdvisoryMsg,
                                                                                                                                               agePopUpMsg: b.data.agePopUpMsg,
                                                                                                                                               minAgeAdvisory: b.data.minAgeAdvisory
                                                                                                                                           }, {
                                                                                                                                               silent: !0
                                                                                                                                           });
                                                                                                                                           try {
                                                                                                                                               a.formData.set({
                                                                                                                                                   ageSelector: b.data.ageSelector.toString()
                                                                                                                                               }, {
                                                                                                                                                   silent: !0
                                                                                                                                               })
                                                                                                                                           } catch (d) {
                                                                                                                                               a.formData.set({
                                                                                                                                                   ageSelector: b.data.ageSelector
                                                                                                                                               }, {
                                                                                                                                                   silent: !0
                                                                                                                                               })
                                                                                                                                           }
                                                                                                                                           if (f.getItem(g.RESERVATION_INFORMATION_DATA) &&
                                                                                                                                               f.getItem(g.RESERVATION_INFORMATION_DATA.pickupLocationCode)) f.setItem(g.RESERVATION_INFORMATION_DATA.pickupLocationCode, a.formData.get("pickupHiddenEOAG"));
                                                                                                                                           else {
                                                                                                                                               var h = {};
                                                                                                                                               h.dialect = htz.config.dialect;
                                                                                                                                               h.pickupLocationCode = a.formData.get("pickupHiddenEOAG");
                                                                                                                                               f.setItem(g.RESERVATION_INFORMATION_DATA, JSON.stringify(h))
                                                                                                                                           }
                                                                                                                                           a.$el.empty();
                                                                                                                                           a.$el.append(e.template(a.template, {
                                                                                                                                               ageDropdownOptions: a.metaData.get("ageDropdownOptions"),
                                                                                                                                               ageSelector: a.formData.get("ageSelector"),
                                                                                                                                               ageAdvisoryMsg: b.data.ageAdvisoryMsg,
                                                                                                                                               content: a.content
                                                                                                                                           }));
                                                                                                                                           c("#ageSelector").trigger("change");
                                                                                                                                           a.$el.closest("#itn-age").show()
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           a.formData.set({
                                                                                                                                               ageSelector: ""
                                                                                                                                           }, {
                                                                                                                                               silent: !0
                                                                                                                                           });
                                                                                                                                           c("#itn-age").hide()
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                                   return this
                                                                                                                               }
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData = this.formData = d = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-arrival-info-view", ["jquery", "underscore", "backbone"], function(c, d, e) {
                                                                                                                       return e.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler",
                                                                                                                               "change select": "eventHandler"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData")
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ?
                                                                                                                                   b : "");
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           arrivalRadioButton: function() {
                                                                                                                               c("#arriving-info").prop("checked", !0)
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(d.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData = this.formData = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-redeem-view", ["jquery", "underscore", "backbone", "utils/utils-proxy"], function(c, f, e, g) {
                                                                                                                       var d = null;
                                                                                                                       return e.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler",
                                                                                                                               "change select": "eventHandler",
                                                                                                                               "click #redeem-info": "showRedeemInfo",
                                                                                                                               "click #redeem": "redeemPoints"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData")
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ? b : "");
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           showRedeemInfo: function() {
                                                                                                                               var a = this,
                                                                                                                                   b = a.content.homePage.homePageContent.redeemOverlayTitle;
                                                                                                                               require(["reservation/itinerary/core/view/content-overlay-view"], function(c) {
                                                                                                                                   null == d && (d = g.getLightbox());
                                                                                                                                   d.overlay({
                                                                                                                                       title: b,
                                                                                                                                       width: 584,
                                                                                                                                       center: !0
                                                                                                                                   }, (new c({
                                                                                                                                       model: new e.Model({
                                                                                                                                           url: "redeem-tpl"
                                                                                                                                       }),
                                                                                                                                       content: a.content
                                                                                                                                   })).render().el)
                                                                                                                               });
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           redeemPoints: function() {
                                                                                                                               if (this.$el.find("#redeem").prop("checked")) this.metaData.set({
                                                                                                                                       isRedeemPoints: !0
                                                                                                                                   }),
                                                                                                                                   c("#non-cdp-discounts input").attr("disabled", !0), c("input:disabled").closest("div").removeClass("highlight");
                                                                                                                               else {
                                                                                                                                   if (0 < c("#non-cdp-discounts input").length)
                                                                                                                                       for (var a = c("#non-cdp-discounts input"), b = 0; b < a.length; b++) "" !== a[b].value && c(a[b]).closest(".discount-row").addClass("highlight");
                                                                                                                                   this.metaData.set({
                                                                                                                                       isRedeemPoints: !1
                                                                                                                                   });
                                                                                                                                   c("#non-cdp-discounts input").attr("disabled", !1)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(f.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData = this.formData = d = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-vehicle-type-view", ["jquery", "underscore", "backbone", "utils/utils-proxy"], function(g, h, f, i) {
                                                                                                                       function e() {
                                                                                                                           null == c && (c = i.getLightbox());
                                                                                                                           return c
                                                                                                                       }
                                                                                                                       var c = null;
                                                                                                                       return f.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler",
                                                                                                                               "change select": "eventHandler",
                                                                                                                               "click #car-type-display": "showCarTypeOverlay",
                                                                                                                               "click #fleet-info": "showFleetInfo"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData =
                                                                                                                                   this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData")
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a = g(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ? b : "");
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           showCarTypeOverlay: function() {
                                                                                                                               var a = this;
                                                                                                                               require(["reservation/car-types/core/presenter/car-types-presenter"], function(b) {
                                                                                                                                   b.showFleet(a)
                                                                                                                               })
                                                                                                                           },
                                                                                                                           selectCarType: function(a, b) {
                                                                                                                               var d = this.$el.find("#car-type");
                                                                                                                               this.$el.find("#car-type-display .value").text(a.get("label"));
                                                                                                                               d.get(0).selectedIndex =
                                                                                                                                   b;
                                                                                                                               d.change();
                                                                                                                               e().closeOverlay()
                                                                                                                           },
                                                                                                                           showCartype: function(a) {
                                                                                                                               var b = this.$("#car-type-display"),
                                                                                                                                   b = {
                                                                                                                                       width: 600,
                                                                                                                                       center: !1,
                                                                                                                                       plain: !0,
                                                                                                                                       darkness: 0,
                                                                                                                                       hCenter: !1,
                                                                                                                                       top: b.offset().top + 30,
                                                                                                                                       left: b.offset().left
                                                                                                                                   };
                                                                                                                               e().overlay(b, a)
                                                                                                                           },
                                                                                                                           showFleetInfo: function() {
                                                                                                                               var a = this,
                                                                                                                                   b = a.content.reservationPopups.carTypeDetailsPopupContent.popupHeaderText;
                                                                                                                               require(["reservation/itinerary/core/view/content-overlay-view"], function(d) {
                                                                                                                                   e().overlay({
                                                                                                                                       title: b,
                                                                                                                                       width: 584,
                                                                                                                                       center: !0
                                                                                                                                   }, (new d({
                                                                                                                                       model: new f.Model({
                                                                                                                                           url: "fleet-tpl"
                                                                                                                                       }),
                                                                                                                                       content: a.content
                                                                                                                                   })).render().el)
                                                                                                                               })
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               var a;
                                                                                                                               if ("true" == htz.helpers.SessionHelper.getItem("resetCarType")) {
                                                                                                                                   this.formData.set({
                                                                                                                                       selectedCarType: "ACAR"
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   });
                                                                                                                                   try {
                                                                                                                                       a = this.metaData.get("nvpVehicleGroupSipps").filter(function(a) {
                                                                                                                                           return "ACAR" === a.value
                                                                                                                                       })[0].name, this.metaData.set({
                                                                                                                                           selectedCarLabel: a
                                                                                                                                       }, {
                                                                                                                                           silent: !0
                                                                                                                                       })
                                                                                                                                   } catch (b) {
                                                                                                                                       console.log(b)
                                                                                                                                   }
                                                                                                                                   htz.helpers.SessionHelper.setItem("resetCarType", "false")
                                                                                                                               }
                                                                                                                               this.$el.append(h.template(this.template, {
                                                                                                                                   selectedCarLabel: this.metaData.get("selectedCarLabel"),
                                                                                                                                   nvpVehicleGroupSipps: this.metaData.get("nvpVehicleGroupSipps"),
                                                                                                                                   selectedCarType: this.formData.get("selectedCarType"),
                                                                                                                                   isResWidget: this.metaData.get("isResWidget"),
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData = this.formData = c = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-ta-member-view", ["jquery", "underscore", "backbone"], function(c, d, e) {
                                                                                                                       return e.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.formData = this.model.get("formData")
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ? b : "");
                                                                                                                               this.formData.set(a.attr("name"),
                                                                                                                                   b, {
                                                                                                                                       silent: !0
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(d.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.metaData = this.formData = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-discounts-view", "jquery underscore backbone config/app-config utils/utils utils/utils-proxy reservation/itinerary/core/view/helper/view-helper reservation/itinerary/core/model/affiliate-member-ID-verification-model utils/gtm-tracker".split(" "), function(c, l, e, i, q, j, k, r, s) {
                                                                                                                       function n() {
                                                                                                                           null == g && (g = j.getLightbox());
                                                                                                                           return g
                                                                                                                       }
                                                                                                                       var g = null;
                                                                                                                       return e.View.extend({
                                                                                                                           events: {
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler",
                                                                                                                               "change select": "eventHandler",
                                                                                                                               "click #discount-info": "showDiscountDetails",
                                                                                                                               "click #discounts": "toggleDiscounts",
                                                                                                                               "blur #cdp-textfield": "handleCdp",
                                                                                                                               "change #member-selected-cdp": "handleMemberCdp",
                                                                                                                               "keyup #member-selected-cdp": "handleMemberCdp",
                                                                                                                               "click #profile-cdp-indicator": "setProfileCdpIndicator",
                                                                                                                               "blur #member-other-cdp": "handleOtherCdp",
                                                                                                                               "keyup .discount-row input": "highlightDiscount",
                                                                                                                               "keyup #cdp-textfield": "showCDPOptions",
                                                                                                                               "click #corp-cust": "toggleCorpDependentFields",
                                                                                                                               "keyup #type-in-rq": "showCdpRqWarning",
                                                                                                                               "click #discount-slideout": "displayMobileDiscounts",
                                                                                                                               "click #corpRate": "showCdpRqWarning",
                                                                                                                               "click #other-cdp-indicator": "setOtherCdpIndicator",
                                                                                                                               "keyup #member-other-cdp": "setOtherCdpIndicator",
                                                                                                                               "click input[name=trip-type]": "toggleTripType",
                                                                                                                               "click input[name=corpRate]": "toggleCorpRate",
                                                                                                                               "click #app-cdp-buttons": "handleCdpLinks",
                                                                                                                               "change #cdp-textfield": "handleAffiliateMemberVerification",
                                                                                                                               "click #affiliate-login-link": "redirectToAffiliateLink",
                                                                                                                               "change #cdp>label>input": "trackDiscount",
                                                                                                                               "change #pc>label>input": "trackDiscount",
                                                                                                                               "change .discount-row>label>input": "trackDiscount",
                                                                                                                               "click #new-discount": "showDiscountModal",
                                                                                                                               "click .new-discount-modal-header a": "hideDiscountModal",
                                                                                                                               "click #new-discountInfo": "showDiscountDetails",
                                                                                                                               "click #new-apply-button": "applyDiscount",
                                                                                                                               "click .new-cancel-button": "cancelFlow"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.viewHelper = this.options.viewHelper;
                                                                                                                               this.metaData = this.options.metaData;
                                                                                                                               this.formData = this.options.formData
                                                                                                                           },
                                                                                                                           showDiscountDetails: function() {
                                                                                                                               var a = this,
                                                                                                                                   b = a.content.homePage.homePageContent.discountOverlayTitle;
                                                                                                                               require(["reservation/itinerary/core/view/content-overlay-view"], function(c) {
                                                                                                                                   n().overlay({
                                                                                                                                       title: b,
                                                                                                                                       width: 584,
                                                                                                                                       center: !0
                                                                                                                                   }, (new c({
                                                                                                                                       model: new e.Model({
                                                                                                                                           url: "discount-tpl"
                                                                                                                                       }),
                                                                                                                                       content: a.content
                                                                                                                                   })).render().el)
                                                                                                                               });
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           showDiscountModal: function() {
                                                                                                                               this.orgFormData = e.Model.extend({});
                                                                                                                               this.orgFormData = this.formData.clone();
                                                                                                                               c(".new-discount-modal-container").removeClass("new-hide");
                                                                                                                               this.setDiscountDisplay(force = !0)
                                                                                                                           },
                                                                                                                           hideDiscountModal: function() {
                                                                                                                               c(".new-discount-modal-container").addClass("new-hide");
                                                                                                                               this.checkDiscCode()
                                                                                                                           },
                                                                                                                           checkDiscCode: function() {
                                                                                                                               var a = 0;
                                                                                                                               if (c("#cdp-options-business").length) {
                                                                                                                                   (0 < c("#cdp-textfield").length && 0 < c("#cdp-textfield").val().length || 0 < c('#member-selected-cdp option[selected="selected"]').length && !c('#member-selected-cdp option:contains("None")').is(":checked")) && a++;
                                                                                                                                   c("#pc input").val() && 0 < c("#pc input").val().length && a++;
                                                                                                                                   c("#type-in-rq").val() && 0 < c("#type-in-rq").val().length && a++;
                                                                                                                                   c('input[name="cvNumber"]').val() && 0 < c('input[name="cvNumber"]').val().length && a++;
                                                                                                                                   c('input[name="itNumber"]').val() &&
                                                                                                                                       0 < c('input[name="itNumber"]').val().length && a++;
                                                                                                                                   var b = this.content.homePage,
                                                                                                                                       d = b.homePageContent.addDiscountCode,
                                                                                                                                       f = b.homePageContent.oneCodeApplied,
                                                                                                                                       b = b.homePageContent.disCodesApplied;
                                                                                                                                   0 === a ? c("#new-discount").text(d) : 1 === a ? c("#new-discount").text(f) : 1 < a && c("#new-discount").text(a + b)
                                                                                                                               } else c("#new-discount").text(f)
                                                                                                                           },
                                                                                                                           cancelFlow: function() {
                                                                                                                               var a = this;
                                                                                                                               c.each(this.orgFormData.attributes, function(b, c) {
                                                                                                                                   a.formData.set(b, c, {
                                                                                                                                       silent: !0
                                                                                                                                   })
                                                                                                                               });
                                                                                                                               c(".new-discount-modal-container").addClass("new-hide");
                                                                                                                               this.refresh();
                                                                                                                               this.checkDiscCode()
                                                                                                                           },
                                                                                                                           applyDiscount: function(a) {
                                                                                                                               c(a.target).closest(".new-discount-modal").find(".new-discount-modal-form");
                                                                                                                               var b, d = this,
                                                                                                                                   f = 0;
                                                                                                                               1 == this.metaData.get("loggedIn") ? ("" !== d.formData.get("memberSelectedCdp") || "" !== d.formData.get("memberOtherCdpField")) && d.formData.set("checkDiscount", "on", {
                                                                                                                                   silent: !0
                                                                                                                               }) : (c(".new-discount-modal-form input[type=text]").each(function() {
                                                                                                                                   c(this).is(":checkbox") && (b = c(this).is(":checked") ? b : "");
                                                                                                                                   b = c.trim(c(this).val());
                                                                                                                                   "" != b && f++;
                                                                                                                                   d.formData.set(c(this).attr("name"),
                                                                                                                                       b, {
                                                                                                                                           silent: !0
                                                                                                                                       })
                                                                                                                               }), 0 < f ? d.formData.set("checkDiscount", "on", {
                                                                                                                                   silent: !0
                                                                                                                               }) : d.formData.set("checkDiscount", "", {
                                                                                                                                   silent: !0
                                                                                                                               }));
                                                                                                                               c(".new-discount-modal-container").addClass("new-hide");
                                                                                                                               this.checkDiscCode()
                                                                                                                           },
                                                                                                                           trackDiscount: l.debounce(function(a) {
                                                                                                                               var b = c(a.currentTarget),
                                                                                                                                   a = "";
                                                                                                                               "cdpField" == b.attr("name") ? a = "cdp" : "pcNumber" == b.attr("name") ? a = "pc" : "typeInRateQuote" == b.attr("name") ? a = "rq" : "cvNumber" == b.attr("name") ? a = "cv" : "itNumber" == b.attr("name") && (a = "it");
                                                                                                                               b = b.val();
                                                                                                                               if (!htz.config.isApp) {
                                                                                                                                   var d = {
                                                                                                                                       scenario: "apply-discount",
                                                                                                                                       payload: {}
                                                                                                                                   };
                                                                                                                                   d.payload.discountType = a;
                                                                                                                                   d.payload.discountCode = b;
                                                                                                                                   s.track(d)
                                                                                                                               }
                                                                                                                           }, 500),
                                                                                                                           redirectToAffiliateLink: function() {
                                                                                                                               localStorage.setItem("PICK_UP_DATE", this.formData.get("pickupDay"));
                                                                                                                               localStorage.setItem("DROP_OFF_DATE", this.formData.get("dropoffDay"));
                                                                                                                               window.location.href = c("#member-link").html()
                                                                                                                           },
                                                                                                                           handleAffiliateMemberVerification: function(a) {
                                                                                                                               var b = this,
                                                                                                                                   d, f, h;
                                                                                                                               if (b.metaData.get("loggedIn")) try {
                                                                                                                                   var e = "" != b.formData.get("memberOtherCdpField") ? b.formData.get("memberOtherCdpField") : b.formData.get("memberSelectedCdp");
                                                                                                                                   h = null != RegExp("affiliateID_" + b.metaData.get("memberNumber") + "_" + e + "=([^;]+)").exec(document.cookie) ? !0 : !1
                                                                                                                               } catch (k) {
                                                                                                                                   h = !1
                                                                                                                               }
                                                                                                                               if (!b.metaData.get("loggedIn") || !h)
                                                                                                                                   if ("" == this.formData.get("pickupHiddenEOAG") && "" == this.formData.get("dropoffHiddenEOAG") && "" == this.formData.get("pickupLocation") && "" == this.formData.get("dropoffLocation")) b.resetAffiliateMemberFields();
                                                                                                                                   else {
                                                                                                                                       this.model = new r;
                                                                                                                                       h = i.config.pos;
                                                                                                                                       var e = i.config.dialect,
                                                                                                                                           g = "",
                                                                                                                                           m = "";
                                                                                                                                       "" != this.formData.get("pickupHiddenEOAG") ? g = this.formData.get("pickupHiddenEOAG") :
                                                                                                                                           "" === this.formData.get("pickupHiddenEOAG") && "" != this.formData.get("pickupLocation") && (g = this.formData.get("pickupLocation"));
                                                                                                                                       "on" == this.formData.get("returnAtDifferentLocationCheckbox") && ("" != this.formData.get("dropoffHiddenEOAG") ? m = this.formData.get("dropoffHiddenEOAG") : "" === this.formData.get("dropoffHiddenEOAG") && "" != this.formData.get("dropoffLocation") && (m = this.formData.get("dropoffLocation")));
                                                                                                                                       var j = !1;
                                                                                                                                       if (this.metaData.get("loggedIn") && this.metaData.get("showCdpList")) {
                                                                                                                                           try {
                                                                                                                                               d = c(a.target), f = "member-other-cdp" ==
                                                                                                                                                   d.attr("id") ? !0 : !1
                                                                                                                                           } catch (n) {
                                                                                                                                               f = "otherCdpIndicator" === this.formData.get("cdpRadioButton") ? !0 : !1
                                                                                                                                           }
                                                                                                                                           a = !0 === f ? this.formData.get("memberOtherCdpField") : this.formData.get("memberSelectedCdp")
                                                                                                                                       } else a = this.formData.get("cdpField");
                                                                                                                                       if (0 < a.length) {
                                                                                                                                           a = a.replace(/^0+/, "");
                                                                                                                                           this.model.set({
                                                                                                                                               POS: h,
                                                                                                                                               pickupLocationCode: g,
                                                                                                                                               dropOffLocationCode: m,
                                                                                                                                               CDP: a,
                                                                                                                                               dialect: e,
                                                                                                                                               referrerURL: this.metaData.get("referrerUrl")
                                                                                                                                           });
                                                                                                                                           var o = c.param({
                                                                                                                                                   POS: h,
                                                                                                                                                   pickupLocationCode: g,
                                                                                                                                                   dropOffLocationCode: m,
                                                                                                                                                   CDP: a,
                                                                                                                                                   dialect: e,
                                                                                                                                                   referrerURL: this.metaData.get("referrerUrl")
                                                                                                                                               }),
                                                                                                                                               p = i.config.apiDomain + "/rest/partner/cdp/memberID/required";
                                                                                                                                           c.ajax({
                                                                                                                                               cache: !1,
                                                                                                                                               data: o,
                                                                                                                                               url: p,
                                                                                                                                               dataType: "jsonp",
                                                                                                                                               type: "GET",
                                                                                                                                               success: function(a) {
                                                                                                                                                   a.data && !0 == a.data.verifyPartnerMember ? (b.$el.find("#affiliate-member-verification").empty().html(l.template(c("#affiliate-Member-View").html(), {
                                                                                                                                                           content: a.data.content,
                                                                                                                                                           formData: b.formData
                                                                                                                                                       })), b.$el.find("#affiliate-member-verification").removeAttr("hidden"), b.$el.find("#affiliate-member-join").trigger("change"), b.metaData.set({
                                                                                                                                                           verifyPartnerMember: !0
                                                                                                                                                       }, {
                                                                                                                                                           silent: !0
                                                                                                                                                       }),
                                                                                                                                                       b.formData.set({
                                                                                                                                                           companyId: a.data.companyId
                                                                                                                                                       }, {
                                                                                                                                                           silent: !0
                                                                                                                                                       })) : b.resetAffiliateMemberFields()
                                                                                                                                               },
                                                                                                                                               error: function() {
                                                                                                                                                   console.log("error fetching /required");
                                                                                                                                                   j = !0
                                                                                                                                               },
                                                                                                                                               complete: function() {
                                                                                                                                                   !0 === j && c.ajax({
                                                                                                                                                       cache: !1,
                                                                                                                                                       data: o,
                                                                                                                                                       url: p,
                                                                                                                                                       dataType: "jsonp",
                                                                                                                                                       type: "GET",
                                                                                                                                                       success: function(a) {
                                                                                                                                                           a.data && !0 == a.data.verifyPartnerMember ? (b.$el.find("#affiliate-member-verification").empty().html(l.template(c("#affiliate-Member-View").html(), {
                                                                                                                                                                   content: a.data.content,
                                                                                                                                                                   formData: b.formData
                                                                                                                                                               })), b.$el.find("#affiliate-member-verification").removeAttr("hidden"),
                                                                                                                                                               b.$el.find("#affiliate-member-join").trigger("change"), b.metaData.set({
                                                                                                                                                                   verifyPartnerMember: !0
                                                                                                                                                               }, {
                                                                                                                                                                   silent: !0
                                                                                                                                                               }), b.formData.set({
                                                                                                                                                                   companyId: a.data.companyId
                                                                                                                                                               }, {
                                                                                                                                                                   silent: !0
                                                                                                                                                               })) : b.resetAffiliateMemberFields()
                                                                                                                                                       },
                                                                                                                                                       error: function() {
                                                                                                                                                           console.log("error fetching /required");
                                                                                                                                                           b.resetAffiliateMemberFields()
                                                                                                                                                       }
                                                                                                                                                   })
                                                                                                                                               }
                                                                                                                                           })
                                                                                                                                       } else this.resetAffiliateMemberFields()
                                                                                                                                   }
                                                                                                                           },
                                                                                                                           toggleTripType: function(a) {
                                                                                                                               "business-cdp-indicator" === a.currentTarget.id ? (k.trackCdpOptions("cdp-options-business-radio"), this.setBusinessFormData()) : (k.trackCdpOptions("cdp-options-leisure-radio"),
                                                                                                                                   this.setLeisureFormData())
                                                                                                                           },
                                                                                                                           toggleCorpRate: function(a) {
                                                                                                                               "corp-rate-yes" === a.currentTarget.id ? (k.trackCdpOptions("cdp-options-corp-rate-yes-radio"), this.setCorpRateFormData(!0)) : (k.trackCdpOptions("cdp-options-corp-rate-no-radio"), this.setCorpRateFormData(!1))
                                                                                                                           },
                                                                                                                           setCorporateRateData: function() {
                                                                                                                               var a = "on" == this.formData.get("corporateRate") ? "yes" : "no";
                                                                                                                               this.formData.set({
                                                                                                                                   corpRate: a
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           setBusinessFormData: function() {
                                                                                                                               var a = "";
                                                                                                                               this.$el.find("#business-cdp-indicator").prop("checked", !0);
                                                                                                                               this.metaData.get("allowContractRate") ?
                                                                                                                                   (this.$el.find("#corp-rate-yes").prop("disabled", !1), this.$el.find("#corp-rate-no").prop("disabled", !1), this.$el.find("#cdp-options").removeClass("disabled-label")) : a = "on";
                                                                                                                               this.$el.find("#official-travel").prop("checked", !0);
                                                                                                                               this.showCdpRqWarning();
                                                                                                                               this.formData.set({
                                                                                                                                   corporateRate: a,
                                                                                                                                   officialTravel: "on"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.metaData.set({
                                                                                                                                   travelType: "B"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           setLeisureFormData: function() {
                                                                                                                               this.$el.find("#leisure-cdp-indicator").prop("checked", !0);
                                                                                                                               this.metaData.set({
                                                                                                                                   travelType: "L"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.resetCorpFormFields()
                                                                                                                           },
                                                                                                                           setCorpRateFormData: function(a) {
                                                                                                                               this.formData.set({
                                                                                                                                   corporateRate: a ? "on" : ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           clearBusinessLeisureFormData: function() {
                                                                                                                               this.$el.find('input[name="trip-type"]').prop("checked", !1);
                                                                                                                               this.metaData.set({
                                                                                                                                   travelType: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.formData.get("trip-type") && this.formData.unset("trip-type", {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.resetCorpFormFields()
                                                                                                                           },
                                                                                                                           clearDiscountFields: function() {
                                                                                                                               this.formData.get("cdpField") && (this.$el.find("#cdp-textfield").val("").trigger("keyup"), this.formData.set({
                                                                                                                                   cdpField: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), this.resetAffiliateMemberFields(), this.$el.find("#cdp-options-business").hide(), this.clearBusinessLeisureFormData());
                                                                                                                               if (this.formData.get("memberSelectedCdp") || this.formData.get("memberOtherCdpField")) this.$el.find("#member-selected-cdp").val(""), this.$el.find("#member-other-cdp").val(""), this.$el.find("#profile-cdp-indicator").prop("checked", !0), this.formData.set({
                                                                                                                                       memberSelectedCdp: "",
                                                                                                                                       memberOtherCdpField: "",
                                                                                                                                       cdpRadioButton: ""
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }), this.$el.find("#cdp-options-business").hide(),
                                                                                                                                   this.clearBusinessLeisureFormData();
                                                                                                                               if (this.formData.get("pcNumber") || this.formData.get("typeInRateQuote") || this.formData.get("cvNumber") || this.formData.get("itNumber")) this.$el.find("input[name=pcNumber]").val("").trigger("keyup"), this.$el.find("input[name=cvNumber]").val("").trigger("keyup"), this.$el.find("input[name=itNumber]").val("").trigger("keyup"), this.$el.find("input[name=typeInRateQuote]").val("").trigger("keyup"), this.formData.set({
                                                                                                                                   cvNumber: "",
                                                                                                                                   pcNumber: "",
                                                                                                                                   typeInRateQuote: "",
                                                                                                                                   itNumber: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           resetAffiliateMemberFields: function() {
                                                                                                                               this.metaData.unset("verifyPartnerMember", {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.formData.set({
                                                                                                                                   affiliateMemberJoin: "",
                                                                                                                                   affiliateMemberID: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.$el.find("#affiliate-member-verification").attr("hidden", "true");
                                                                                                                               this.$el.find("#affiliate-member-ID").val("")
                                                                                                                           },
                                                                                                                           resetCorpFormFields: function() {
                                                                                                                               this.$el.find("#official-travel").prop("checked", !1);
                                                                                                                               this.metaData.get("allowContractRate") && (i.config.isApp || (this.$el.find('input[name="corpRate"]').prop({
                                                                                                                                   disabled: !0,
                                                                                                                                   checked: !1
                                                                                                                               }), this.$el.find("#cdp-options").addClass("disabled-label")), this.formData.get("corpRate") && this.formData.unset("corpRate", {
                                                                                                                                   silent: !0
                                                                                                                               }));
                                                                                                                               this.formData.set({
                                                                                                                                   corporateRate: "",
                                                                                                                                   officialTravel: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               a.stopPropagation();
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = c.trim(a.val());
                                                                                                                               try {
                                                                                                                                   if (a.is(":checkbox")) b = a.is(":checked") ? b : "", "affiliateMemberJoin" === a.attr("name") && a.is(":checked") ? a.closest("#affiliate-member-verification").find("#affiliate-member-ID").prop("disabled", !0) : a.closest("#affiliate-member-verification").find("#affiliate-member-ID").prop("disabled", !1);
                                                                                                                                   else if (this.metaData.get("applicant") && a.is('[type="radio"]') && "corpRate" == a[0].name && !this.metaData.get("allowContractRate")) return 0
                                                                                                                               } catch (d) {
                                                                                                                                   console.log(d), this.formData.set(a.attr("name"), b, {
                                                                                                                                       silent: !0
                                                                                                                                   })
                                                                                                                               }
                                                                                                                               this.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               if (htz.config.isApp) this.formData.set("checkDiscount", "on", {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               else if ("memberSelectedCdp" == a.attr("name") || "memberOtherCdpField" == a.attr("name")) "" == b ? this.formData.set("checkDiscount", "", {
                                                                                                                                   silent: !0
                                                                                                                               }) : "" != b && this.formData.set("checkDiscount",
                                                                                                                                   "on", {
                                                                                                                                       silent: !0
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           resetCdpCorpFields: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = a.val();
                                                                                                                               this.clearBusinessLeisureFormData();
                                                                                                                               "memberSelectedCdp" === a.attr("name") && ("" == b || "0" == b) ? this.$el.find("#cdp-options-business").hide() : (this.$el.find("#member-other-cdp").val(""), this.$el.find("#cdp-options-business").show())
                                                                                                                           },
                                                                                                                           showDiscountDetails: function() {
                                                                                                                               var a = this,
                                                                                                                                   b = a.content.homePage.homePageContent.discountOverlayTitle;
                                                                                                                               require(["reservation/itinerary/core/view/content-overlay-view"], function(c) {
                                                                                                                                   n().overlay({
                                                                                                                                       title: b,
                                                                                                                                       width: 584,
                                                                                                                                       center: !0
                                                                                                                                   }, (new c({
                                                                                                                                       model: new e.Model({
                                                                                                                                           url: "discount-tpl"
                                                                                                                                       }),
                                                                                                                                       content: a.content
                                                                                                                                   })).render().el)
                                                                                                                               });
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           toggleDiscounts: function() {
                                                                                                                               this.resetToDefaultProfileCdp();
                                                                                                                               this.setDiscountDisplay()
                                                                                                                           },
                                                                                                                           resetToDefaultProfileCdp: function() {
                                                                                                                               this.metaData.get("loggedIn") && this.metaData.get("cdpList") && (this.$el.find("#member-selected-cdp").val(this.metaData.get("cdpList")[0].name), this.$el.find("#profile-cdp-indicator").prop("checked", !0), this.metaData.set("discountExists", !0), this.formData.set({
                                                                                                                                   memberSelectedCdp: this.metaData.get("cdpList")[0].name,
                                                                                                                                   cdpRadioButton: "profileCdpIndicator"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }))
                                                                                                                           },
                                                                                                                           setDiscountDisplay: function(a) {
                                                                                                                               this.$el.find("#discounts").prop("checked") ? (this.$el.find("#affiliations").show(), this.metaData.set({
                                                                                                                                       discountExists: 1
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }), this.metaData.get("allowContractRate") && "B" == this.metaData.get("travelType") && this.setCorporateRateData()) : !0 == a ? (this.$el.find("#affiliations").show(), this.metaData.set({
                                                                                                                                       discountExists: 1
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }), this.metaData.get("allowContractRate") && "B" == this.metaData.get("travelType") && this.setCorporateRateData()) :
                                                                                                                                   (this.$el.find("#affiliations").hide(), this.metaData.set({
                                                                                                                                       discountExists: 0
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }), this.clearDiscountFields());
                                                                                                                               this.checkDiscCode();
                                                                                                                               this.viewHelper.setFooterPadding()
                                                                                                                           },
                                                                                                                           handleOtherCdp: function(a) {
                                                                                                                               this.saveCDPInSession(c(a.target).val(), this.$el.find("#other-cdp-indicator").val());
                                                                                                                               this.handleAffiliateMemberVerification(a)
                                                                                                                           },
                                                                                                                           handleCdp: function() {},
                                                                                                                           handleMemberCdp: function(a) {
                                                                                                                               var b = this.$el.find("#profile-cdp-indicator");
                                                                                                                               b.trigger("click");
                                                                                                                               this.saveCDPInSession(c(a.target).val(), b.val());
                                                                                                                               this.resetCdpCorpFields(a);
                                                                                                                               this.handleAffiliateMemberVerification(a)
                                                                                                                           },
                                                                                                                           saveCDPInSession: function(a, b) {
                                                                                                                               c.ajax({
                                                                                                                                   url: i.config.rootContext + "/handlers/SaveSessionInformationHandler",
                                                                                                                                   data: {
                                                                                                                                       cdpField: a,
                                                                                                                                       cdpRadioButton: b,
                                                                                                                                       checkDiscount: "on"
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           highlightDiscount: function(a) {
                                                                                                                               var b = c(a.target),
                                                                                                                                   d = b.closest(".discount-row");
                                                                                                                               "member-other-cdp" !== c(a.currentTarget).attr("id") && (0 === c.trim(b.val()).length ? d.removeClass("highlight") : d.addClass("highlight"))
                                                                                                                           },
                                                                                                                           showCDPOptions: function() {
                                                                                                                               if (this.metaData.get("isIncludeCDPOptions")) {
                                                                                                                                   var a = this.$el.find("#cdp-options-business"),
                                                                                                                                       b = this.$el.find("#cdp-textfield"),
                                                                                                                                       d = this.$el.find("#corp-cust"),
                                                                                                                                       b = c.trim(b.val());
                                                                                                                                   0 < b.length && "0" != b ? this.metaData.get("isIncludeCorpCustomer") ? d.is(":checked") && (a.show(), this.setBusinessFormData(), this.metaData.set({
                                                                                                                                       isShowCDPOptions: 1
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   })) : (a.show(), this.metaData.set({
                                                                                                                                       isShowCDPOptions: 1
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   })) : (a.hide(), this.clearBusinessLeisureFormData(), this.metaData.set({
                                                                                                                                       isShowCDPOptions: 0
                                                                                                                                   }, {
                                                                                                                                       silent: !0
                                                                                                                                   }))
                                                                                                                               }
                                                                                                                           },
                                                                                                                           toggleCorpDependentFields: function(a) {
                                                                                                                               var a = c(a.target),
                                                                                                                                   b = this.$el.find("#pc"),
                                                                                                                                   d = this.$el.find("#rq-cv-it"),
                                                                                                                                   f = this.$el.find("#cdp-textfield"),
                                                                                                                                   e = this.$el.find("#cdp-options-business");
                                                                                                                               a.is(":checked") ? (d.hide(), this.metaData.set({
                                                                                                                                   isShowRQCVITSection: 0
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), this.metaData.get("isShowPCField") || (b.hide(), this.metaData.set({
                                                                                                                                   isShowPCSection: 0
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })), 0 < c.trim(f.val()).length && this.metaData.get("isIncludeCDPOptions") && (this.setBusinessFormData(), e.show(), this.metaData.set({
                                                                                                                                   isShowCDPOptions: 1
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }))) : (d.show(), b.show(), this.metaData.set({
                                                                                                                                   isShowRQCVITSection: 1
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), this.metaData.set({
                                                                                                                                   isShowPCSection: 1
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), this.metaData.get("isIncludeCorpCustomer") && (this.resetCorpFormFields(), e.hide(), this.metaData.set({
                                                                                                                                   isShowCDPOptions: 0
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               })))
                                                                                                                           },
                                                                                                                           showCdpRqWarning: function() {
                                                                                                                               var a = this.$el.find("#corpRate"),
                                                                                                                                   b = this.$el.find("#type-in-rq"),
                                                                                                                                   c = this.$el.find("#corp-cust");
                                                                                                                               a.is(":checked") && "" !== b.val() && (c && !c.is(":checked")) && j.getNotifier().alert(this.content.homePage.jsErrorContent.displayCDPrqAlertError)
                                                                                                                           },
                                                                                                                           displayMobileDiscounts: function() {
                                                                                                                               var a = this.formData.validate(this.formData, {
                                                                                                                                   stepValidation: !0
                                                                                                                               });
                                                                                                                               a ? this.formData.trigger("error", this.formData, a) : (q.clearErrorMessage(), this.$el.find("#discounts-section").toggle(), this.$el.find("#expand_collapse_discounts").hasClass("icons-expand_icon") ? this.$el.find("#expand_collapse_discounts").removeClass("icons-expand_icon").addClass("icons-collapse_icon") : this.$el.find("#expand_collapse_discounts").removeClass("icons-collapse_icon").addClass("icons-expand_icon"), this.$el.find("#affiliations").show())
                                                                                                                           },
                                                                                                                           setProfileCdpIndicator: function() {
                                                                                                                               var a = c("#member-selected-cdp").val();
                                                                                                                               void 0 == a || "" == a || "0" == a ? (this.$el.find("#cdp-options-business").hide(), this.clearBusinessLeisureFormData()) : this.$el.find("#cdp-options-business").show()
                                                                                                                           },
                                                                                                                           setOtherCdpIndicator: function() {
                                                                                                                               var a = c("#member-other-cdp");
                                                                                                                               this.$el.find("#other-cdp-indicator").prop("checked", !0).trigger("change");
                                                                                                                               0 === c.trim(a.val()).length ? (this.$el.find("#cdp-options-business").hide(), this.resetAffiliateMemberFields()) : this.$el.find("#cdp-options-business").show()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(l.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.setDiscountDisplay();
                                                                                                                               this.handleAffiliateMemberVerification();
                                                                                                                               this.$el.find("#affiliate-member-join").trigger("change");
                                                                                                                               this.metaData.get("loggedIn") && !this.metaData.get("applicant") && this.setProfileCdpIndicator();
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           refresh: function() {
                                                                                                                               this.$el.empty();
                                                                                                                               this.render()
                                                                                                                           },
                                                                                                                           handleCdpLinks: function() {},
                                                                                                                           doCleanup: function() {
                                                                                                                               this.viewHelper.doCleanup && this.viewHelper.doCleanup();
                                                                                                                               this.template = this.content =
                                                                                                                                   this.metaData = this.formData = this.viewHelper = g = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-cdp-view", ["jquery", "underscore", "backbone", "reservation/itinerary/core/view/helper/view-helper"], function(b, c, d, a) {
                                                                                                                       return d.View.extend({
                                                                                                                           initialize: function(a) {
                                                                                                                               this.referrer = this.options.referrer;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.model = this.options.model;
                                                                                                                               this.metaData = this.options.metaData;
                                                                                                                               this.formData = this.options.formData;
                                                                                                                               this.content = a.content;
                                                                                                                               this.lBoxRef = this.options.lBoxRef
                                                                                                                           },
                                                                                                                           events: {
                                                                                                                               "click #businessBtn": "businessHandler",
                                                                                                                               "click #leisureBtn": "leisureHandler",
                                                                                                                               "click #contract-rate-yes-btn": "contractRateYesHandler",
                                                                                                                               "click #contract-rate-no-btn": "contractRateNoHandler"
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.html(c.template(b("#cdp-business-leisure-tpl").html(), {
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           businessHandler: function() {
                                                                                                                               this.referrer.$el.find("#business-cdp-indicator").prop("checked", !0).trigger("change");
                                                                                                                               this.referrer.$el.find("#official-travel").prop("checked", !0).trigger("change");
                                                                                                                               this.metaData.set({
                                                                                                                                   travelType: "B"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               a.trackCdpOptions("business-overlay-button");
                                                                                                                               this.metaData.get("allowContractRate") ? (this.referrer.$el.find("#corp-rate-yes").prop("disabled", !1), this.referrer.$el.find("#corp-rate-no").prop("disabled", !1), this.referrer.$el.find("#cdp-options").removeClass("disabled-label"), this.formData.set({
                                                                                                                                   corporateRate: "",
                                                                                                                                   officialTravel: "on",
                                                                                                                                   checkDiscount: "on"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), 1 > this.$el.find("#cdp-overlay").length && this.$el.find(".first .wrapper").append(c.template(b("#cdp-contract-rate-tpl").html(), {
                                                                                                                                   content: this.content
                                                                                                                               }))) : (this.referrer.$el.find("#corpRate").prop("checked", !0).trigger("change"), this.formData.set({
                                                                                                                                   corporateRate: "on",
                                                                                                                                   officialTravel: "on",
                                                                                                                                   checkDiscount: "on"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               }), this.submitRes())
                                                                                                                           },
                                                                                                                           leisureHandler: function() {
                                                                                                                               this.referrer.$el.find("#leisure-cdp-indicator").prop("checked", !0);
                                                                                                                               this.referrer.$el.find("#corpRate").prop("checked", !1).trigger("change");
                                                                                                                               this.referrer.$el.find("#official-travel").prop("checked", !1).trigger("change");
                                                                                                                               this.formData.set({
                                                                                                                                   corporateRate: "",
                                                                                                                                   officialTravel: ""
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.metaData.set({
                                                                                                                                   travelType: "L"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               a.trackCdpOptions("leisure-overlay-button");
                                                                                                                               this.submitRes()
                                                                                                                           },
                                                                                                                           contractRateYesHandler: function() {
                                                                                                                               this.referrer.$el.find("#corp-rate-yes").prop("checked", !0).trigger("change");
                                                                                                                               this.formData.set({
                                                                                                                                   corporateRate: "on",
                                                                                                                                   corpRate: "yes"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               a.trackCdpOptions("corp-rate-yes-overlay-button");
                                                                                                                               this.submitRes()
                                                                                                                           },
                                                                                                                           contractRateNoHandler: function() {
                                                                                                                               this.referrer.$el.find("#corp-rate-no").prop("checked", !0).trigger("change");
                                                                                                                               this.formData.set({
                                                                                                                                   corporateRate: "",
                                                                                                                                   corpRate: "no"
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               a.trackCdpOptions("corp-rate-no-overlay-button");
                                                                                                                               this.submitRes()
                                                                                                                           },
                                                                                                                           submitRes: function() {
                                                                                                                               this.closeOverlay();
                                                                                                                               this.metaData.get("bookAsMember") ? this.referrer.memberSubmit() : !this.metaData.get("loggedIn") && this.formData.get("memberSelectedCdp") && "" !== this.formData.get("memberSelectedCdp") ? this.referrer.bookAsMemberSubmitRes() : this.referrer.bookAsGuestSubmitRes()
                                                                                                                           },
                                                                                                                           closeOverlay: function() {
                                                                                                                               this.lBoxRef.inUse && this.lBoxRef.closeOverlay()
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.referrer = this.model = this.lBoxRef = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/itinerary-geo-preferences-overlay-view", "jquery underscore backbone utils/utils-proxy config/app-config utils/sessionhelper reservation/config reservation/process-info/core/model/process-model reservation/common/retry/core/view/retry-view reservation/process-config/core/reservation-constants".split(" "), function(a, b, c) {
                                                                                                                       return c.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.referrer = this.options.referrer;
                                                                                                                               this.lBoxRef = this.options.lBoxRef;
                                                                                                                               this.viewHelper = this.options.viewHelper
                                                                                                                           },
                                                                                                                           events: {
                                                                                                                               "click #geo-preferences-btn": "submitResWithItnInfo"
                                                                                                                           },
                                                                                                                           submitResWithItnInfo: function() {
                                                                                                                               this.viewHelper.geoPreferencesSubmitWithItnInfo(this.referrer, this.lBoxRef)
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(b.template(a(this.template).html(), {
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/member-info-view", "jquery underscore backbone reservation/common/retry/core/view/retry-view reservation/itinerary/core/model/member-info-model utils/utils-proxy config/app-config utils/sessionhelper reservation/config reservation/process-config/core/reservation-constants reservation/utils/core/reservation-utils utils/utils reservation/process-info/core/model/process-model".split(" "), function(f, l, h, n, p, i, g, j, q, e, k, m, o) {
                                                                                                                       return h.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.referrer =
                                                                                                                                   this.options.referrer;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.formData = this.model.get("formData");
                                                                                                                               this.attemptCount = 0
                                                                                                                           },
                                                                                                                           events: {
                                                                                                                               "click #member-info-submit": "submitMemberNumber",
                                                                                                                               "click #member-info-continue": "submitMemberNumber",
                                                                                                                               "keyup #member-number": "enableButton"
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(l.template(this.template, {
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           enableButton: function() {
                                                                                                                               "" != f.trim(this.$el.find("#member-number").val()) ? this.$el.find("#member-info-submit").removeAttr("disabled",
                                                                                                                                   "disabled") : this.$el.find("#member-info-submit").attr("disabled", "disabled")
                                                                                                                           },
                                                                                                                           submitMemberNumber: function() {
                                                                                                                               var a = this;
                                                                                                                               a.$el.find(".invalidText").hide();
                                                                                                                               if (3 <= a.attemptCount) a.referrer.itinerary.memberNumber = "", a.formData.set("no1ClubNumber", "");
                                                                                                                               else {
                                                                                                                                   var c = f.trim(this.$el.find("#member-number").val());
                                                                                                                                   a.referrer.itinerary.memberNumber = c;
                                                                                                                                   a.formData.set("no1ClubNumber", c)
                                                                                                                               }
                                                                                                                               c = new h.Model(a.referrer);
                                                                                                                               m.clearErrorMessage(a.$el.find("#error-list"));
                                                                                                                               n.saveWithRetry(c, {}, {
                                                                                                                                   url: g.config.rootContext + "/rest/hertz/v2/reservations/makeReservation",
                                                                                                                                   type: "POST",
                                                                                                                                   beforeSend: function() {
                                                                                                                                       g.config.isApp ? htz.utils.Spinner.spin() : i.getSpinner().spin()
                                                                                                                                   },
                                                                                                                                   success: function(c) {
                                                                                                                                       g.config.isApp ? htz.utils.Spinner.stop() : i.getSpinner().stop();
                                                                                                                                       j.setItem(e.ITINERARY_DATA, JSON.stringify(a.model));
                                                                                                                                       j.setItem(e.SELECTED_VEHICLE_INFO, JSON.stringify(a.referrer.vehicle));
                                                                                                                                       k.goToPageFromResData(c)
                                                                                                                                   },
                                                                                                                                   error: function(c, b) {
                                                                                                                                       var d, f = {
                                                                                                                                           messages: [a.content.reservationErrors.genericErrorContent.technicalDifficulties]
                                                                                                                                       };
                                                                                                                                       g.config.isApp ? htz.utils.Spinner.stop() : i.getSpinner().stop();
                                                                                                                                       try {
                                                                                                                                           b =
                                                                                                                                               JSON.parse(b.responseText)
                                                                                                                                       } catch (j) {}
                                                                                                                                       if (b && b.data && b.data.meta && b.data.meta.target !== o.getStep()) k.clearSessionStorage([e.VEHICLES_DATA, e.EXTRAS_DATA, e.ITINERARY_INFO_DATA, e.RATE_DETAILS_DATA]), d = new h.Model(b), k.goToPageFromResData(d);
                                                                                                                                       else {
                                                                                                                                           d = b.message;
                                                                                                                                           if (!d || l.isEmpty(d)) d = f;
                                                                                                                                           a.attemptCount++;
                                                                                                                                           3 <= a.attemptCount ? (a.$el.find(".invalidMember").hide(), a.$el.find(".exceed").show()) : m.displayAllErrors(d, a.$el.find("#error-list"))
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.referrer = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/location-closed-overlay-view", "jquery underscore backbone utils/utils-proxy reservation/itinerary/core/view/helper/view-helper tools/calendar config/app-config utils/sessionhelper".split(" "), function(b, j, q, v, e, r, k, n) {
                                                                                                                       var o = function(a) {
                                                                                                                               var a = a.split(":").join(""),
                                                                                                                                   b = 4 > a.length ? 1 : 2,
                                                                                                                                   c = parseInt(a.substring(0, b), 10),
                                                                                                                                   l = (c + 11) % 12 + 1,
                                                                                                                                   c = 11 < c ? "PM" : "AM",
                                                                                                                                   a = a.substring(b);
                                                                                                                               "" === a && (a = "00");
                                                                                                                               return l + ":" + a + " " + c
                                                                                                                           },
                                                                                                                           s = function() {
                                                                                                                               var a = "phone" === k.config.deviceGroup ? b("#itn-date-time-overlay") :
                                                                                                                                   null,
                                                                                                                                   f = n.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE) && "phone" !== k.config.deviceGroup ? parseInt(n.getItem(htz.res.config.ReservationConstants.CALENDAR_MODE)) : 2;
                                                                                                                               new r({
                                                                                                                                   mode: f,
                                                                                                                                   euro: this.formData.get("militaryClock"),
                                                                                                                                   start: this.$el.find("#pickup-date-overlay"),
                                                                                                                                   end: this.$el.find("#dropoff-date-overlay"),
                                                                                                                                   startText: this.$el.find("#pickup-date-box-overlay"),
                                                                                                                                   endText: this.$el.find("#dropoff-date-box-overlay"),
                                                                                                                                   target: a,
                                                                                                                                   content: this.content,
                                                                                                                                   calledWithinOverlay: !0,
                                                                                                                                   syncPickupAndDropoff: function(a,
                                                                                                                                       f, d, h) {
                                                                                                                                       window.cal = h;
                                                                                                                                       "#pickup-date-overlay" === f ? (d && 1 === d && (b("#pickup-date-overlay").val(a).trigger("change"), b("#pickup-date-box-overlay .value").text(a), b("#dropoff-date").attr("value", b("#dropoff-date-overlay").val()).trigger("change"), b("#dropoff-date-box .value").html(b("#dropoff-date-overlay").val())), b("#pickup-date").attr("value", a).trigger("change"), b("#pickup-date-box .value").html(a)) : "#dropoff-date-overlay" === f && (b("#dropoff-date").attr("value", a).trigger("change"), b("#dropoff-date-box .value").html(a));
                                                                                                                                       h.calendar.remove()
                                                                                                                                   }
                                                                                                                               });
                                                                                                                               a = f = null
                                                                                                                           },
                                                                                                                           p = function(a, b, c, l) {
                                                                                                                               var d = [],
                                                                                                                                   h, g, e;
                                                                                                                               j.each(a, function(a) {
                                                                                                                                   "30" == (a.openTime + "").slice(-2) && (a.openTime += 20);
                                                                                                                                   2400 > a.closeTime && (a.closeTime += 50);
                                                                                                                                   for (h = a.openTime; h < a.closeTime; h += 50) {
                                                                                                                                       var c;
                                                                                                                                       c = h;
                                                                                                                                       "80" === (h + "").slice(-2) && (c += 20);
                                                                                                                                       e = (c + "").slice(-2);
                                                                                                                                       "50" === e ? e = "30" : "0" === e && (e = "00");
                                                                                                                                       g = c + "";
                                                                                                                                       g = g.substring(0, g.length - 2);
                                                                                                                                       1 === g.length ? g = "0" + g : "" === g && (g = "00");
                                                                                                                                       c = 1 !== l ? o(g + ":" + e) : g + ":" + e;
                                                                                                                                       d.push([g + ":" + e, c])
                                                                                                                                   }
                                                                                                                               });
                                                                                                                               return [
                                                                                                                                   ["", c.homePage.locationClosedProcess.selectTime]
                                                                                                                               ].concat(d)
                                                                                                                           },
                                                                                                                           i =
                                                                                                                           function(a, b, c, e) {
                                                                                                                               var d = c.homePage.monthDayContent,
                                                                                                                                   c = [d.shortFormJan, d.shortFormFeb, d.shortFormMar, d.shortFormApr, d.shortFormMay, d.shortFormJun, d.shortFormJul, d.shortFormAug, d.shortFormSep, d.shortFormOct, d.shortFormNov, d.shortFormDec],
                                                                                                                                   d = [d.shortFormSun, d.shortFormMon, d.shortFormTue, d.shortFormWed, d.shortFormThu, d.shortFormFri, d.shortFormSat],
                                                                                                                                   a = new Date(a),
                                                                                                                                   b = 1 === e ? b : o(b);
                                                                                                                               return d[a.getDay()] + " " + c[a.getMonth()] + " " + a.getDate() + ", " + a.getFullYear() + " - " + b
                                                                                                                           },
                                                                                                                           t = function(a) {
                                                                                                                               var b = [];
                                                                                                                               a.pickupLocation.isOpen ||
                                                                                                                                   b.push(function(a) {
                                                                                                                                       return a.homePage.locationClosedProcess.locationClosedAtPickup
                                                                                                                                   });
                                                                                                                               a.dropoffLocation.isOpen || b.push(function(a) {
                                                                                                                                   return a.homePage.locationClosedProcess.locationClosedAtReturn
                                                                                                                               });
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           u = function(a) {
                                                                                                                               var f = "pickupDay",
                                                                                                                                   c = "pickupTime",
                                                                                                                                   l = this;
                                                                                                                               this.locations.pickupLocation.isOpen && (f = "dropoffDay", c = "dropoffTime");
                                                                                                                               this.availableLocations = function(a, c, b) {
                                                                                                                                   l.formData.get("militaryClock") && (c = c.split("/"), c = [c[1], c[0], c[2]].join("/"));
                                                                                                                                   var f = new Date(c),
                                                                                                                                       i = parseInt(b.split(":").join(""), 10),
                                                                                                                                       m = [],
                                                                                                                                       k;
                                                                                                                                   j.every(a, function(a) {
                                                                                                                                       "undefined" !== typeof a.gddHours && 0 < a.gddHours[0].length ? "undefined" !== typeof a.privateFlightOnly && !a.privateFlightOnly && (k = e.availableHoursOfDay(a.gddHours[0], f), e.locationOpenAtRequestedTime(k, i, a.kind) && m.push(a)) : m.push(a);
                                                                                                                                       return 12 > m.length
                                                                                                                                   }.bind(this));
                                                                                                                                   return m
                                                                                                                               }(a.data.model, this.formData.get(f), this.formData.get(c));
                                                                                                                               b(".lb-header section").html(this.options.content.homePage.locationClosedProcess.chooseOpenLocation);
                                                                                                                               a = b("#change-location-overlay-tpl").html();
                                                                                                                               this.$el.find(".location-content").html(j.template(a, {
                                                                                                                                   content: this.content,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   pickupLocation: this.locations.pickupLocation.details,
                                                                                                                                   dropoffTime: i(this.formData.attributes.dropoffDayStandard, this.formData.attributes.dropoffTime, this.content, this.formData.attributes.militaryClock),
                                                                                                                                   pickupTime: i(this.formData.attributes.pickupDayStandard, this.formData.attributes.pickupTime, this.content, this.formData.attributes.militaryClock),
                                                                                                                                   dropoffLocation: this.locations.dropoffLocation.details,
                                                                                                                                   closedLocations: function(a, c) {
                                                                                                                                       var b = [];
                                                                                                                                       a.pickupLocation.isOpen ||
                                                                                                                                           b.push(c.homePage.locationClosedProcess.changePickupLocation);
                                                                                                                                       a.dropoffLocation.isOpen || b.push(c.homePage.locationClosedProcess.changeReturnLocation);
                                                                                                                                       return b.join(" <br/> ")
                                                                                                                                   }(this.locations, this.content),
                                                                                                                                   locations: this.locations,
                                                                                                                                   results: this.availableLocations,
                                                                                                                                   minLocations: 3
                                                                                                                               }))
                                                                                                                           };
                                                                                                                       return q.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData = this.options.metaData;
                                                                                                                               this.formData = this.options.formData;
                                                                                                                               this.locations = this.options.locations;
                                                                                                                               this.template = b("#location-closed-overlay-tpl").html();
                                                                                                                               this.submitRes = this.options.callback
                                                                                                                           },
                                                                                                                           events: {
                                                                                                                               "click #change-my-time-submit": "changeMyTime",
                                                                                                                               "click #choose-another-location-submit": "chooseAnotherLocation",
                                                                                                                               "click .chooseAnotherLocation": "locationSelected",
                                                                                                                               "click #change-my-time": "changeMyTime",
                                                                                                                               "click #load-more": "loadMoreLocations"
                                                                                                                           },
                                                                                                                           chooseAnotherLocation: function(a) {
                                                                                                                               e.trackLocationClosedOverlay("ChooseAnOpenLocationSelected");
                                                                                                                               a.preventDefault();
                                                                                                                               a = this.locations.pickupLocation.details.extendedOAGCode;
                                                                                                                               this.locations.dropoffLocation.isOpen || (a = this.locations.dropoffLocation.details.extendedOAGCode);
                                                                                                                               "undefined" !== typeof a && e.getLocationsNearBy(a, u.bind(this), {
                                                                                                                                   fields: "gddHours privateFlightOnly locationName hours extendedOAGCode city state country_name".split(" ")
                                                                                                                               })
                                                                                                                           },
                                                                                                                           locationSelected: function(a) {
                                                                                                                               a.preventDefault();
                                                                                                                               a = b(a.target).attr("data-index");
                                                                                                                               a = this.availableLocations[a];
                                                                                                                               this.locations.dropoffLocation.details.extendedOAGCode === this.locations.pickupLocation.details.extendedOAGCode ? (this.formData.set("pickupHiddenEOAG", a.extendedOAGCode, {
                                                                                                                                       silent: !0
                                                                                                                                   }), b("#pickup-location").attr("value", a.locationName),
                                                                                                                                   this.formData.set("pickupLocation", a.locationName, {
                                                                                                                                       silent: !0
                                                                                                                                   })) : this.locations.dropoffLocation.isOpen ? (this.formData.set("pickupHiddenEOAG", a.extendedOAGCode, {
                                                                                                                                   silent: !0
                                                                                                                               }), b("#pickup-location").attr("value", a.locationName), this.formData.set("pickupLocation", a.locationName, {
                                                                                                                                   silent: !0
                                                                                                                               })) : (this.formData.set("dropoffHiddenEOAG", a.extendedOAGCode, {
                                                                                                                                   silent: !0
                                                                                                                               }), b("#dropoff-location").attr("value", a.locationName), this.formData.set("dropoffLocation", a.locationName, {
                                                                                                                                   silent: !0
                                                                                                                               }));
                                                                                                                               e.trackLocationClosedOverlay("NewLocationSelected");
                                                                                                                               this.submitRes(this.formData)
                                                                                                                           },
                                                                                                                           loadMoreLocations: function(a) {
                                                                                                                               a.preventDefault();
                                                                                                                               this.$el.find(".location-result").show();
                                                                                                                               b(a.target).hide()
                                                                                                                           },
                                                                                                                           changeMyTime: function(a) {
                                                                                                                               "undefined" !== typeof a && a.preventDefault();
                                                                                                                               e.trackLocationClosedOverlay("ChangeMyTimeSelected");
                                                                                                                               var f = function(a, b) {
                                                                                                                                       e.pickupAndDropoffTimesAreValid(a.attributes, b.attributes, function(a) {
                                                                                                                                           this.locations = a;
                                                                                                                                           this.changeMyTime()
                                                                                                                                       }.bind(this))
                                                                                                                                   },
                                                                                                                                   a = b("#change-my-time-overlay-tpl").html();
                                                                                                                               b(".lb-header section").html(this.content.homePage.locationClosedProcess.changeDateTime);
                                                                                                                               this.$el.find(".location-content").html(j.template(a, {
                                                                                                                                   content: this.content,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   locations: this.locations,
                                                                                                                                   pickupLocation: this.options.locations.pickupLocation.details,
                                                                                                                                   pickupHours: p(this.locations.pickupLocation.hours, "pickup", this.content, this.formData.attributes.militaryClock),
                                                                                                                                   dropoffHours: p(this.locations.dropoffLocation.hours, "dropoff", this.content, this.formData.attributes.militaryClock),
                                                                                                                                   dropoffTime: i(this.formData.attributes.dropoffDayStandard, this.formData.attributes.dropoffTime,
                                                                                                                                       this.content, this.formData.attributes.militaryClock),
                                                                                                                                   pickupTime: i(this.formData.attributes.pickupDayStandard, this.formData.attributes.pickupTime, this.content, this.formData.attributes.militaryClock),
                                                                                                                                   dropoffLocation: this.options.locations.dropoffLocation.details
                                                                                                                               }));
                                                                                                                               s.bind(this)();
                                                                                                                               e.pickupAndDropoffTimesAreValid(this.formData.attributes, this.metaData.attributes, function(a) {
                                                                                                                                   var b = this.$el.find("#change-my-time-submit");
                                                                                                                                   e.locationsOKToSubmit(a) ? b.addClass("primary").removeClass("disabled") : b.addClass("disabled").removeClass("primary")
                                                                                                                               }.bind(this));
                                                                                                                               this.$el.find("#pickup_time_overlay").change(function(a) {
                                                                                                                                   a = b(a.target).val();
                                                                                                                                   "" !== a && (b('#pickup-time option[value="' + a + '"]').prop("selected", !0), this.formData.set("pickupTime", a, {
                                                                                                                                       silent: !0
                                                                                                                                   }), f.bind(this)(this.formData, this.metaData))
                                                                                                                               }.bind(this));
                                                                                                                               this.$el.find("#dropoff_time_overlay").change(function(a) {
                                                                                                                                   a = b(a.target).val();
                                                                                                                                   "" !== a && (b('#dropoff-time option[value="' + a + '"]').prop("selected", !0), this.formData.set("dropoffTime", a, {
                                                                                                                                       silent: !0
                                                                                                                                   }), f.bind(this)(this.formData, this.metaData))
                                                                                                                               }.bind(this));
                                                                                                                               b("#pickup-date-overlay").change(function(a) {
                                                                                                                                   a =
                                                                                                                                       b(a.target).val();
                                                                                                                                   "" !== a && (this.formData.set("pickupDay", a, {
                                                                                                                                       silent: !0
                                                                                                                                   }), this.formData.set("pickupDayStandard", a, {
                                                                                                                                       silent: !0
                                                                                                                                   }), f.bind(this)(this.formData, this.metaData))
                                                                                                                               }.bind(this));
                                                                                                                               b("#dropoff-date-overlay").change(function(a) {
                                                                                                                                   a = b(a.target).val();
                                                                                                                                   "" !== a && (this.formData.set("dropoffDay", a, {
                                                                                                                                       silent: !0
                                                                                                                                   }), this.formData.set("dropoffDayStandard", a, {
                                                                                                                                       silent: !0
                                                                                                                                   }), f.bind(this)(this.formData, this.metaData))
                                                                                                                               }.bind(this));
                                                                                                                               this.$el.find(".location-selection-details .show-pickup-times").click(function() {
                                                                                                                                   this.$el.find("#date-time-selection-pickup").show();
                                                                                                                                   this.$el.find("#itn-date-time-overlay .date-time").show();
                                                                                                                                   this.$el.find(".location-selection-details .show-pickup-times").hide()
                                                                                                                               }.bind(this));
                                                                                                                               this.$el.find(".location-selection-details .show-dropoff-times").click(function() {
                                                                                                                                   this.$el.find("#date-time-selection-dropoff").show();
                                                                                                                                   this.$el.find(".location-selection-details .show-dropoff-times").hide()
                                                                                                                               }.bind(this));
                                                                                                                               this.$el.find("#date-time-selection-dropoff .value, #date-time-selection-dropoff .date-cal").click(function() {
                                                                                                                                   this.$el.find("#date-time-selection-pickup").show();
                                                                                                                                   this.$el.find("#itn-date-time-overlay .date-time").hide();
                                                                                                                                   this.$el.find(".calendar").show()
                                                                                                                               }.bind(this));
                                                                                                                               a = b("#pickup-time select").val();
                                                                                                                               this.$el.find("#pickup_time_overlay").val(a);
                                                                                                                               a = b("#dropoff-time select").val();
                                                                                                                               this.$el.find("#dropoff_time_overlay").val(a);
                                                                                                                               this.$el.find("#change-my-time-submit").click(function(a) {
                                                                                                                                   a.preventDefault();
                                                                                                                                   e.pickupAndDropoffTimesAreValid(this.formData.attributes, this.metaData.attributes, function(a) {
                                                                                                                                       e.locationsOKToSubmit(a) && this.submitRes(this.formData)
                                                                                                                                   }.bind(this))
                                                                                                                               }.bind(this));
                                                                                                                               this.locations.pickupLocation.isOpen && this.$el.find("#date-time-selection-pickup").hide();
                                                                                                                               this.locations.dropoffLocation.isOpen && this.$el.find("#date-time-selection-dropoff").hide()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(j.template(this.template, {
                                                                                                                                   content: this.content,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   pickupLocation: this.locations.pickupLocation.details,
                                                                                                                                   dropoffTime: i(this.formData.attributes.dropoffDayStandard, this.formData.attributes.dropoffTime, this.content, this.formData.attributes.militaryClock),
                                                                                                                                   pickupTime: i(this.formData.attributes.pickupDayStandard,
                                                                                                                                       this.formData.attributes.pickupTime, this.content, this.formData.attributes.militaryClock),
                                                                                                                                   dropoffLocation: this.locations.dropoffLocation.details,
                                                                                                                                   closedLocationMessages: t(this.locations)
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/model/member-info-model", ["jquery", "underscore", "backbone"], function(c, d, b) {
                                                                                                                       return b.Model.extend({
                                                                                                                           defaults: {
                                                                                                                               memberId: ""
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.constructor.__super__.initialize.apply(this, arguments)
                                                                                                                           },
                                                                                                                           parseModel: function(a) {
                                                                                                                               a.itinerary && this.set("itinerary", a.itinerary);
                                                                                                                               a.vehicle && this.set("vehicle", a.vehicle)
                                                                                                                           },
                                                                                                                           url: "/rentacar/rest/hertz/v2/reservations/makeReservation"
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/model/member-preferences-model", ["backbone"], function(b) {
                                                                                                                       return b.Model.extend({
                                                                                                                           parse: function(a) {
                                                                                                                               a && a.data && ("undefined" !== a.data.geoPreferencesSet && this.set("geoPreferencesSet", a.data.geoPreferencesSet), "undefined" !== a.data.goldAnytimeEligible && this.set("goldAnytimeEligible", a.data.goldAnytimeEligible))
                                                                                                                           },
                                                                                                                           url: "/rentacar/rest/hertz/v2/member/preferences"
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/process-info/core/model/process-model", ["jquery", "reservation/process-config/core/reservation-constants"], function(f, b) {
                                                                                                                       var e = "",
                                                                                                                           c = "",
                                                                                                                           d = isInProcess = !1,
                                                                                                                           g = "itinerary vehicles extras review-and-book non-bookable confirmation review cancel-confirmation search online-checkin-confirmation counter-bypass-confirmation reservation-list".split(" ");
                                                                                                                       return {
                                                                                                                           setStep: function(a) {
                                                                                                                               0 <= f.inArray(a, g) && (e = a)
                                                                                                                           },
                                                                                                                           getStep: function() {
                                                                                                                               return e
                                                                                                                           },
                                                                                                                           setModify: function(a) {
                                                                                                                               d = a
                                                                                                                           },
                                                                                                                           isModify: function() {
                                                                                                                               return d
                                                                                                                           },
                                                                                                                           checkAndStartProcess: function() {
                                                                                                                               var a =
                                                                                                                                   isInProcess;
                                                                                                                               isInProcess = !0;
                                                                                                                               return a
                                                                                                                           },
                                                                                                                           hasProcessStarted: function() {
                                                                                                                               return isInProcess
                                                                                                                           },
                                                                                                                           addToFlow: function(a) {
                                                                                                                               if (a) {
                                                                                                                                   switch (a) {
                                                                                                                                       case b.ITINERARY:
                                                                                                                                           a = "I";
                                                                                                                                           break;
                                                                                                                                       case b.VEHICLES:
                                                                                                                                           a = "V";
                                                                                                                                           break;
                                                                                                                                       case b.EXTRAS:
                                                                                                                                           a = "E";
                                                                                                                                           break;
                                                                                                                                       case b.REVIEW_AND_BOOK:
                                                                                                                                           a = "B";
                                                                                                                                           break;
                                                                                                                                       case b.CONFIRMATION:
                                                                                                                                           a = "C";
                                                                                                                                           break;
                                                                                                                                       case b.REVIEW:
                                                                                                                                           a = "R";
                                                                                                                                           break;
                                                                                                                                       case b.CANCEL_CONFIRMATION:
                                                                                                                                           a = "D"
                                                                                                                                   }
                                                                                                                                   a && (d && (a = "M" + a), c += a)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           getFlow: function() {
                                                                                                                               return c
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/helper/view-helper", "jquery underscore backbone config/app-config utils/utils-proxy utils/sessionhelper helpers/resource-loader reservation/process-config/core/reservation-constants reservation/process-info/core/model/process-model reservation/common/retry/core/view/retry-view reservation/config reservation/itinerary/core/model/member-preferences-model".split(" "), function(d, i, y, h, j, g, u, k, r, v, w, x) {
                                                                                                                       function p() {
                                                                                                                           null === q && (q = j.getLightbox());
                                                                                                                           return q
                                                                                                                       }
                                                                                                                       var q = null,
                                                                                                                           s, t = {};
                                                                                                                       s = {
                                                                                                                           retrieve: function(a) {
                                                                                                                               var c = a.countryCode;
                                                                                                                               a.memberNumber && (c += "_" + a.memberNumber);
                                                                                                                               return t[c] || null
                                                                                                                           },
                                                                                                                           store: function(a) {
                                                                                                                               var c = a.get("destinationCountryCode"),
                                                                                                                                   b = a.get("memberNumber");
                                                                                                                               b && (c += "_" + b);
                                                                                                                               t[c] = a
                                                                                                                           }
                                                                                                                       };
                                                                                                                       return {
                                                                                                                           getDestinationData: function(a, c) {
                                                                                                                               var b = a.attributes || a,
                                                                                                                                   e = "on" === b.returnAtDifferentLocationCheckbox && b.dropoffHiddenEOAG && b.pickupHiddenEOAG && b.dropoffHiddenEOAG !== b.pickupHiddenEOAG;
                                                                                                                               if (!b || !b.pickupHiddenEOAG) c.reject();
                                                                                                                               else {
                                                                                                                                   var f = function(a, b) {
                                                                                                                                           this.getRentalLocationDetails(a, function(a) {
                                                                                                                                                   b.resolve(a.data)
                                                                                                                                               },
                                                                                                                                               function() {
                                                                                                                                                   b.resolve()
                                                                                                                                               })
                                                                                                                                       }.bind(this),
                                                                                                                                       o = d.Deferred();
                                                                                                                                   e ? (e = d.Deferred(), d.when(o, e).done(function(a, b) {
                                                                                                                                       !a || !b ? c.reject() : c.resolve({
                                                                                                                                           isOneWay: !0,
                                                                                                                                           pickup: a,
                                                                                                                                           dropoff: b
                                                                                                                                       })
                                                                                                                                   }), f(b.dropoffHiddenEOAG, e)) : o.done(function(a) {
                                                                                                                                       a ? c.resolve({
                                                                                                                                           isOneWay: !1,
                                                                                                                                           pickup: a,
                                                                                                                                           dropoff: null
                                                                                                                                       }) : c.reject()
                                                                                                                                   });
                                                                                                                                   f(b.pickupHiddenEOAG, o)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           getMemberPreferences: function(a) {
                                                                                                                               if (a && a.destinationCountryCode) {
                                                                                                                                   var c = s.retrieve(a);
                                                                                                                                   if (c) return c;
                                                                                                                                   var b = new x;
                                                                                                                                   j.getSpinner().spin();
                                                                                                                                   b.save(a, {
                                                                                                                                       async: !1,
                                                                                                                                       error: function(a, c) {
                                                                                                                                           if (c && c.responseText) {
                                                                                                                                               var o;
                                                                                                                                               try {
                                                                                                                                                   o =
                                                                                                                                                       JSON.parse(c.responseText)
                                                                                                                                               } catch (n) {}
                                                                                                                                               o && o.resultInfo && 400 == o.resultInfo.resultCode ? b.set({
                                                                                                                                                   goldAnytimeEligible: !1
                                                                                                                                               }, {
                                                                                                                                                   silent: !0
                                                                                                                                               }) : b = null
                                                                                                                                           } else b = null
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                                   return b
                                                                                                                               }
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           storeMemberPrefs: function(a) {
                                                                                                                               s.store(a)
                                                                                                                           },
                                                                                                                           isEligibleMemberLevel: function(a) {
                                                                                                                               return !(!a.attributes.loggedIn || !a.attributes.enableTA && a.attributes.applicant)
                                                                                                                           },
                                                                                                                           checkLocationsAndSubmit: function(a, c, b, e) {
                                                                                                                               var f = this;
                                                                                                                               this.pickupAndDropoffTimesAreValid(a.attributes, c.attributes, function(a) {
                                                                                                                                   f.locationsOKToSubmit(a) ? b && "function" === typeof b &&
                                                                                                                                       b() : e && "function" === typeof e && e()
                                                                                                                               })
                                                                                                                           },
                                                                                                                           parseErrorObject: function(a, c) {
                                                                                                                               var b = null;
                                                                                                                               if (a) {
                                                                                                                                   var e = JSON.parse(a);
                                                                                                                                   c && e && d.isArray(e.message.errorData) ? b = e.message.errorData : !c && (e && d.isArray(e.errorData)) && (b = e.errorData)
                                                                                                                               }
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           locationPopupMessage: function(a, c, b, e) {
                                                                                                                               htz.popup = {
                                                                                                                                   oag: b,
                                                                                                                                   locType: c
                                                                                                                               };
                                                                                                                               u.load({
                                                                                                                                   content: htz.config.apiDomain + "/rest/content/subSystemId/" + htz.config.subSystemId + "/dialect/" + htz.config.dialect + "/deviceGroup/all/section/integrated/subSection/location/folder/popup/file/popupPage",
                                                                                                                                   callback: function(b) {
                                                                                                                                       require(["reservation/special-instructions/core/presenter/special-instructions-presenter"],
                                                                                                                                           function(c) {
                                                                                                                                               c.showSpecialInsPopup(a, b.content, e)
                                                                                                                                           })
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           closeLightBox: function() {
                                                                                                                               var a = p();
                                                                                                                               a && a.closeOverlay()
                                                                                                                           },
                                                                                                                           storeLocationOag: function(a, c) {
                                                                                                                               var b = g.getItem("oagCodes"),
                                                                                                                                   b = "undefined" !== typeof b ? JSON.parse(b) : [];
                                                                                                                               "undefined" !== typeof a && (-1 === i.indexOf(b, a) && b.push(a), 5 < b.length && g.removeItem(b.shift()), g.setItem("oagCodes", JSON.stringify(b)), g.setItem(a, JSON.stringify(c)))
                                                                                                                           },
                                                                                                                           getRentalLocationDetails: function(a, c, b) {
                                                                                                                               var e = this,
                                                                                                                                   f = g.getItem(a);
                                                                                                                               "undefined" !== typeof f && "undefined" !== typeof c ? c(JSON.parse(f)) :
                                                                                                                                   d.ajax({
                                                                                                                                       async: !0,
                                                                                                                                       dataType: "jsonp",
                                                                                                                                       cache: !1,
                                                                                                                                       url: h.config.apiDomain + "/rest/location/oag/" + a,
                                                                                                                                       timeout: 5E3,
                                                                                                                                       success: function(b) {
                                                                                                                                           b.data && e.storeLocationOag(a, b);
                                                                                                                                           c && c(b)
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           b && b({
                                                                                                                                               data: {}
                                                                                                                                           })
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                           },
                                                                                                                           getLocationsNearBy: function(a, c, b) {
                                                                                                                               b = i.extend({
                                                                                                                                   getCount: 125,
                                                                                                                                   fields: []
                                                                                                                               }, b || {});
                                                                                                                               b.fields = b.fields.join(",");
                                                                                                                               j.getSpinner().spin();
                                                                                                                               d.ajax({
                                                                                                                                   async: !0,
                                                                                                                                   dataType: "jsonp",
                                                                                                                                   cache: !1,
                                                                                                                                   data: b,
                                                                                                                                   url: h.config.apiDomain + "/rest/location/nearBy/oag/" + a,
                                                                                                                                   error: function() {
                                                                                                                                       c({
                                                                                                                                           data: {
                                                                                                                                               model: []
                                                                                                                                           }
                                                                                                                                       })
                                                                                                                                   },
                                                                                                                                   success: function(a) {
                                                                                                                                       c(a)
                                                                                                                                   },
                                                                                                                                   complete: function() {
                                                                                                                                       j.getSpinner().stop()
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           availableHoursOfDay: function(a, c) {
                                                                                                                               var b = "SUNDAY MONDAY TUESDAY WEDNESDAY THURSDAY FRIDAY SATURDAY".split(" "),
                                                                                                                                   e = [].concat(a),
                                                                                                                                   f = function(a) {
                                                                                                                                       var b = a.substr(5, 2);
                                                                                                                                       try {
                                                                                                                                           b = parseInt(b), b -= 1, 0 > b && (b = 0)
                                                                                                                                       } catch (c) {}
                                                                                                                                       return new Date(a.substr(0, 4), b, a.substr(8, 2), a.substr(11, 2), a.substr(14, 2), a.substr(17, 2))
                                                                                                                                   };
                                                                                                                               i.each(e, function(a) {
                                                                                                                                   a.effectiveDate = f(a.effectiveDate);
                                                                                                                                   a.expiryDate = f(a.expiryDate)
                                                                                                                               });
                                                                                                                               return e = i.filter(e, function(a) {
                                                                                                                                   return a.effectiveDate <= c && c <= a.expiryDate && b[c.getDay()] === a.dayOfWeek.toUpperCase()
                                                                                                                               })
                                                                                                                           },
                                                                                                                           locationOpenAtRequestedTime: function(a, c, b, e) {
                                                                                                                               return e && ("pickup" === b && !0 === e.afterHoursPickup || "dropoff" === b && !0 === e.afterHoursDrop) ? !0 : void 0 !== i.find(a, function(a) {
                                                                                                                                   return c >= a.openTime && c <= a.closeTime
                                                                                                                               })
                                                                                                                           },
                                                                                                                           rentalLocationIsOpen: function(a, c, b, e, f, d) {
                                                                                                                               var n = new Date(c),
                                                                                                                                   l = !0,
                                                                                                                                   h = parseInt(b.split(":").join(""), 10),
                                                                                                                                   m = {},
                                                                                                                                   g = [];
                                                                                                                               j.getSpinner().spin();
                                                                                                                               c = function(a) {
                                                                                                                                   "undefined" === typeof a || a.message || (m = a.data, f && m.optGoldAnytime ? l = !0 : m && "undefined" !== typeof m.gddHours && 0 < m.gddHours[0].length ? (g = this.availableHoursOfDay(m.gddHours[0],
                                                                                                                                       n), l = this.locationOpenAtRequestedTime(g, h, e, m)) : l = !0);
                                                                                                                                   j.getSpinner().stop();
                                                                                                                                   d({
                                                                                                                                       isOpen: l,
                                                                                                                                       details: m,
                                                                                                                                       hours: g,
                                                                                                                                       kind: e
                                                                                                                                   })
                                                                                                                               };
                                                                                                                               this.getRentalLocationDetails(a, c.bind(this), c.bind(this))
                                                                                                                           },
                                                                                                                           pickupAndDropoffTimesAreValid: function(a, c, b) {
                                                                                                                               var e = function(b) {
                                                                                                                                       return 1 === a.militaryClock ? (b = b.split("/"), b[1] + "/" + b[0] + "/" + b[2]) : b
                                                                                                                                   },
                                                                                                                                   f = {
                                                                                                                                       isOpen: !0,
                                                                                                                                       kind: "pickup",
                                                                                                                                       details: {},
                                                                                                                                       inProgress: !0
                                                                                                                                   },
                                                                                                                                   d = {
                                                                                                                                       isOpen: !0,
                                                                                                                                       kind: "dropoff",
                                                                                                                                       details: {},
                                                                                                                                       inProgress: !0
                                                                                                                                   },
                                                                                                                                   n, l, h = !1,
                                                                                                                                   g = !1,
                                                                                                                                   k = !1,
                                                                                                                                   i = !1,
                                                                                                                                   j = c ? !!c.bookAsMember : !1;
                                                                                                                               "undefined" !== typeof c && "undefined" !==
                                                                                                                                   typeof c.deliveryLocation && (k = c.deliveryLocation, "on" !== a.returnAtDifferentLocationCheckbox && (i = c.deliveryLocation));
                                                                                                                               "undefined" !== typeof c && "undefined" !== typeof c.collectionLocation && (i = c.collectionLocation);
                                                                                                                               a && "undefined" !== typeof a.inpPickupOptGoldAnytime && (h = a.inpPickupOptGoldAnytime);
                                                                                                                               a && "undefined" !== typeof a.inpDropoffOptGoldAnytime && (g = a.inpDropoffOptGoldAnytime);
                                                                                                                               a && (a.dropoffHiddenEOAG && "" !== a.dropoffHiddenEOAG) && (n = a.dropoffHiddenEOAG);
                                                                                                                               a && (a.pickupHiddenEOAG && "" !== a.pickupHiddenEOAG) && (l =
                                                                                                                                   a.pickupHiddenEOAG);
                                                                                                                               l && (!n && "on" !== a.returnAtDifferentLocationCheckbox) && (n = l);
                                                                                                                               h && j ? f.inProgress = !1 : l && !k ? this.rentalLocationIsOpen(l, e(a.pickupDay), a.pickupTime, f.kind, j, function(a) {
                                                                                                                                   f = a;
                                                                                                                                   f.inProgress = !1
                                                                                                                               }.bind(this)) : f.inProgress = !1;
                                                                                                                               g && j ? d.inProgress = !1 : n && !i ? this.rentalLocationIsOpen(n, e(a.dropoffDay), a.dropoffTime, d.kind, j, function(a) {
                                                                                                                                   d = a;
                                                                                                                                   d.inProgress = !1
                                                                                                                               }.bind(this)) : d.inProgress = !1;
                                                                                                                               if ("" === a.pickupDay || "" === a.dropoffDay || "on" === a.returnAtDifferentLocationCheckbox && ("" === a.dropoffHiddenEOAG || "" ===
                                                                                                                                       a.pickupHiddenEOAG)) d.isOpen = !0, d.inProgress = !1, f.isOpen = !0, f.inProgress = !1;
                                                                                                                               f.inProgress || d.inProgress ? setTimeout(function() {
                                                                                                                                   b({
                                                                                                                                       dropoffLocation: d,
                                                                                                                                       pickupLocation: f
                                                                                                                                   })
                                                                                                                               }.bind(this), 2E3) : b({
                                                                                                                                   dropoffLocation: d,
                                                                                                                                   pickupLocation: f
                                                                                                                               })
                                                                                                                           },
                                                                                                                           locationsOKToSubmit: function(a) {
                                                                                                                               return a.dropoffLocation.isOpen && a.pickupLocation.isOpen || a.dropoffLocation.details.extendedOAGCode !== a.pickupLocation.details.extendedOAGCode && !a.dropoffLocation.isOpen && !a.pickupLocation.isOpen ? !0 : !1
                                                                                                                           },
                                                                                                                           trackLocationClosedOverlay: function(a) {
                                                                                                                               "undefined" !==
                                                                                                                               typeof WebTracking && WebTracking.trackPage("location-closed-overlay-" + a)
                                                                                                                           },
                                                                                                                           setGeoLocation: function(a, c, b) {
                                                                                                                               navigator.geolocation && navigator.geolocation.getCurrentPosition(function(e) {
                                                                                                                                   d.ajax({
                                                                                                                                       url: "//www.mapquestapi.com/geocoding/v1/reverse",
                                                                                                                                       dataType: "jsonp",
                                                                                                                                       crossDomain: !0,
                                                                                                                                       data: {
                                                                                                                                           key: decodeURIComponent("Gmjtd%7Cluuan107n9%2C75%3Do5-lz8w0"),
                                                                                                                                           lat: e.coords.latitude,
                                                                                                                                           lng: e.coords.longitude
                                                                                                                                       },
                                                                                                                                       success: function(b) {
                                                                                                                                           var b = b.results[0].locations[0],
                                                                                                                                               b = b.adminArea5 + ", " + b.adminArea3 + ", " + b.adminArea1,
                                                                                                                                               e = d(c[0]),
                                                                                                                                               n = d(c[1]);
                                                                                                                                           "pickup-geo-loc" === a ? (e.val(b), e.trigger("keyup")) : (n.val(b), n.trigger("keyup"))
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           j.getNotifier().alert(b.homePage.geoLocationContent.unknownError)
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               }, function(a) {
                                                                                                                                   switch (a.code) {
                                                                                                                                       case a.TIMEOUT:
                                                                                                                                           p().overlay({
                                                                                                                                               url: "timeout-overlay",
                                                                                                                                               title: b.homePage.geoLocationContent.timeOutTitle,
                                                                                                                                               width: 300,
                                                                                                                                               center: !0
                                                                                                                                           }, i.template(d("#timeout-tpl").html(), {
                                                                                                                                               content: b
                                                                                                                                           }));
                                                                                                                                           break;
                                                                                                                                       case a.POSITION_UNAVAILABLE:
                                                                                                                                           p().overlay({
                                                                                                                                               url: "position-unavailable-overlay",
                                                                                                                                               title: b.homePage.geoLocationContent.positionUnavailableTitle,
                                                                                                                                               width: 300,
                                                                                                                                               center: !0
                                                                                                                                           }, i.template(d("#position-unavailable-tpl").html(), {
                                                                                                                                               content: b
                                                                                                                                           }));
                                                                                                                                           break;
                                                                                                                                       case a.PERMISSION_DENIED:
                                                                                                                                           p().overlay({
                                                                                                                                               url: "permission-denied-overlay",
                                                                                                                                               title: b.homePage.geoLocationContent.permissionDeniedTitle,
                                                                                                                                               width: 300,
                                                                                                                                               center: !0
                                                                                                                                           }, i.template(d("#permission-denied-tpl").html(), {
                                                                                                                                               content: b
                                                                                                                                           }));
                                                                                                                                           break;
                                                                                                                                       case a.UNKNOWN_ERROR:
                                                                                                                                           p().overlay({
                                                                                                                                               url: "unknown-error-overlay",
                                                                                                                                               title: b.homePage.geoLocationContent.unknownError,
                                                                                                                                               width: 300,
                                                                                                                                               center: !0
                                                                                                                                           }, i.template(d("#unknown-error-tpl").html(), {
                                                                                                                                               content: b
                                                                                                                                           }))
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           setFooterPadding: function() {
                                                                                                                               if ("phone" !==
                                                                                                                                   h.config.deviceGroup) {
                                                                                                                                   var a = d(".footer-desk");
                                                                                                                                   if (0 === a.length || !a.is(":visible"))
                                                                                                                                       if (a = d(".footer-tab"), 0 === a.length || !a.is(":visible")) return;
                                                                                                                                   var c = d(".res-form").height() + 10,
                                                                                                                                       b = d(".home").height();
                                                                                                                                   c > b ? a.css("padding-top", c - b + "px") : a.css("padding-top", "10px")
                                                                                                                               }
                                                                                                                           },
                                                                                                                           fetchBanner: function(a, c) {
                                                                                                                               d.ajax({
                                                                                                                                   url: h.config.rootContext + "/handlers/LocationChangeAJAXHandler",
                                                                                                                                   type: "GET",
                                                                                                                                   data: {
                                                                                                                                       eoag: c,
                                                                                                                                       loadBanner: a
                                                                                                                                   },
                                                                                                                                   dataType: "json",
                                                                                                                                   cache: !1,
                                                                                                                                   success: function(b) {
                                                                                                                                       a && !0 === b.DoubleClickBanner && d("#hp-banner-container").load(h.config.rootContext +
                                                                                                                                           "/templates/reservation/home/homeAds.jsp?bannerOnly=Y&_=" + (new Date).getTime(),
                                                                                                                                           function() {
                                                                                                                                               gptBannerAds.refreshAds()
                                                                                                                                           })
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           refreshBanner: function(a, c, b) {
                                                                                                                               b && (3 === c.length || 6 === c.length) ? this.fetchBanner(a, c) : 0 < c.length && this.fetchBanner(a, c)
                                                                                                                           },
                                                                                                                           loadMisc: function(a, c, b) {
                                                                                                                               !a && c && (a = "phone" !== h.config.deviceGroup ? "" : "?bannerOnly=Y", a = "" === a ? "?_=" + (new Date).getTime() : a + ("&_=" + (new Date).getTime()), d("#hp-banner-container").empty().load(h.config.rootContext + "/templates/reservation/home/homeAds.jsp" + a, function() {
                                                                                                                                   gptBannerAds.clean();
                                                                                                                                   gptBannerAds.render()
                                                                                                                               }), this.setFooterPadding());
                                                                                                                               b || d("#hp-ww-info").empty().load(h.config.rootContext + "/templates/integrated/locations/wordwheelMoreInfo.jsp")
                                                                                                                           },
                                                                                                                           findCarTypeLabel: function(a, c) {
                                                                                                                               var b = c[0].name;
                                                                                                                               i.each(c, function(c) {
                                                                                                                                   a == c.value && (b = c.name)
                                                                                                                               });
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           validateAffiliateMember: function(a, c, b) {
                                                                                                                               var e = d.Deferred();
                                                                                                                               "undefined" == typeof htz.res.config.affiliateMemberCallCount && (htz.res.config.affiliateMemberCallCount = {});
                                                                                                                               a = d.trim(h.config.dialect);
                                                                                                                               htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")] =
                                                                                                                                   "undefined" == typeof htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")] ? 1 : htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")];
                                                                                                                               var f, g;
                                                                                                                               b ? (f = b.formData.get("affiliateMemberJoin"), "on" === f ? c = "" : c = b.formData.get("affiliateMemberID")) : (f = d("#affiliate-member-join").is(":checked") ? "on" : "", "on" === f ? c = "" : c = d.trim(c));
                                                                                                                               g = htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")];
                                                                                                                               d.ajax({
                                                                                                                                   cache: !1,
                                                                                                                                   data: d.param({
                                                                                                                                       affiliateMemberID: c.replace(/^0+/, ""),
                                                                                                                                       dialect: a,
                                                                                                                                       affiliateCallCount: g,
                                                                                                                                       affiliateMemberJoin: f,
                                                                                                                                       companyId: b.formData.get("companyId")
                                                                                                                                   }),
                                                                                                                                   url: h.config.apiDomain + "/rest/partner/cdp/memberID/validate",
                                                                                                                                   dataType: "jsonp",
                                                                                                                                   type: "GET",
                                                                                                                                   contentType: "application/json; charset=utf-8",
                                                                                                                                   success: function(a) {
                                                                                                                                       if ("fail" === a.resultInfo.result) 400 === a.resultInfo.resultCode && g++, htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")] = g, e.reject({
                                                                                                                                           responseText: JSON.stringify(a)
                                                                                                                                       });
                                                                                                                                       else {
                                                                                                                                           if ("success" === a.resultInfo.result && (htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")] =
                                                                                                                                                   1, b.formData.set({
                                                                                                                                                       affiliateCallCount: htz.res.config.affiliateMemberCallCount[b.formData.get("companyId")]
                                                                                                                                                   }, {
                                                                                                                                                       silent: !0
                                                                                                                                                   }), 1 === b.metaData.get("loggedIn") && !b.metaData.get("enableTA"))) {
                                                                                                                                               var a = new Date,
                                                                                                                                                   a = new Date(a.setFullYear(a.getFullYear() + 1)),
                                                                                                                                                   c = "" != b.formData.get("memberOtherCdpField") ? b.formData.get("memberOtherCdpField") : b.formData.get("memberSelectedCdp");
                                                                                                                                               document.cookie = "affiliateID_" + b.metaData.get("memberNumber") + "_" + c + "=C; expires=" + a.toUTCString() + "; path=/"
                                                                                                                                           }
                                                                                                                                           e.resolve()
                                                                                                                                       }
                                                                                                                                   },
                                                                                                                                   error: function(a) {
                                                                                                                                       e.reject({
                                                                                                                                           responseText: a.responseJSON
                                                                                                                                       })
                                                                                                                                   }
                                                                                                                               });
                                                                                                                               return e.promise()
                                                                                                                           },
                                                                                                                           validateCdp: function(a) {
                                                                                                                               var c = d.Deferred(),
                                                                                                                                   b = /^([0-9]*)$/;
                                                                                                                               a ? (a = d.trim(a), b.test(a) ? d.ajax({
                                                                                                                                   cache: !1,
                                                                                                                                   url: h.config.apiDomain + "/rest/customer/cdp/" + h.config.dialect + "/" + a,
                                                                                                                                   dataType: "jsonp",
                                                                                                                                   success: function(a) {
                                                                                                                                       "invalid" === a.data.result ? (delete a.message.systemErrors, c.reject({
                                                                                                                                           responseText: JSON.stringify(a)
                                                                                                                                       })) : c.resolve()
                                                                                                                                   }
                                                                                                                               }) : c.resolve()) : c.resolve();
                                                                                                                               return c.promise()
                                                                                                                           },
                                                                                                                           specialOffersExtrasCheck: function() {
                                                                                                                               var a = g.getItem(k.SPECIAL_OFFERS_DATA);
                                                                                                                               if (a) try {
                                                                                                                                   var c = JSON.parse(a);
                                                                                                                                   c && c.extNL &&
                                                                                                                                       d.ajax({
                                                                                                                                           url: h.config.rootContext + "/rest/hertz/v2/itinerary/vehicles/specialoffers",
                                                                                                                                           type: "POST",
                                                                                                                                           headers: {
                                                                                                                                               "cache-control": "no-cache"
                                                                                                                                           },
                                                                                                                                           data: JSON.stringify(c),
                                                                                                                                           dataType: "json",
                                                                                                                                           contentType: "application/json"
                                                                                                                                       })
                                                                                                                               } catch (b) {}
                                                                                                                           },
                                                                                                                           trackCdpOptions: function(a) {
                                                                                                                               "undefined" !== typeof WebTracking && WebTracking.trackPage("cdp-options-" + a)
                                                                                                                           },
                                                                                                                           getUpdatedTime: function() {
                                                                                                                               var a = new Date,
                                                                                                                                   c = parseInt(a.getHours()),
                                                                                                                                   a = 0 < parseInt(a.getMinutes()) ? c + 2 : c + 1;
                                                                                                                               10 > a ? a = "0" + a : 24 == a ? a = "00" : 24 < a && (a = "0" + (a - 24));
                                                                                                                               return a + ":00"
                                                                                                                           },
                                                                                                                           updateGeoLocationInfo: function(a) {
                                                                                                                               a.formData.set("fromProfileForGoldService",
                                                                                                                                   "Y", {
                                                                                                                                       silent: !0
                                                                                                                                   });
                                                                                                                               a.keepTrackOfGeoPrefLocation && a.keepTrackOfGeoPrefLocation()
                                                                                                                           },
                                                                                                                           geoPreferencesSubmitWithItnInfo: function(a, c) {
                                                                                                                               var b, e = this,
                                                                                                                                   d = a.isResFlowEdit,
                                                                                                                                   i = a.isResWidget;
                                                                                                                               e.updateGeoLocationInfo(a);
                                                                                                                               r.isModify() ? (b = g.getItem(k.CONFIRMATION_NUMBER), b = h.config.rootContext + "/rest/hertz/v2/itinerary/vehicles/" + b) : b = h.config.rootContext + "/rest/hertz/v2/itinerary/vehicles";
                                                                                                                               v.saveWithRetry(a.formData, {}, {
                                                                                                                                   url: b,
                                                                                                                                   type: "POST",
                                                                                                                                   beforeSend: function() {
                                                                                                                                       h.config.isApp ? htz.utils.Spinner.spin() : j.getSpinner().spin()
                                                                                                                                   },
                                                                                                                                   error: function(b, l) {
                                                                                                                                       var i = r.isModify() ? k.MODIFY_ITINERARY : k.ITINERARY;
                                                                                                                                       c.inUse && c.closeOverlay();
                                                                                                                                       if (l && l.responseText) {
                                                                                                                                           try {
                                                                                                                                               var m = JSON.parse(l.responseText).message;
                                                                                                                                               a.formData.trigger("error", b, l);
                                                                                                                                               Utils.trackError(m);
                                                                                                                                               g.setItem(k.ITINERARY_ERROR_DATA, JSON.stringify(m));
                                                                                                                                               g.setItem(k.ERRORS, JSON.stringify(m))
                                                                                                                                           } catch (o) {}
                                                                                                                                           e.handleGeoPrefNavigation(i, d)
                                                                                                                                       }
                                                                                                                                       h.config.isApp ? htz.utils.Spinner.stop() : j.getSpinner().stop()
                                                                                                                                   },
                                                                                                                                   success: function(a, b) {
                                                                                                                                       var c = r.isModify() ? k.MODIFY_VEHICLES : k.VEHICLES;
                                                                                                                                       if (b && b.resultInfo) {
                                                                                                                                           g.setItem(k.VEHICLES_DATA,
                                                                                                                                               JSON.stringify(b.data.model));
                                                                                                                                           if (b.message) try {
                                                                                                                                               g.setItem(k.VEHICLES_ERROR_DATA, JSON.stringify(b.message))
                                                                                                                                           } catch (i) {}
                                                                                                                                           g.setItem(k.ITINERARY_INFO_DATA, JSON.stringify(b.data.itinerary));
                                                                                                                                           b.data.rateDetails && g.setItem(k.RATE_DETAILS_DATA, JSON.stringify(b.data.rateDetails));
                                                                                                                                           e.handleGeoPrefNavigation(c, d)
                                                                                                                                       } else window.location.reload();
                                                                                                                                       h.config.isApp ? htz.utils.Spinner.stop() : j.getSpinner().stop()
                                                                                                                                   },
                                                                                                                                   complete: function() {
                                                                                                                                       (!d || !i) && a.$el.find(".home").removeClass("step-discount");
                                                                                                                                       c.inUse && c.closeOverlay()
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           handleGeoPrefNavigation: function(a, c) {
                                                                                                                               c ? window.location.href = h.config.rootContext + "/reservation/#" + a : w.getRotar().rotate(a)
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               q = null
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/lookup/core/presenter/lookup-presenter", "backbone config/app-config utils/domhelper config/utilconfig utils/utils-proxy reservation/lookup/core/model/lookup-form-model reservation/lookup/core/model/lookup-model reservation/lookup/core/view/lookup-view utils/utils reservation/process-info/core/model/process-model reservation/common/retry/core/view/retry-view".split(" "), function(k, s, h, l, j, m, n, o, p, d, q) {
                                                                                                                       var c, b, i = htz.res.config.ReservationConstants.RESERVATION_LIST;
                                                                                                                       return {
                                                                                                                           show: function(a) {
                                                                                                                               if (a &&
                                                                                                                                   a.template && a.content) {
                                                                                                                                   var r = a.template,
                                                                                                                                       e = a.content;
                                                                                                                                   a.content = null;
                                                                                                                                   a.template = null;
                                                                                                                                   var f = a.referrer,
                                                                                                                                       g = a && a.target;
                                                                                                                                   this.prepareData(a);
                                                                                                                                   var a = g,
                                                                                                                                       g = h.getPageId(i),
                                                                                                                                       d = !1;
                                                                                                                                   a || (h.isPageAdded(i) || h.addPage(i, "page"), a = "#" + g, d = !0, "undefined" == typeof f && (f = $(a)));
                                                                                                                                   c || (c = new o({
                                                                                                                                       target: a,
                                                                                                                                       model: b,
                                                                                                                                       template: r,
                                                                                                                                       content: e,
                                                                                                                                       referrer: f
                                                                                                                                   }));
                                                                                                                                   c.render();
                                                                                                                                   d && ($("#container").removeClass("animated-background"), l.getNavigator().navigate("#" + g))
                                                                                                                               }
                                                                                                                           },
                                                                                                                           prepareData: function(a) {
                                                                                                                               var c = {};
                                                                                                                               a && a.formData && (c = a.formData, a.formData = null);
                                                                                                                               if (!a) try {
                                                                                                                                   var e =
                                                                                                                                       htz.homepage.json.data.model.metaData,
                                                                                                                                       a = {
                                                                                                                                           loggedIn: e.loggedIn,
                                                                                                                                           enableTA: e.enableTA,
                                                                                                                                           applicant: e.applicant
                                                                                                                                       }
                                                                                                                               } catch (f) {
                                                                                                                                   a = {}
                                                                                                                               }
                                                                                                                               b ? (b.get("formData").set(c), b.get("metaData").set(a)) : (b = new n, b.set("formData", new m(c)), b.set("metaData", new k.Model(a ? a : {})));
                                                                                                                               (a = this.fetchMemberResList(a, b)) && b.get("metaData").set(a, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           fetchMemberResList: function(a, c) {
                                                                                                                               if (a && a.loggedIn && !a.enableTA && !a.applicant) {
                                                                                                                                   var b = {};
                                                                                                                                   j.getSpinner().spin();
                                                                                                                                   q.fetchWithRetry(c, {
                                                                                                                                       cache: !1,
                                                                                                                                       async: !1,
                                                                                                                                       success: function(a) {
                                                                                                                                           a.data && (b.reservationList =
                                                                                                                                               a.data.reservationList);
                                                                                                                                           if (a.message || !a.data) b.reservationListErrors = a.message || "use_default", a.message ? p.trackError(a.message, d.getStep()) : WebTracking.trackErrors("unknown-error-fetching-reservation-list", {
                                                                                                                                               pageName: d.getStep()
                                                                                                                                           })
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           b.reservationListErrors = "use_default";
                                                                                                                                           WebTracking && WebTracking.trackErrors("unknown-error-fetching-reservation-list", {
                                                                                                                                               pageName: d.getStep()
                                                                                                                                           })
                                                                                                                                       },
                                                                                                                                       complete: function() {
                                                                                                                                           j.getSpinner().stop()
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                                   return b
                                                                                                                               }
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               c && c.doCleanup && c.doCleanup();
                                                                                                                               b && b.doCleanup && c.doCleanup();
                                                                                                                               c = b = null
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/lookup/core/model/lookup-form-model", ["config/app-config", "utils/restmodel"], function(a, b) {
                                                                                                                       return b.extend({
                                                                                                                           defaults: {
                                                                                                                               confirmationNumber: "",
                                                                                                                               lastName: "",
                                                                                                                               quickReservationConfirmationNumber: "-1",
                                                                                                                               arrivingUpdate: ""
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.constructor.__super__.initialize.apply(this, arguments)
                                                                                                                           },
                                                                                                                           url: function() {
                                                                                                                               return a.config.rootContext + "/rest/review/v2/rmc"
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/lookup/core/model/lookup-model", ["config/app-config", "utils/restmodel"], function(b, c) {
                                                                                                                       return c.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.constructor.__super__.initialize.apply(this, arguments)
                                                                                                                           },
                                                                                                                           parseModel: function(a) {
                                                                                                                               a && this.get("metaData").set(a)
                                                                                                                           },
                                                                                                                           url: function() {
                                                                                                                               return b.config.rootContext + "/rest/hertz/v2/reservations/member/upcoming-reservations"
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/lookup/core/view/lookup-view", "jquery underscore json config/app-config utils/utils-proxy utils/utils utils/sessionhelper framework/view/abstract-view reservation/config reservation/reservation-info/core/model/reservation-info-model reservation/common/retry/core/view/retry-view utils/gtm-tracker".split(" "), function(e, f, m, n, g, j, k, o, p, q, r, h) {
                                                                                                                       return o.extend({
                                                                                                                           events: {
                                                                                                                               "keyup input": "eventHandler",
                                                                                                                               "change input": "eventHandler",
                                                                                                                               "click .res-search": "searchReservation",
                                                                                                                               "click .member-res-search": "searchMemberReservation",
                                                                                                                               "click #new-startRes": "showResForm"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.preInitialize();
                                                                                                                               this.formData = this.model.get("formData");
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.target = this.options.target;
                                                                                                                               this.referrer = this.options.referrer;
                                                                                                                               this.bindEvents();
                                                                                                                               this.postInitialize()
                                                                                                                           },
                                                                                                                           bindEvents: function() {
                                                                                                                               this.formData.on("fieldError", this.displayError, this);
                                                                                                                               this.metaData.on("change:reservationList", this.render, this);
                                                                                                                               this.metaData.on("change:target",
                                                                                                                                   this.render, this)
                                                                                                                           },
                                                                                                                           displayError: function(a, c) {
                                                                                                                               j.displayFieldErrors(c);
                                                                                                                               window.scrollTo(0, 0)
                                                                                                                           },
                                                                                                                           showResForm: function() {
                                                                                                                               e("#gaq-tab h2").trigger("click");
                                                                                                                               e("#new-resWidget").show();
                                                                                                                               e("#new-resLookup").hide()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.preRender();
                                                                                                                               var a, c = this.metaData.get("reservationList"),
                                                                                                                                   b = this.metaData.get("reservationListErrors"),
                                                                                                                                   l = !1;
                                                                                                                               if (this.metaData.get("loggedIn") && !this.metaData.get("enableTA") && !this.metaData.get("applicant"))
                                                                                                                                   if (c && (!b || f.isEmpty(b))) a = 0 === c.length ? this.content.homePage.homePageContent.resListEmpty :
                                                                                                                                       this.content.homePage.homePageContent.viewModifyCancel;
                                                                                                                                   else if (l = !0, !b || "use_default" == b || f.isEmpty(b)) b = {
                                                                                                                                   messages: [this.content.reservationErrors.advisoryContent.unableToAccessResList]
                                                                                                                               };
                                                                                                                               this.$el.empty().append(f.template(this.template, {
                                                                                                                                   metaData: this.metaData.attributes,
                                                                                                                                   formData: this.formData.attributes,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.validateFields();
                                                                                                                               this.target && e(this.target).empty().append(this.el);
                                                                                                                               l && j.displayAllErrors(b);
                                                                                                                               this.renderMessage(a);
                                                                                                                               this.postRender();
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           renderMessage: function(a) {
                                                                                                                               var c =
                                                                                                                                   this.$el.find("#res-message");
                                                                                                                               a && e(c).empty().html(a).show()
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var c = e(a.target),
                                                                                                                                   b = c.val();
                                                                                                                               c.is(":checkbox") ? b = c.is(":checked") ? b : "" : "keyup" == a.type && this.validateFields();
                                                                                                                               this.formData.set(c.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           validateFields: function() {
                                                                                                                               var a = this.$el.find("#conf-last-name").val(),
                                                                                                                                   c = this.$el.find("#conf-num").val();
                                                                                                                               this.button = this.button || this.$el.find(".res-search");
                                                                                                                               c && (a || this.model.attributes.metaData.attributes.loggedIn) ? this.button.prop("disabled", !1) : this.button.prop("disabled", !0)
                                                                                                                           },
                                                                                                                           searchMemberReservation: function(a) {
                                                                                                                               a = e(a.target).attr("rel") || e(a.currentTarget).attr("rel");
                                                                                                                               a = this.metaData.get("reservationList")[a];
                                                                                                                               this.formData.set({
                                                                                                                                   confirmationNumber: a.confirmationNumber
                                                                                                                               }, {
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               this.searchReservation()
                                                                                                                           },
                                                                                                                           trackResLookup: function() {
                                                                                                                               "undefined" !== typeof WebTracking && WebTracking.trackPage("lookup-reservation")
                                                                                                                           },
                                                                                                                           searchReservation: function() {
                                                                                                                               if (this.preSubmit()) {
                                                                                                                                   var a = this;
                                                                                                                                   g.getSpinner().spin();
                                                                                                                                   var c = n.config.rootContext + "/rest/hertz/v2/reservations/reservation",
                                                                                                                                       b = a.formData.toJSON();
                                                                                                                                   r.saveWithRetry(a.formData, {}, {
                                                                                                                                       url: c,
                                                                                                                                       success: function(c, d) {
                                                                                                                                           if (!htz.config.isApp) {
                                                                                                                                               var i = {
                                                                                                                                                   scenario: "lookup-reservation",
                                                                                                                                                   payload: {}
                                                                                                                                               };
                                                                                                                                               i.payload.response = d.statusText;
                                                                                                                                               i.payload.code = d.status;
                                                                                                                                               h.track(i)
                                                                                                                                           }
                                                                                                                                           q.setReservationId(d.data.confirmationSummaryInfo.confirmationNumber);
                                                                                                                                           k.setItem(htz.res.config.ReservationConstants.CONFIRMATION_NUMBER_INFO, d.data.confirmationSummaryInfo.confirmationNumber);
                                                                                                                                           a.formData.trigger("sync", c, d);
                                                                                                                                           if (d && d.resultInfo) a.formData.clear({
                                                                                                                                               silent: !0
                                                                                                                                           }), a.formData.set(b, {
                                                                                                                                               silent: !0
                                                                                                                                           }), k.setItem(htz.res.config.ReservationConstants.REVIEW_DATA,
                                                                                                                                               m.stringify(d)), p.getRotar().rotate("review");
                                                                                                                                           else try {
                                                                                                                                               WebTracking.setError("debug-search-success-error", "search")
                                                                                                                                           } catch (e) {}
                                                                                                                                       },
                                                                                                                                       error: function(c, d) {
                                                                                                                                           if (!htz.config.isApp && d.responseJSON) {
                                                                                                                                               var b = {
                                                                                                                                                       scenario: "system-errordata-tracking"
                                                                                                                                                   },
                                                                                                                                                   e = d.responseJSON.message.messages,
                                                                                                                                                   f = d.responseJSON.message.errorData,
                                                                                                                                                   g = d.responseJSON.message.systemErrors;
                                                                                                                                               b.payload = void 0 != e ? e : void 0 != f ? d.responseJSON.message.errorData.message : void 0 != g ? g : "";
                                                                                                                                               h.track(b)
                                                                                                                                           }
                                                                                                                                           htz.config.isApp || (b = {
                                                                                                                                                   scenario: "lookup-reservation",
                                                                                                                                                   payload: {}
                                                                                                                                               }, b.payload.response =
                                                                                                                                               d.statusText, b.payload.code = d.status, h.track(b));
                                                                                                                                           a.formData.trigger("error", c, d, a.referrer.find("#error-list"))
                                                                                                                                       },
                                                                                                                                       complete: function() {
                                                                                                                                           g.getSpinner().stop()
                                                                                                                                       }
                                                                                                                                   });
                                                                                                                                   a.trackResLookup()
                                                                                                                               }
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/presenter/itinerary-presenter", getDependencies("reservation/itinerary/core/presenter/itinerary-presenter"), function(j, e, h, l, x, G, m, v, y, z, A, E, w, b) {
                                                                                                                       function B() {
                                                                                                                           try {
                                                                                                                               e.setItem(b.RESERVATION_CONFIRMED, ""), htz.res.pages.PageHelper.resetReservation()
                                                                                                                           } catch (a) {}
                                                                                                                       }

                                                                                                                       function C() {
                                                                                                                           try {
                                                                                                                               e.setItem(b.APP_CONFIG, h.stringify(m.config))
                                                                                                                           } catch (a) {}
                                                                                                                       }

                                                                                                                       function D() {
                                                                                                                           try {
                                                                                                                               htz.homepage.json.data.model.metaData.startRes && (B(), C()), htz.homepage.json.data.model.metaData.startRes = !1
                                                                                                                           } catch (a) {}
                                                                                                                       }

                                                                                                                       function s(a,
                                                                                                                           r) {
                                                                                                                           var c = new v,
                                                                                                                               f;
                                                                                                                           w.getSpinner().spin();
                                                                                                                           c.fetch({
                                                                                                                               cache: !1,
                                                                                                                               success: function(a, c) {
                                                                                                                                   c && c.data && (e.setItem(b.ITINERARY_DATA, h.stringify(c.data)), f = c.data)
                                                                                                                               },
                                                                                                                               complete: function() {
                                                                                                                                   w.getSpinner().stop();
                                                                                                                                   a && r && j.publish(b.VALIDATE_ITINERARY, [f, a, r])
                                                                                                                               }
                                                                                                                           })
                                                                                                                       }

                                                                                                                       function t(a) {
                                                                                                                           if (a && a.message) try {
                                                                                                                               e.setItem(b.ITINERARY_ERROR_DATA, h.stringify(a.message))
                                                                                                                           } catch (r) {}
                                                                                                                       }

                                                                                                                       function u(a) {
                                                                                                                           a && (a.isLoggedIn || a.appConfig || a.message) ? e.setItem(b.RESERVATION_PRESERVED_DATA, h.stringify(a)) : e.removeItem(b.RESERVATION_PRESERVED_DATA)
                                                                                                                       }

                                                                                                                       function F() {
                                                                                                                           var a =
                                                                                                                               e.getItem(b.RESERVATION_PRESERVED_DATA);
                                                                                                                           if (!a) return !0;
                                                                                                                           try {
                                                                                                                               a = h.parse(a);
                                                                                                                               if (a.appConfig && a.appConfig.isApp) {
                                                                                                                                   var r = a.appConfig.orgDeviceGroup;
                                                                                                                                   a.appConfig = null;
                                                                                                                                   u(a);
                                                                                                                                   var c = window.location.href;
                                                                                                                                   window.location.hash && (c = c.substring(0, c.indexOf("#")));
                                                                                                                                   c = 0 < c.indexOf("?") ? c + "&" : c + "?";
                                                                                                                                   window.location.href = c + ("deviceGroup=" + r + "&edge=Y");
                                                                                                                                   return !1
                                                                                                                               }
                                                                                                                               if (a.isLoggedIn) {
                                                                                                                                   if (a.isLoggedIn = !1, u(a), window.plugins.remoteToLocal) try {
                                                                                                                                       return window.plugins.remoteToLocal.execInVC({
                                                                                                                                           vcIndex: hzm.constants.VC_HOME_MEMBER,
                                                                                                                                           js: "hzm.member.autoLogin();"
                                                                                                                                       }), !1
                                                                                                                                   } catch (f) {}
                                                                                                                               } else a.message && (t({
                                                                                                                                   message: a.message
                                                                                                                               }), a.message = null, u(a));
                                                                                                                               return !0
                                                                                                                           } catch (d) {
                                                                                                                               return !0
                                                                                                                           }
                                                                                                                       }
                                                                                                                       var i, d, o = b.ITINERARY;
                                                                                                                       j.subscribe(b.VALIDATE_ITINERARY, function(a, e, c, f) {
                                                                                                                           F() && (j.publish(b.RENDER_PREPARE_PRESENTER, f), A.setStep(o), a = l.getPageId(o), l.isPageAdded(o) ? (i.clear({
                                                                                                                                   silent: !0
                                                                                                                               }), i.parseModel(e), d.refresh()) : (l.addPage(o, "page"), i = new v(e), d = new y({
                                                                                                                                   viewHelper: z,
                                                                                                                                   el: "#" + a,
                                                                                                                                   model: i,
                                                                                                                                   content: c,
                                                                                                                                   isSearch: f.isSearch
                                                                                                                               }), d.render()), f.isSearch ? d.showTab("rmc-tab") : d.showTab("gaq-tab"), j.publish(b.NAVIGATE_PREPARE_PRESENTER),
                                                                                                                               x.getNavigator().navigate("#" + a), window.HomeModel = d.model, window.HomePage = d.formView, j.publish(b.RENDER_DONE_PRESENTER, {
                                                                                                                                   step: o,
                                                                                                                                   page: b.LEGACY_ITINERARY,
                                                                                                                                   content: c
                                                                                                                               }))
                                                                                                                       });
                                                                                                                       return {
                                                                                                                           show: function(a, d) {
                                                                                                                               m.config.isApp || j("body").css("background-color", "#000");
                                                                                                                               var c = a.content,
                                                                                                                                   f = !1;
                                                                                                                               !d || !d.isSearch ? (f = window.location, f = !f.hash && 0 < f.href.indexOf("confirmationNumber=") ? !0 : !1) : f = d.isSearch;
                                                                                                                               var i;
                                                                                                                               if (i = !f) {
                                                                                                                                   var n;
                                                                                                                                   a: {
                                                                                                                                       if (!window.location.hash) try {
                                                                                                                                           var g = htz.homepage.json.data.model.metaData.targetStep;
                                                                                                                                           htz.homepage.json.data.model.metaData.targetStep =
                                                                                                                                               null;
                                                                                                                                           if (g) {
                                                                                                                                               E.getRotar().rotate(g);
                                                                                                                                               n = !1;
                                                                                                                                               break a
                                                                                                                                           }
                                                                                                                                       } catch (o) {}
                                                                                                                                       n = !0
                                                                                                                                   }
                                                                                                                                   i = !n
                                                                                                                               }
                                                                                                                               if (!i) {
                                                                                                                                   d || (d = {});
                                                                                                                                   d.isSearch = f;
                                                                                                                                   a: {
                                                                                                                                       var l = d;n = "Y" === e.getItem(b.RESERVATION_CONFIRMED);
                                                                                                                                       if (!n) {
                                                                                                                                           g = e.getItem(b.ITINERARY_DATA);
                                                                                                                                           try {
                                                                                                                                               g && (g = h.parse(g))
                                                                                                                                           } catch (u) {
                                                                                                                                               g = null
                                                                                                                                           }
                                                                                                                                           if (g && g.metaData) try {
                                                                                                                                               f = 0, f = m.config.isApp ? h.parse(e.getItem(b.APP_MEMBER_INFO)).isLoggedIn : htz.homepage.json.data.model.metaData.loggedIn, g.metaData.loggedIn !== f && (n = !0)
                                                                                                                                           } catch (v) {}
                                                                                                                                       }
                                                                                                                                       if (!e.getItem(b.RESERVATION_PRESERVED_DATA)) try {
                                                                                                                                           var p = h.parse(e.getItem(b.APP_CONFIG));
                                                                                                                                           if (p &&
                                                                                                                                               p.isApp) {
                                                                                                                                               var k = htz.homepage.json.message;
                                                                                                                                               if (k && (k = h.stringify(k)) && 0 < k.indexOf("[NZX305]")) {
                                                                                                                                                   k = {};
                                                                                                                                                   k.appConfig = p;
                                                                                                                                                   k.message = htz.homepage.json.message;
                                                                                                                                                   htz.homepage.json.message = null;
                                                                                                                                                   try {
                                                                                                                                                       var q = e.getItem(b.ITINERARY_DATA);
                                                                                                                                                       q && (q = h.parse(q), k.isLoggedIn = q && q.metaData && q.metaData.loggedIn)
                                                                                                                                                   } catch (w) {}
                                                                                                                                                   e.setItem(b.RESERVATION_PRESERVED_DATA, h.stringify(k))
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       } catch (x) {}
                                                                                                                                       if (n) D(),
                                                                                                                                       j.ajax({
                                                                                                                                           cache: !1,
                                                                                                                                           type: "POST",
                                                                                                                                           url: m.config.rootContext + "/rest/hertz/v2/reservations/startres",
                                                                                                                                           complete: function() {
                                                                                                                                               B();
                                                                                                                                               C();
                                                                                                                                               s(c, l);
                                                                                                                                               t(htz.homepage.json)
                                                                                                                                           }
                                                                                                                                       });
                                                                                                                                       else {
                                                                                                                                           if (p = e.getItem(b.APP_CONFIG)) try {
                                                                                                                                               if (p = h.parse(p), p.pos !== m.config.pos) {
                                                                                                                                                   e.setItem(b.APP_CONFIG, h.stringify(m.config));
                                                                                                                                                   s(c, l);
                                                                                                                                                   t(htz.homepage.json);
                                                                                                                                                   break a
                                                                                                                                               }
                                                                                                                                           } catch (y) {}
                                                                                                                                           D();
                                                                                                                                           m.config.isApp && window.plugins.remoteToLocal.readFromSharedStorage("login_status_change", function(a) {
                                                                                                                                               var b, c;
                                                                                                                                               "undefined" !== typeof a && !0 == a.isLoggedIn ? a = j.Deferred().resolve().promise() : (a = hzm.constants.URL.CONFIG, b = htz.config.dialect.substring(0, 2), c = htz.config.pos, a = j.ajax({
                                                                                                                                                   url: a + ("/" + c + "/" + b),
                                                                                                                                                   dataType: "json",
                                                                                                                                                   type: "POST"
                                                                                                                                               }));
                                                                                                                                               a.then(function() {
                                                                                                                                                   s()
                                                                                                                                               })
                                                                                                                                           });
                                                                                                                                           g = e.getItem(b.ITINERARY_DATA);
                                                                                                                                           try {
                                                                                                                                               g = A.hasProcessStarted() && g ? h.parse(g) : htz.homepage.json.data.model, t(htz.homepage.json), htz.homepage.json.message = null
                                                                                                                                           } catch (z) {}
                                                                                                                                           j.publish(b.VALIDATE_ITINERARY, [g, c, l])
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               }
                                                                                                                           },
                                                                                                                           refresh: function() {
                                                                                                                               i && d && (applyCrossSavedData(i), d.refresh())
                                                                                                                           },
                                                                                                                           updateData: function() {
                                                                                                                               s()
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               j("body").css("background-color", "#ededed");
                                                                                                                               i && i.doCleanup && i.doCleanup();
                                                                                                                               d && d.doCleanup && d.doCleanup();
                                                                                                                               l.removePage(o);
                                                                                                                               i = d = window.HomeModel = window.HomePage = window.HomeViewHelper = null
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/model/location-details-model", ["backbone", "utils/restmodel", "config/app-config"], function(a, d, b) {
                                                                                                                       return a.Model.extend({
                                                                                                                           initialize: function(a, c) {
                                                                                                                               this.url = b.config.apiDomain + "/rest/location/oag/" + c.eoag + "?dialect=" + b.config.dialect
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/model/dandc-location-model", ["backbone", "config/app-config", "utils/utils"], function(b, c, d) {
                                                                                                                       var e = b.Model.extend({});
                                                                                                                       return b.Collection.extend({
                                                                                                                           initialize: function(a) {
                                                                                                                               this.url = c.config.rootContext + "/rest/hertz/v2/reservations/deliveryAndCollect/site/" + a.options.locType + "/" + a.options.countryCode + "/" + a.options.city
                                                                                                                           },
                                                                                                                           model: e,
                                                                                                                           parse: function(a, b) {
                                                                                                                               if (!d.sessionTimedOut(b)) return a.data.deliveryAndCollectionLocationList
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/model/dandc-city-model", ["backbone", "config/app-config", "utils/utils"], function(c, e, f) {
                                                                                                                       var g = c.Model.extend({
                                                                                                                           defaults: {
                                                                                                                               cityName: ""
                                                                                                                           }
                                                                                                                       });
                                                                                                                       return c.Collection.extend({
                                                                                                                           initialize: function(a) {
                                                                                                                               this.url = e.config.rootContext + "/rest/hertz/v2/reservations/deliveryAndCollect/site/" + a.options.locType + "/" + a.options.countryCode
                                                                                                                           },
                                                                                                                           model: g,
                                                                                                                           parse: function(a, c) {
                                                                                                                               if (!f.sessionTimedOut(c)) {
                                                                                                                                   var b = a.data.deliveryAndCollectionCountryList;
                                                                                                                                   a: {
                                                                                                                                       for (var d = 0; d < b.length; d++)
                                                                                                                                           if (b[d].countryCode ==
                                                                                                                                               a.data.countryCode) {
                                                                                                                                               b = b[d].showOffsite;
                                                                                                                                               break a
                                                                                                                                           }
                                                                                                                                       b = void 0
                                                                                                                                   }
                                                                                                                                   this.countryOffsiteFlag = b;
                                                                                                                                   return _.map(a.data.deliveryAndCollectionCityList, function(a) {
                                                                                                                                       return {
                                                                                                                                           cityName: a
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               }
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/model/dandc-offsite-model", ["backbone", "utils/restmodel", "config/app-config"], function(d, b, c) {
                                                                                                                       return b.extend({
                                                                                                                           initialize: function(a) {
                                                                                                                               this.url = c.config.rootContext + "/rest/hertz/v2/reservations/deliveryAndCollect/offsite/" + a.options.locType + "/" + a.options.countryCode + "/" + a.options.countryName
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/model/delivery-and-collection-model", ["backbone", "config/app-config", "utils/utils"], function(a, c, d) {
                                                                                                                       var e = a.Model.extend({});
                                                                                                                       return a.Collection.extend({
                                                                                                                           initialize: function(b) {
                                                                                                                               this.url = c.config.rootContext + "/rest/hertz/v2/reservations/deliveryAndCollect/site/" + b.locType
                                                                                                                           },
                                                                                                                           model: e,
                                                                                                                           parse: function(b, a) {
                                                                                                                               if (!d.sessionTimedOut(a)) return b.data.deliveryAndCollectionCountryList
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/location-details-view", ["jquery", "underscore", "backbone"], function(b, a, c) {
                                                                                                                       return c.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = this.options.template.html();
                                                                                                                               this.data = this.model.get("data")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(a.template(this.template, {
                                                                                                                                   data: this.data,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.$("#address-content").append(a.template(b("#address-tpl").html(), {
                                                                                                                                   data: this.data,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.$("#phone-content").append(a.template(b("#phone-tpl").html(), {
                                                                                                                                   data: this.data,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.$("#rentals-content").append(a.template(b("#rentals-tpl").html(), {
                                                                                                                                   data: this.data,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.$("#notes-content").append(a.template(b("#notes-tpl").html(), {
                                                                                                                                   data: this.data,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               this.$("#service-content").append(a.template(b("#service-tpl").html(), {
                                                                                                                                   data: this.data,
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-location-view", "jquery underscore backbone reservation/delivery-and-collection/core/view/delivery-and-collection-view config/app-config reservation/common/retry/core/view/retry-view".split(" "), function(b, h, c, i, d, e) {
                                                                                                                       return c.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.presenter = this.options.presenter;
                                                                                                                               this.dandcView = this.options.dandcView
                                                                                                                           },
                                                                                                                           tagName: "li",
                                                                                                                           events: {
                                                                                                                               click: "selectLocation"
                                                                                                                           },
                                                                                                                           selectLocation: function() {
                                                                                                                               var a = this,
                                                                                                                                   c = {
                                                                                                                                       siteID: a.model.get("siteID"),
                                                                                                                                       cdp: a.model.get("cdpNumber"),
                                                                                                                                       countryCode: a.model.get("countryCode"),
                                                                                                                                       cityName: a.model.get("cityName"),
                                                                                                                                       locationName: a.model.get("locationName"),
                                                                                                                                       eoagCode: a.model.get("eoagCode"),
                                                                                                                                       deliverOrCollectFlag: a.model.get("locType")
                                                                                                                                   },
                                                                                                                                   f = d.config.rootContext + "/rest/hertz/v2/itinerary/vehicles/deliveryAndCollect/site";
                                                                                                                               e.ajaxWithRetry({
                                                                                                                                   type: "POST",
                                                                                                                                   headers: {
                                                                                                                                       "cache-control": "no-cache"
                                                                                                                                   },
                                                                                                                                   data: JSON.stringify(c),
                                                                                                                                   dataType: "json",
                                                                                                                                   contentType: "application/json",
                                                                                                                                   url: f,
                                                                                                                                   success: function(g) {
                                                                                                                                       g && ("D" == a.model.get("locType") ? b.publish(htz.res.config.ReservationConstants.LOCATION_DELIVERY_PICKUP, {
                                                                                                                                           formData: {
                                                                                                                                               pickupLocation: "Deliver to: " + a.model.get("locationName"),
                                                                                                                                               pickupHiddenEOAG: a.model.get("eoagCode"),
                                                                                                                                               isDeliveryChanged: ""
                                                                                                                                           },
                                                                                                                                           metaData: {
                                                                                                                                               deliveryLocation: a.model.toJSON()
                                                                                                                                           }
                                                                                                                                       }) : "C" == a.model.get("locType") && b.publish(htz.res.config.ReservationConstants.LOCATION_COLLECTION_DROPOFF, {
                                                                                                                                           formData: {
                                                                                                                                               dropoffLocation: "Collect from: " + a.model.get("locationName"),
                                                                                                                                               dropoffHiddenEOAG: a.model.get("eoagCode"),
                                                                                                                                               isCollectChanged: ""
                                                                                                                                           },
                                                                                                                                           metaData: {
                                                                                                                                               collectionLocation: a.model.toJSON()
                                                                                                                                           }
                                                                                                                                       }), a.closeOverlay())
                                                                                                                                   },
                                                                                                                                   error: function(a) {
                                                                                                                                       a &&
                                                                                                                                           a.responseText && (a = JSON.parse(a.responseText).message, utils.displayAllErrors(a, "#dnc-error-list"))
                                                                                                                                   }
                                                                                                                               });
                                                                                                                               a.cleanupResults();
                                                                                                                               a.closeOverlay()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               b(this.el).html(this.model.get("locationName"));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           cleanupResults: function() {
                                                                                                                               b("#dandc-locations-section").remove()
                                                                                                                           },
                                                                                                                           closeOverlay: function() {
                                                                                                                               this.dandcView.closeOverlay()
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-location-list-view", ["jquery", "underscore", "backbone", "reservation/delivery-and-collection/core/view/delivery-and-collection-location-view"], function(c, b, d, e) {
                                                                                                                       return d.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = this.options.template.html();
                                                                                                                               this.locType = this.options.locType;
                                                                                                                               this.presenter = this.options.presenter;
                                                                                                                               this.dandcView = this.options.dandcView
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               var a = this;
                                                                                                                               c("#dandc-cities-section").length ?
                                                                                                                                   c("#dandc-cities-section").after(b.template(a.template, {
                                                                                                                                       content: a.content
                                                                                                                                   })) : c("#dandc-overlay").append(b.template(a.template, {
                                                                                                                                       content: a.content
                                                                                                                                   }));
                                                                                                                               b.each(a.collection.models, function(b) {
                                                                                                                                   b.set("locType", a.locType);
                                                                                                                                   c(a.el).find("#dandc-locations").append((new e({
                                                                                                                                       model: b,
                                                                                                                                       presenter: a.presenter,
                                                                                                                                       dandcView: a.dandcView
                                                                                                                                   })).render().el)
                                                                                                                               });
                                                                                                                               a.postRender();
                                                                                                                               return a
                                                                                                                           },
                                                                                                                           postRender: function() {}
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-city-list-view", ["jquery", "underscore", "backbone", "utils/utils", "reservation/delivery-and-collection/core/view/delivery-and-collection-city-view"], function(c, b, d, e, f) {
                                                                                                                       return d.View.extend({
                                                                                                                           events: {
                                                                                                                               "change #dandc-cities": "selectCity",
                                                                                                                               "click #dandc-offsite-select": "getOffsiteInfo"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = this.options.template.html();
                                                                                                                               this.locType = this.options.locType;
                                                                                                                               this.countryCode =
                                                                                                                                   this.options.countryCode;
                                                                                                                               this.countryName = this.options.countryName;
                                                                                                                               this.presenter = this.options.presenter;
                                                                                                                               this.dandcView = this.options.dandcView;
                                                                                                                               this.showOffsite = this.options.showOffsite
                                                                                                                           },
                                                                                                                           getOffsiteInfo: function() {
                                                                                                                               this.presenter.showOffsite(this.locType, this.countryCode, this.countryName, this.content, this.dandcView)
                                                                                                                           },
                                                                                                                           selectCity: function(a) {
                                                                                                                               a = c(a.target).val();
                                                                                                                               this.cleanupResults();
                                                                                                                               this.clearErrorMessage();
                                                                                                                               a && "" != a && this.presenter.getLocations(this.locType, this.countryCode, a, this.content, this.dandcView,
                                                                                                                                   this.$el)
                                                                                                                           },
                                                                                                                           cleanupResults: function() {
                                                                                                                               c(this.el).find("#dandc-locations-section").remove()
                                                                                                                           },
                                                                                                                           clearErrorMessage: function() {
                                                                                                                               e.clearErrorMessage("#dnc-error-list")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               var a = this;
                                                                                                                               0 < a.collection.length && (c(a.el).append(b.template(this.template, {
                                                                                                                                   content: this.content
                                                                                                                               })), b.each(a.collection.models, function(b) {
                                                                                                                                   b.set({
                                                                                                                                       locType: a.locType,
                                                                                                                                       countryCode: a.countryCode,
                                                                                                                                       content: a.content,
                                                                                                                                       deliverOrCollectFlag: a.locType
                                                                                                                                   });
                                                                                                                                   c(a.el).find("#dandc-cities").append((new f({
                                                                                                                                       model: b
                                                                                                                                   })).render().el)
                                                                                                                               }));
                                                                                                                               this.showOffsite &&
                                                                                                                                   a.$el.append(b.template(c("#dnc-offsite-button-tpl").html(), {
                                                                                                                                       locType: a.locType,
                                                                                                                                       content: a.content
                                                                                                                                   }));
                                                                                                                               a.postRender();
                                                                                                                               return a
                                                                                                                           },
                                                                                                                           postRender: function() {},
                                                                                                                           stopListening: function() {
                                                                                                                               this.$el.off()
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-city-view", ["jquery", "underscore", "backbone", "utils/utils"], function(a, d, b, c) {
                                                                                                                       return b.View.extend({
                                                                                                                           tagName: "option",
                                                                                                                           clearErrorMessage: function() {
                                                                                                                               c.clearErrorMessage("#dnc-error-list")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               a(this.el).attr("value", this.model.get("cityName")).html(this.model.get("cityName"));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-country-view", ["jquery", "underscore", "backbone", "utils/utils"], function(a, d, b, c) {
                                                                                                                       return b.View.extend({
                                                                                                                           tagName: "option",
                                                                                                                           initialize: function() {
                                                                                                                               this.locType = this.options.locType;
                                                                                                                               this.presenter = this.options.presenter;
                                                                                                                               this.content = this.options.content
                                                                                                                           },
                                                                                                                           cleanupResults: function() {
                                                                                                                               a("#dandc-countries-section").remove()
                                                                                                                           },
                                                                                                                           clearErrorMessage: function() {
                                                                                                                               c.clearErrorMessage("#dnc-error-list")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               a(this.el).attr("value",
                                                                                                                                   this.model.get("countryCode")).html(this.model.get("countryName"));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-country-list-view", "jquery underscore backbone config/app-config utils/utils-proxy utils/utils reservation/delivery-and-collection/core/view/delivery-and-collection-country-view".split(" "), function(b, d, e, h, i, f, g) {
                                                                                                                       return e.View.extend({
                                                                                                                           events: {
                                                                                                                               "change #dandc-country": "selectCountry"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.locType = this.options.locType;
                                                                                                                               this.presenter = this.options.presenter;
                                                                                                                               this.dandcView =
                                                                                                                                   this.options.dandcView;
                                                                                                                               this.render();
                                                                                                                               this.postRender()
                                                                                                                           },
                                                                                                                           selectCountry: function(a) {
                                                                                                                               var c = b(a.target).val(),
                                                                                                                                   a = b(a.target).find(":selected").text();
                                                                                                                               this.cleanupResults();
                                                                                                                               this.clearErrorMessage();
                                                                                                                               c && "" != c && this.presenter.getCities(this.locType, c, a, this.content, this.dandcView, this.$el.find("#dandc-overlay"))
                                                                                                                           },
                                                                                                                           cleanupResults: function() {
                                                                                                                               b(this.el).find("#dandc-cities-section").remove();
                                                                                                                               b(this.el).find("#dandc-locations-section").remove();
                                                                                                                               b(this.el).find("#dandc-offsite-select").remove()
                                                                                                                           },
                                                                                                                           clearErrorMessage: function() {
                                                                                                                               f.clearErrorMessage("#dnc-error-list")
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               var a = this;
                                                                                                                               d.each(a.collection.models, function(c) {
                                                                                                                                   c.set({
                                                                                                                                       locType: a.locType,
                                                                                                                                       content: a.content
                                                                                                                                   });
                                                                                                                                   b(a.el).find("#dandc-country").append((new g({
                                                                                                                                       model: c
                                                                                                                                   })).render().el)
                                                                                                                               });
                                                                                                                               return a
                                                                                                                           },
                                                                                                                           postRender: function() {
                                                                                                                               this.dandcView.closeOverlay()
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-offsite-view", "jquery underscore backbone config/app-config utils/utils-proxy utils/utils reservation/common/retry/core/view/retry-view".split(" "), function(b, e, f, g, j, h, i) {
                                                                                                                       return f.View.extend({
                                                                                                                           events: {
                                                                                                                               "click #dandc-profile-link": "useProfileAddress",
                                                                                                                               "click #dandc-offsite-submit": "submitOffsiteAddress",
                                                                                                                               "click .site": "displaySite"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.countryName = this.options.countryName;
                                                                                                                               this.template = this.options.template.html();
                                                                                                                               this.dandcView = this.options.dandcView;
                                                                                                                               this.model.set({
                                                                                                                                   content: this.content,
                                                                                                                                   countryName: this.countryName,
                                                                                                                                   template: this.template
                                                                                                                               });
                                                                                                                               window.OffsiteModel = this.model
                                                                                                                           },
                                                                                                                           useProfileAddress: function() {
                                                                                                                               var a = this.model.get("addressInfo");
                                                                                                                               this.$el.find("#address1").val(a.address1);
                                                                                                                               this.$el.find("#address2").val(a.address2);
                                                                                                                               this.$el.find("#city-name").val(a.city);
                                                                                                                               this.$el.find("#postal-code").val(a.zip);
                                                                                                                               this.$el.find("#country-code").val(a.country);
                                                                                                                               this.$el.find("#country-name").val(this.model.get("countryNameForAddressInfo"))
                                                                                                                           },
                                                                                                                           displaySite: function(a) {
                                                                                                                               var c;
                                                                                                                               "site-delivery" === b(a.currentTarget).attr("id") ? c = "D" : "site-collection" === b(a.currentTarget).attr("id") && (c = "C");
                                                                                                                               require(["reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter"], function(a) {
                                                                                                                                   a.showCountriesView(c, b("#dandc-tpl"), window.OffsiteModel.get("content").DandCView.DandC.locationSearch)
                                                                                                                               });
                                                                                                                               this.postDisplaySite()
                                                                                                                           },
                                                                                                                           postDisplaySite: function() {},
                                                                                                                           submitOffsiteAddress: function() {
                                                                                                                               var a = this,
                                                                                                                                   c = {
                                                                                                                                       address1: this.$el.find("#address1").val(),
                                                                                                                                       address2: this.$el.find("#address2").val(),
                                                                                                                                       cityName: this.$el.find("#city-name").val(),
                                                                                                                                       postalCode: this.$el.find("#postal-code").val(),
                                                                                                                                       countryCode: this.$el.find("#country-code").val(),
                                                                                                                                       deliverOrCollectFlag: this.model.get("deliverOrCollectFlag")
                                                                                                                                   },
                                                                                                                                   e = g.config.rootContext + "/rest/hertz/v2/itinerary/vehicles/deliveryAndCollect/offsite";
                                                                                                                               i.ajaxWithRetry({
                                                                                                                                   type: "POST",
                                                                                                                                   headers: {
                                                                                                                                       "cache-control": "no-cache"
                                                                                                                                   },
                                                                                                                                   data: JSON.stringify(c),
                                                                                                                                   dataType: "json",
                                                                                                                                   contentType: "application/json",
                                                                                                                                   url: e,
                                                                                                                                   success: function(d) {
                                                                                                                                       if (d && d.data) {
                                                                                                                                           var c = a.model.get("deliverOrCollectFlag");
                                                                                                                                           "D" == c ? b.publish(htz.res.config.ReservationConstants.LOCATION_DELIVERY_PICKUP, {
                                                                                                                                               formData: {
                                                                                                                                                   pickupLocation: "Deliver to: " + d.data.locationName,
                                                                                                                                                   pickupHiddenEOAG: d.data.eoagCode,
                                                                                                                                                   isDeliveryChanged: ""
                                                                                                                                               },
                                                                                                                                               metaData: {
                                                                                                                                                   deliveryLocation: d.data
                                                                                                                                               }
                                                                                                                                           }) : "C" == c && b.publish(htz.res.config.ReservationConstants.LOCATION_COLLECTION_DROPOFF, {
                                                                                                                                               formData: {
                                                                                                                                                   dropoffLocation: "Collect from: " + d.data.locationName,
                                                                                                                                                   dropoffHiddenEOAG: d.data.eoagCode,
                                                                                                                                                   isCollectChanged: ""
                                                                                                                                               },
                                                                                                                                               metaData: {
                                                                                                                                                   collectionLocation: d.data
                                                                                                                                               }
                                                                                                                                           });
                                                                                                                                           a.closeOverlay()
                                                                                                                                       }
                                                                                                                                   },
                                                                                                                                   error: function(a) {
                                                                                                                                       a &&
                                                                                                                                           a.responseText && (a = JSON.parse(a.responseText).message, h.displayAllErrors(a, "#dnc-error-list"))
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               b("#dandc-offsite-select").remove();
                                                                                                                               b("#dandc-overlay").empty();
                                                                                                                               var a = window.OffsiteModel;
                                                                                                                               b("#dandc-overlay").append(e.template(a.get("template"), {
                                                                                                                                   model: a.attributes,
                                                                                                                                   countryName: a.get("countryName"),
                                                                                                                                   content: a.get("content")
                                                                                                                               }))
                                                                                                                           },
                                                                                                                           closeOverlay: function() {
                                                                                                                               this.dandcView.closeOverlay()
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/view/delivery-and-collection-view", "jquery underscore backbone config/app-config utils/utils-proxy reservation/delivery-and-collection/core/view/delivery-and-collection-country-list-view".split(" "), function(a, g, h, e, c, i) {
                                                                                                                       function f(b) {
                                                                                                                           null === d ? d = c.getLightbox() : b && (d = c.getLightbox());
                                                                                                                           return d
                                                                                                                       }
                                                                                                                       var d = null;
                                                                                                                       return h.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template.html();
                                                                                                                               this.locType = this.options.locType;
                                                                                                                               this.presenter = this.options.presenter;
                                                                                                                               this.title = this.options.title
                                                                                                                           },
                                                                                                                           retrieveContent: function() {
                                                                                                                               return e.config.apiDomain + "/rest/content/" + e.config.subSystemId + "/" + e.config.dialect + "/all/reservation/delivery-and-collection/delivery-and-collection?callback=define"
                                                                                                                           },
                                                                                                                           displayDeliveryAndCollection: function(b) {
                                                                                                                               this.$el.append(g.template(this.template, {
                                                                                                                                   content: b
                                                                                                                               }));
                                                                                                                               this.displayCountryListView(b)
                                                                                                                           },
                                                                                                                           displayCountryListView: function(b) {
                                                                                                                               new i({
                                                                                                                                   collection: this.collection,
                                                                                                                                   content: b,
                                                                                                                                   el: this.$el,
                                                                                                                                   presenter: this.presenter,
                                                                                                                                   locType: this.locType,
                                                                                                                                   dandcView: this
                                                                                                                               });
                                                                                                                               f(!0).overlay({
                                                                                                                                   title: this.title,
                                                                                                                                   width: 500,
                                                                                                                                   center: !0,
                                                                                                                                   dismiss: !1
                                                                                                                               }, a(this.el))
                                                                                                                           },
                                                                                                                           cleanupPreviousResults: function() {
                                                                                                                               a("#dandc-countries-section").remove();
                                                                                                                               a("#dandc-cities-section").remove();
                                                                                                                               a("#dandc-locations-section").remove();
                                                                                                                               a("#dandc-offsite-select").remove()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               var b = this,
                                                                                                                                   a = this.retrieveContent();
                                                                                                                               c.getSpinner().spin();
                                                                                                                               require([a], function(a) {
                                                                                                                                   b.displayDeliveryAndCollection(a)
                                                                                                                               });
                                                                                                                               this.cleanupPreviousResults();
                                                                                                                               c.getSpinner().stop();
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           closeOverlay: function() {
                                                                                                                               f().closeOverlay()
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/delivery-and-collection/core/presenter/delivery-and-collection-presenter", "config/app-config utils/utils utils/utils-proxy reservation/delivery-and-collection/core/model/delivery-and-collection-model reservation/delivery-and-collection/core/model/dandc-city-model reservation/delivery-and-collection/core/model/dandc-location-model reservation/delivery-and-collection/core/model/dandc-offsite-model reservation/delivery-and-collection/core/view/delivery-and-collection-view reservation/delivery-and-collection/core/view/delivery-and-collection-city-list-view reservation/delivery-and-collection/core/view/delivery-and-collection-location-list-view reservation/delivery-and-collection/core/view/delivery-and-collection-offsite-view reservation/delivery-and-collection/core/model/location-details-model reservation/delivery-and-collection/core/view/location-details-view backbone".split(" "),
                                                                                                                       function(e, k, n, o, p, q, r, s, t, u, v, w, x) {
                                                                                                                           function l() {
                                                                                                                               null == j && (j = n.getLightbox());
                                                                                                                               return j
                                                                                                                           }
                                                                                                                           var j = null,
                                                                                                                               i = null,
                                                                                                                               g = {
                                                                                                                                   showCountriesView: function(a, b, c) {
                                                                                                                                       var d = new o({
                                                                                                                                           locType: a
                                                                                                                                       });
                                                                                                                                       d.fetch({
                                                                                                                                           async: !1
                                                                                                                                       });
                                                                                                                                       this.dandcViewRef = (new s({
                                                                                                                                           collection: d,
                                                                                                                                           template: b,
                                                                                                                                           locType: a,
                                                                                                                                           presenter: g,
                                                                                                                                           title: c
                                                                                                                                       })).render()
                                                                                                                                   },
                                                                                                                                   getCities: function(a, b, c, d, h, e) {
                                                                                                                                       var f = new p({
                                                                                                                                           options: {
                                                                                                                                               locType: a,
                                                                                                                                               countryCode: b
                                                                                                                                           }
                                                                                                                                       });
                                                                                                                                       f.fetch({
                                                                                                                                           async: !1,
                                                                                                                                           success: function(m) {
                                                                                                                                               if (0 < f.length || m.countryOffsiteFlag) i && i.stopListening(), i = new t({
                                                                                                                                                   el: e,
                                                                                                                                                   collection: f,
                                                                                                                                                   template: $("#dandc-cities-tpl"),
                                                                                                                                                   content: d,
                                                                                                                                                   presenter: g,
                                                                                                                                                   locType: a,
                                                                                                                                                   countryCode: b,
                                                                                                                                                   countryName: c,
                                                                                                                                                   dandcView: h,
                                                                                                                                                   showOffsite: m.countryOffsiteFlag
                                                                                                                                               }), i.render()
                                                                                                                                           },
                                                                                                                                           error: function(a, b) {
                                                                                                                                               if (b && b.responseText) {
                                                                                                                                                   var c = JSON.parse(b.responseText).message;
                                                                                                                                                   k.displayAllErrors(c, "#dnc-error-list")
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       })
                                                                                                                                   },
                                                                                                                                   showOffsite: function(a, b, c, d, h) {
                                                                                                                                       a = new r({
                                                                                                                                           options: {
                                                                                                                                               locType: a,
                                                                                                                                               countryCode: b,
                                                                                                                                               countryName: c
                                                                                                                                           }
                                                                                                                                       });
                                                                                                                                       a.fetch({
                                                                                                                                           async: !1
                                                                                                                                       });
                                                                                                                                       (new v({
                                                                                                                                           el: $("#dandc-overlay"),
                                                                                                                                           model: a,
                                                                                                                                           template: $("#dnc-offsite-form-tpl"),
                                                                                                                                           content: d,
                                                                                                                                           presenter: g,
                                                                                                                                           countryName: c,
                                                                                                                                           dandcView: h
                                                                                                                                       })).render()
                                                                                                                                   },
                                                                                                                                   getLocations: function(a,
                                                                                                                                       b, c, d, h, e) {
                                                                                                                                       var f = new q({
                                                                                                                                           options: {
                                                                                                                                               locType: a,
                                                                                                                                               countryCode: b,
                                                                                                                                               city: c
                                                                                                                                           }
                                                                                                                                       });
                                                                                                                                       f.fetch({
                                                                                                                                           async: !1,
                                                                                                                                           success: function() {
                                                                                                                                               (new u({
                                                                                                                                                   el: e,
                                                                                                                                                   collection: f,
                                                                                                                                                   template: $("#dandc-locations-tpl"),
                                                                                                                                                   content: d,
                                                                                                                                                   presenter: g,
                                                                                                                                                   locType: a,
                                                                                                                                                   dandcView: h
                                                                                                                                               })).render()
                                                                                                                                           },
                                                                                                                                           error: function(a, b) {
                                                                                                                                               if (b && b.responseText) {
                                                                                                                                                   var c = JSON.parse(b.responseText).message;
                                                                                                                                                   k.displayAllErrors(c, "#dnc-error-list")
                                                                                                                                               }
                                                                                                                                           }
                                                                                                                                       })
                                                                                                                                   },
                                                                                                                                   showLocationInfo: function(a) {
                                                                                                                                       require([e.config.apiDomain + "/rest/content/" + e.config.subSystemId + "/" + e.config.dialect + "/all/reservation/delivery-and-collection/dnc-location-details?callback=define"],
                                                                                                                                           function(b) {
                                                                                                                                               var c = b.locationResultsGlobalView.locationResultsGlobal.locations,
                                                                                                                                                   d = new w({
                                                                                                                                                       eoag: a
                                                                                                                                                   }, {
                                                                                                                                                       eoag: a
                                                                                                                                                   });
                                                                                                                                               htz.utils.config.UtilConfig.getSpinner().spin();
                                                                                                                                               d.fetch({
                                                                                                                                                   cache: !1,
                                                                                                                                                   dataType: "jsonp",
                                                                                                                                                   success: function(a) {
                                                                                                                                                       htz.utils.config.UtilConfig.getSpinner().stop();
                                                                                                                                                       a = (new x({
                                                                                                                                                           model: a,
                                                                                                                                                           content: b,
                                                                                                                                                           template: $("#location-details-tpl")
                                                                                                                                                       })).render();
                                                                                                                                                       l().overlay({
                                                                                                                                                           title: c,
                                                                                                                                                           width: 500,
                                                                                                                                                           center: !0
                                                                                                                                                       }, a.el)
                                                                                                                                                   }
                                                                                                                                               })
                                                                                                                                           })
                                                                                                                                   },
                                                                                                                                   closeOverlay: function() {
                                                                                                                                       l().closeOverlay()
                                                                                                                                   }
                                                                                                                               };
                                                                                                                           return g
                                                                                                                       });
                                                                                                                   define("reservation/reservation-info/core/model/reservation-info-model", ["backbone", "utils/utils"], function() {
                                                                                                                       var a = null;
                                                                                                                       return {
                                                                                                                           getReservationId: function() {
                                                                                                                               return a
                                                                                                                           },
                                                                                                                           setReservationId: function(b) {
                                                                                                                               a = b
                                                                                                                           },
                                                                                                                           hasReservationId: function() {
                                                                                                                               return null != a
                                                                                                                           },
                                                                                                                           getSafeReservationId: function() {
                                                                                                                               var b;
                                                                                                                               b = a && null != a ? a : 1;
                                                                                                                               return b
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.res.common");
                                                                                                                   var retryView = function() {
                                                                                                                       return {
                                                                                                                           submit: function(b, a, c, d, h) {
                                                                                                                               var e = !1,
                                                                                                                                   f = 0,
                                                                                                                                   i = this;
                                                                                                                               $.ajax({
                                                                                                                                   url: a,
                                                                                                                                   type: "POST",
                                                                                                                                   headers: {
                                                                                                                                       "cache-control": "no-cache"
                                                                                                                                   },
                                                                                                                                   data: JSON.stringify(c),
                                                                                                                                   dataType: "json",
                                                                                                                                   contentType: "application/json",
                                                                                                                                   success: function(g) {
                                                                                                                                       g && g.resultInfo ? "retry" === g.resultInfo.result ? (0 === b ? c = {
                                                                                                                                               qpRetryFail: !0
                                                                                                                                           } : (--b, f = g.data.retryInterval), setTimeout(function() {
                                                                                                                                               i.submit(b, a, c, d, h)
                                                                                                                                           }, f)) : process.getStep() === htz.res.config.ReservationConstants.VEHICLES || process.getStep() === htz.res.config.ReservationConstants.EXTRAS ?
                                                                                                                                           h.setSessionData(g, d) : e = !0 : e = !0
                                                                                                                                   },
                                                                                                                                   error: function() {
                                                                                                                                       e = !0
                                                                                                                                   },
                                                                                                                                   complete: function() {
                                                                                                                                       e && utilProxy.getSpinner().stop()
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           handleRetryResponse: function(b, a, c) {
                                                                                                                               b && b.resultInfo ? "retry" === b.resultInfo.result ? (a.firstRetry && (0 < b.data.maxRetries ? (a.maxRetries = b.data.maxRetries - 1, a.retryInterval = b.data.retryInterval) : (a.maxRetries = 0, data = {
                                                                                                                                       qpRetryFail: !0
                                                                                                                                   }), a.firstRetry = !1, a.retryCount = 0), a.maxRetries -= 1, a.retryInterval = b.data.retryInterval, a.retryCount++, setTimeout(function() {
                                                                                                                                       c.retry(a)
                                                                                                                                   }, a.retryInterval)) : c.success() :
                                                                                                                                   c.success()
                                                                                                                           },
                                                                                                                           saveWithRetry: function(b, a, c) {
                                                                                                                               var d = this,
                                                                                                                                   h = c.success,
                                                                                                                                   e = b.toJSON(),
                                                                                                                                   f = function(g) {
                                                                                                                                       g ? (newOptions = _.extend(c, {
                                                                                                                                           data: JSON.stringify({
                                                                                                                                               retryCount: g.retryCount
                                                                                                                                           }),
                                                                                                                                           contentType: "application/json"
                                                                                                                                       }), b.save({}, newOptions)) : b.save(a, c)
                                                                                                                                   },
                                                                                                                                   i = {
                                                                                                                                       maxRetries: null,
                                                                                                                                       retryInterval: 0,
                                                                                                                                       firstRetry: !0
                                                                                                                                   };
                                                                                                                               c.success = function(b, a) {
                                                                                                                                   d.handleRetryResponse(a, i, {
                                                                                                                                       retry: function(a) {
                                                                                                                                           d.restorePrevData(b, e);
                                                                                                                                           f(a)
                                                                                                                                       },
                                                                                                                                       success: function() {
                                                                                                                                           h(b, a)
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           d.restorePrevData(b, e);
                                                                                                                                           c.error(b, a, i.retryCount)
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               };
                                                                                                                               f()
                                                                                                                           },
                                                                                                                           ajaxWithRetry: function(b) {
                                                                                                                               var a =
                                                                                                                                   this,
                                                                                                                                   c = b.success,
                                                                                                                                   d = function(a) {
                                                                                                                                       a && (b.data = JSON.stringify({
                                                                                                                                           retryCount: a.retryCount
                                                                                                                                       }));
                                                                                                                                       $.ajax(b)
                                                                                                                                   },
                                                                                                                                   h = {
                                                                                                                                       maxRetries: null,
                                                                                                                                       retryInterval: 0,
                                                                                                                                       firstRetry: !0
                                                                                                                                   };
                                                                                                                               b.success = function(e, f, i) {
                                                                                                                                   Utils.sessionTimedOut(i) || a.handleRetryResponse(e, h, {
                                                                                                                                       retry: function(a) {
                                                                                                                                           d(a)
                                                                                                                                       },
                                                                                                                                       success: function() {
                                                                                                                                           c(e)
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           b.error(e)
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               };
                                                                                                                               d()
                                                                                                                           },
                                                                                                                           fetchWithRetry: function(b, a) {
                                                                                                                               var c = this,
                                                                                                                                   d = a.success,
                                                                                                                                   h = {
                                                                                                                                       maxRetries: null,
                                                                                                                                       retryInterval: 0,
                                                                                                                                       firstRetry: !0
                                                                                                                                   };
                                                                                                                               a.success = function(e, f) {
                                                                                                                                   c.handleRetryResponse(f, h, {
                                                                                                                                       retry: function() {
                                                                                                                                           b.fetch(a)
                                                                                                                                       },
                                                                                                                                       success: function() {
                                                                                                                                           d(f)
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           a.error(f)
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               };
                                                                                                                               b.fetch(a)
                                                                                                                           },
                                                                                                                           saveChangedWithRetry: function(b, a, c) {
                                                                                                                               var d = this,
                                                                                                                                   h = c.success,
                                                                                                                                   e = b.toJSON(),
                                                                                                                                   f = function(g) {
                                                                                                                                       g ? (newOptions = _.extend(c, {
                                                                                                                                           data: JSON.stringify({
                                                                                                                                               retryCount: g.retryCount
                                                                                                                                           }),
                                                                                                                                           contentType: "application/json"
                                                                                                                                       }), b.save({}, newOptions)) : b.saveChanged(a, c)
                                                                                                                                   },
                                                                                                                                   i = {
                                                                                                                                       maxRetries: null,
                                                                                                                                       retryInterval: null,
                                                                                                                                       firstRetry: !0
                                                                                                                                   };
                                                                                                                               c.success = function(a, b) {
                                                                                                                                   d.handleRetryResponse(b, i, {
                                                                                                                                       retry: function(b) {
                                                                                                                                           d.restorePrevData(a, e);
                                                                                                                                           f(b)
                                                                                                                                       },
                                                                                                                                       success: function() {
                                                                                                                                           h(a, b)
                                                                                                                                       },
                                                                                                                                       error: function() {
                                                                                                                                           d.restorePrevData(a, e);
                                                                                                                                           c.error(a,
                                                                                                                                               b)
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               };
                                                                                                                               f()
                                                                                                                           },
                                                                                                                           restorePrevData: function(b, a) {
                                                                                                                               b.clear({
                                                                                                                                   silent: !0
                                                                                                                               });
                                                                                                                               b.set(a, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }();
                                                                                                                   "function" == typeof define && define.amd && define("reservation/common/retry/core/view/retry-view", ["jquery", "json", "utils/utils-proxy", "utils/utils", "reservation/process-info/core/model/process-model"], function() {
                                                                                                                       return retryView
                                                                                                                   });
                                                                                                                   htz.res.common.RetryView = retryView;
                                                                                                                   define("reservation/utils/core/reservation-utils", "jquery json reservation/process-info/core/model/process-model utils/utils config/app-config utils/sessionhelper reservation/config utils/utils-proxy utils/domhelper reservation/process-config/core/reservation-constants res/res-resource-config-manager".split(" "), function(h, f, k, m, i, e, g, o, s, d, t) {
                                                                                                                       function p() {
                                                                                                                           null == n && (n = o.getLightbox());
                                                                                                                           return n
                                                                                                                       }
                                                                                                                       var n = null,
                                                                                                                           l = {},
                                                                                                                           j;
                                                                                                                       return {
                                                                                                                           getResponseText: function(a) {
                                                                                                                               var b = "",
                                                                                                                                   a = a.responseText;
                                                                                                                               try {
                                                                                                                                   f.parse(a)
                                                                                                                               } catch (c) {
                                                                                                                                   a &&
                                                                                                                                       (0 < a.length && (a = a.replace(/(\r\n|\n|\r)/gm, ""), 100 < a.length && (a = a.substring(0, 100))), b += a)
                                                                                                                               }
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           trackError: function(a, b) {
                                                                                                                               try {
                                                                                                                                   if ("undefined" !== typeof WebTracking) {
                                                                                                                                       var c = k.getStep(),
                                                                                                                                           b = this.getErrorType(c, a),
                                                                                                                                           d = k.getFlow();
                                                                                                                                       b || (b = "error");
                                                                                                                                       WebTracking.setError("debug-runtime-" + b + "" + (d ? "-" + d : "") + "-" + c + "-" + a + "-" + b + "-" + i.config.dialect + "-" + i.config.pos + "-" + m.browserDeviceType(), c)
                                                                                                                                   }
                                                                                                                               } catch (e) {}
                                                                                                                           },
                                                                                                                           handleRenderFail: function(a) {
                                                                                                                               try {
                                                                                                                                   if (o.getSpinner().stop(), !i.config.isApp) {
                                                                                                                                       var b = k.getStep(),
                                                                                                                                           c = this.getErrorType(b,
                                                                                                                                               a);
                                                                                                                                       this.showResubmitOverlay(b, a, c)
                                                                                                                                   }
                                                                                                                               } catch (d) {
                                                                                                                                   alert(htz.homepage.content.reservationErrors.genericErrorContent.technicalDifficulties)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           getResubmitCount: function(a) {
                                                                                                                               return !h.isEmptyObject(l) && l[a] ? l[a] : 0
                                                                                                                           },
                                                                                                                           resetResubmitCount: function(a) {
                                                                                                                               a && (l[j] = 0)
                                                                                                                           },
                                                                                                                           incrementResubmitCount: function(a) {
                                                                                                                               if (a) {
                                                                                                                                   var b = this.getResubmitCount(a);
                                                                                                                                   l[a] = 0 < b ? b + 1 : 1
                                                                                                                               }
                                                                                                                           },
                                                                                                                           resetPrevStep: function(a) {
                                                                                                                               j && j !== a && this.resetResubmitCount(j)
                                                                                                                           },
                                                                                                                           updatePrevState: function(a) {
                                                                                                                               a && (j = a)
                                                                                                                           },
                                                                                                                           getErrorType: function(a, b) {
                                                                                                                               var c = ""; - 1 < ("" + b).indexOf("content.") ?
                                                                                                                                   c = "CONTENT-ERROR" : (c = t.getPageInfo(a).checkElmId || "undefined", c = "TEMPLATE-ERROR-" + c + "-" + (h("#" + c).length ? "exists" : "missing"));
                                                                                                                               return c
                                                                                                                           },
                                                                                                                           showResubmitOverlay: function(a, b, c) {
                                                                                                                               var d, e, f, g = !1;
                                                                                                                               e = this.getResubmitCount(a);
                                                                                                                               var k = "text!" + i.config.rootContext + "/assets/" + i.config.buildId + "/html/all/reservation/common/resubmit-overlay.html",
                                                                                                                                   l = i.config.apiDomain + "/rest/content/" + htz.config.subSystemId + "/" + htz.config.dialect + "/all/reservation/common/resubmit-overlay?callback=define",
                                                                                                                                   j = p();
                                                                                                                               j.inUse && j.closeOverlay();
                                                                                                                               1 > e ? (f = "#resubmit-overlay-tpl", e = "resubmit-" + e, this.resetPrevStep(a), this.incrementResubmitCount(a), this.updatePrevState(a)) : (f = "#contact-us-overlay-tpl", e = "contact-us", g = !0);
                                                                                                                               d = m.getUniqueErrorKey();
                                                                                                                               require(["reservation/page-resubmit/core/view/page-resubmit-view", k, l], function(b, e, r) {
                                                                                                                                   e && s.addTemplate("resubmit", e);
                                                                                                                                   p().overlay({
                                                                                                                                       title: r.reservationPopups.resubmitOverlay.resubmitOverlayTitle,
                                                                                                                                       dismiss: !1
                                                                                                                                   }, (new b({
                                                                                                                                       errorKey: d,
                                                                                                                                       step: a,
                                                                                                                                       template: h(f).html(),
                                                                                                                                       errorType: c,
                                                                                                                                       lBoxRef: j,
                                                                                                                                       content: r,
                                                                                                                                       isContactUs: g
                                                                                                                                   })).render().el)
                                                                                                                               });
                                                                                                                               this.trackRuntimeError(b, a, c, e, d)
                                                                                                                           },
                                                                                                                           trackRuntimeError: function(a, b, c, d, e) {
                                                                                                                               if ("undefined" !== typeof WebTracking) {
                                                                                                                                   var f = k.getFlow(),
                                                                                                                                       f = f ? "-" + f : "",
                                                                                                                                       g = this.getPickupLocationCode(),
                                                                                                                                       g = g ? "-" + g : "",
                                                                                                                                       h = m.isPrivateMode();
                                                                                                                                   WebTracking.setError("debug-runtime-error-" + e + f + "-" + b + "-" + a + "-" + c + "-" + d + "-" + i.config.dialect + "-" + i.config.pos + g + (h ? "-" + h : "") + "-" + m.browserDeviceType(), b)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           trackWarning: function(a) {
                                                                                                                               if (a && "undefined" !== typeof WebTracking) {
                                                                                                                                   var b = [];
                                                                                                                                   b.push("debug-runtime-warning");
                                                                                                                                   var c = k.getFlow();
                                                                                                                                   c && b.push(c);
                                                                                                                                   (c =
                                                                                                                                       k.getStep()) && b.push(c);
                                                                                                                                   a.warning && b.push(a.warning);
                                                                                                                                   b.push(i.config.dialect);
                                                                                                                                   b.push(i.config.pos);
                                                                                                                                   (a = this.getPickupLocationCode()) && b.push(a);
                                                                                                                                   (a = this.getResData("pickupDate")) && b.push(a);
                                                                                                                                   (a = this.getResData("pickupTime")) && b.push(a);
                                                                                                                                   (a = this.getResData("returnDate")) && b.push(a);
                                                                                                                                   (a = this.getResData("returnTime")) && b.push(a);
                                                                                                                                   b.push(m.browserDeviceType());
                                                                                                                                   WebTracking.setError(b.join("-"), c)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           buildErrorMessage: function(a, b) {
                                                                                                                               if (!b) return "";
                                                                                                                               var c = e.getItem(d.RESERVATION_ERROR_LIST);
                                                                                                                               if (c) c = f.parse(c);
                                                                                                                               else if (a) {
                                                                                                                                   for (var c = {}, q, g = 0; g < a.length; g++)
                                                                                                                                       if (q = a[g].errorCode) c[h.trim(q)] = a[g].errorMessage;
                                                                                                                                   e.setItem(d.RESERVATION_ERROR_LIST, f.stringify(c))
                                                                                                                               }
                                                                                                                               b = h.trim(b);
                                                                                                                               return c[b] + " [" + b + "]"
                                                                                                                           },
                                                                                                                           rqrOverlay: function() {
                                                                                                                               var a = Modernizr && Modernizr.touch ? "touchstart" : "click",
                                                                                                                                   b = this;
                                                                                                                               h(document).off(a, ".rqr-policy").on(a, ".rqr-policy", function(a) {
                                                                                                                                   b.openRQRLink(a);
                                                                                                                                   return !1
                                                                                                                               })
                                                                                                                           },
                                                                                                                           openRQRLink: function(a) {
                                                                                                                               require(["reservation/policy-details-overlay/core/presenter/policy-details-overlay-presenter"], function(b) {
                                                                                                                                   b.showOverlayPopUp(a)
                                                                                                                               })
                                                                                                                           },
                                                                                                                           checkForReferrerUrl: function() {
                                                                                                                               var a =
                                                                                                                                   e.getItem(d.ITINERARY_DATA),
                                                                                                                                   b;
                                                                                                                               if (a) try {
                                                                                                                                   a = f.parse(a), b = a.metaData.referrerUrl
                                                                                                                               } catch (c) {
                                                                                                                                   b = htz.homepage.json.data.model.metaData.referrerUrl
                                                                                                                               } else b = htz.homepage.json.data.model.metaData.referrerUrl;
                                                                                                                               b && e.setItem(d.REFERRER_URL, b)
                                                                                                                           },
                                                                                                                           keepTrackOfGeoPrefLocation: function(a) {
                                                                                                                               try {
                                                                                                                                   if (a) {
                                                                                                                                       var b = e.getItem(d.ITINERARY_SC_DATA);
                                                                                                                                       if (b)
                                                                                                                                           if (b = f.parse(b), h.isArray(b) && 0 < b.length) {
                                                                                                                                               if (0 <= h.inArray(a, b)) return;
                                                                                                                                               b.push(a)
                                                                                                                                           } else b = [a];
                                                                                                                                       else b = [a];
                                                                                                                                       e.setItem(d.ITINERARY_SC_DATA, f.stringify(b))
                                                                                                                                   }
                                                                                                                               } catch (c) {}
                                                                                                                           },
                                                                                                                           checkIfGeoPrefLocation: function(a) {
                                                                                                                               try {
                                                                                                                                   if (a) {
                                                                                                                                       var b =
                                                                                                                                           e.getItem(d.ITINERARY_SC_DATA);
                                                                                                                                       if (b && (b = f.parse(b), h.isArray(b) && 0 < b.length)) return 0 <= h.inArray(a, b)
                                                                                                                                   }
                                                                                                                               } catch (c) {}
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           getResData: function(a) {
                                                                                                                               if (!a) return null;
                                                                                                                               try {
                                                                                                                                   var b = e.getItem(d.RESERVATION_INFORMATION_DATA);
                                                                                                                                   if (b) return b = f.parse(b), b[a]
                                                                                                                               } catch (c) {}
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           getPickupLocationCode: function() {
                                                                                                                               try {
                                                                                                                                   var a = e.getItem(d.RESERVATION_INFORMATION_DATA);
                                                                                                                                   if (a) return a = f.parse(a), a.pickupLocationCode
                                                                                                                               } catch (b) {}
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           getCurrency: function() {
                                                                                                                               try {
                                                                                                                                   var a = e.getItem(d.RESERVATION_INFORMATION_DATA);
                                                                                                                                   if (a) return a =
                                                                                                                                       f.parse(a), a.currency
                                                                                                                               } catch (b) {}
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           getAlternateCurrency: function() {
                                                                                                                               try {
                                                                                                                                   var a = e.getItem(d.RESERVATION_INFORMATION_DATA);
                                                                                                                                   if (a) return a = f.parse(a), a.alternateCurrency
                                                                                                                               } catch (b) {}
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           getApproxTotal: function() {
                                                                                                                               try {
                                                                                                                                   var a = e.getItem(d.RESERVATION_INFORMATION_DATA);
                                                                                                                                   if (a) return a = f.parse(a), a.approxTotal
                                                                                                                               } catch (b) {}
                                                                                                                               return null
                                                                                                                           },
                                                                                                                           updateReservationInfo: function(a) {
                                                                                                                               try {
                                                                                                                                   if (a) {
                                                                                                                                       var b = e.getItem(d.RESERVATION_INFORMATION_DATA),
                                                                                                                                           b = b ? f.parse(b) : {},
                                                                                                                                           c = !1;
                                                                                                                                       a.dialect && (b.dialect = a.dialect, c = !0);
                                                                                                                                       a.pickupLocationCode &&
                                                                                                                                           (b.pickupLocationCode = a.pickupLocationCode, c = !0);
                                                                                                                                       a.currency ? (b.currency = a.currency, c = !0) : delete b.currency;
                                                                                                                                       a.alternateCurrency ? (b.alternateCurrency = a.alternateCurrency, c = !0) : delete b.alternateCurrency;
                                                                                                                                       a.approxTotal ? (b.approxTotal = a.approxTotal, c = !0) : delete b.approxTotal;
                                                                                                                                       a.pickupDate && (b.pickupDate = a.pickupDate, c = !0);
                                                                                                                                       a.pickupTime && (b.pickupTime = a.pickupTime, c = !0);
                                                                                                                                       a.returnDate && (b.returnDate = a.returnDate, c = !0);
                                                                                                                                       a.returnTime && (b.returnTime = a.returnTime, c = !0);
                                                                                                                                       c && e.setItem(d.RESERVATION_INFORMATION_DATA,
                                                                                                                                           f.stringify(b))
                                                                                                                                   }
                                                                                                                               } catch (g) {}
                                                                                                                           },
                                                                                                                           approxRateDecider: function(a) {
                                                                                                                               if (a.isPrepay && a.currency && a.alternateCurrency && 0 < a.payLater) {
                                                                                                                                   var b = a.currency === a.alternateCurrency,
                                                                                                                                       c = 0 < a.payLater ? !0 : !1;
                                                                                                                                   return a.isPrepay && !b && c
                                                                                                                               }
                                                                                                                               return !1
                                                                                                                           },
                                                                                                                           formatDate: function(a, b) {
                                                                                                                               isNaN(a.getDate()) && (a = new Date);
                                                                                                                               var c = a.getDate(),
                                                                                                                                   d = a.getMonth() + 1,
                                                                                                                                   c = 10 > c ? "0" + c : c,
                                                                                                                                   d = 10 > d ? "0" + d : d,
                                                                                                                                   e = a.getFullYear();
                                                                                                                               return b ? [c, d, e].join("/") : [d, c, e].join("/")
                                                                                                                           },
                                                                                                                           standardizeDate: function(a, b) {
                                                                                                                               var c = a.split("/"),
                                                                                                                                   d = c[2],
                                                                                                                                   e;
                                                                                                                               b ? (e = c[1], c = c[0]) : (e = c[0], c = c[1]);
                                                                                                                               return [d,
                                                                                                                                   e, c
                                                                                                                               ].join("/")
                                                                                                                           },
                                                                                                                           goToPageFromResData: function(a) {
                                                                                                                               if (a) {
                                                                                                                                   var b = a.get("data"),
                                                                                                                                       a = a.get("message"),
                                                                                                                                       c = k.isModify();
                                                                                                                                   if (b)
                                                                                                                                       if (b.model && b.model.categories) {
                                                                                                                                           e.setItem(d.EXTRAS_DATA, f.stringify(b.model));
                                                                                                                                           e.setItem(d.ITINERARY_INFO_DATA, f.stringify(b.itinerary));
                                                                                                                                           e.setItem(d.RATE_DETAILS_DATA, f.stringify(b.rateDetails));
                                                                                                                                           if (a) try {
                                                                                                                                               e.setItem(d.EXTRAS_ERROR_DATA, f.stringify(a))
                                                                                                                                           } catch (h) {}
                                                                                                                                           c ? g.getRotar().rotate(d.MODIFY_EXTRAS) : g.getRotar().rotate(d.EXTRAS)
                                                                                                                                       } else if (b.model && b.model.vehicles) {
                                                                                                                                       if (a) try {
                                                                                                                                           e.setItem(d.VEHICLES_ERROR_DATA,
                                                                                                                                               f.stringify(a))
                                                                                                                                       } catch (i) {}
                                                                                                                                       e.setItem(d.VEHICLES_DATA, f.stringify(b.model));
                                                                                                                                       e.setItem(d.ITINERARY_INFO_DATA, f.stringify(b.itinerary));
                                                                                                                                       e.setItem(d.RATE_DETAILS_DATA, f.stringify(b.rateDetails));
                                                                                                                                       c ? g.getRotar().rotate(d.MODIFY_VEHICLES) : g.getRotar().rotate(d.VEHICLES)
                                                                                                                                   } else if (b.model && b.itinerary && b.rateDetails) {
                                                                                                                                       if (a) try {
                                                                                                                                           e.setItem(d.REVIEW_AND_BOOK_ERROR_DATA, f.stringify(a))
                                                                                                                                       } catch (j) {}
                                                                                                                                       e.setItem(d.REVIEW_AND_BOOK_DATA, f.stringify(b.model));
                                                                                                                                       e.setItem(d.ITINERARY_INFO_DATA, f.stringify(b.itinerary));
                                                                                                                                       e.setItem(d.RATE_DETAILS_DATA,
                                                                                                                                           f.stringify(b.rateDetails));
                                                                                                                                       c ? g.getRotar().rotate(d.MODIFY_REVIEW_AND_BOOK) : g.getRotar().rotate(d.REVIEW_AND_BOOK)
                                                                                                                                   } else if (b.model) {
                                                                                                                                       if (a) try {
                                                                                                                                           e.setItem(d.ITINERARY_ERROR_DATA, f.stringify(a)), e.setItem(d.ERRORS, f.stringify(a))
                                                                                                                                       } catch (l) {}
                                                                                                                                       c ? (e.getItem(d.CONFIRMATION_NUMBER) && e.setItem(d.ITINERARY_DATA, f.stringify(b.model)), g.getRotar().rotate(d.MODIFY_ITINERARY)) : (e.setItem(d.ITINERARY_DATA, f.stringify(b.model)), g.getRotar().rotate(d.ITINERARY))
                                                                                                                                   } else this.goToItineraryPage(c);
                                                                                                                                   else this.goToItineraryPage(c)
                                                                                                                               }
                                                                                                                           },
                                                                                                                           goToItineraryPage: function(a) {
                                                                                                                               a ? g.getRotar().rotate(d.MODIFY_ITINERARY) : g.getRotar().rotate(d.ITINERARY)
                                                                                                                           },
                                                                                                                           generateVehicleDetailTitle: function(a, b) {
                                                                                                                               var c = a.get("carGroup"),
                                                                                                                                   d = b.orSimilar || b.orSimilarText || "or similar",
                                                                                                                                   e = b.groupText || "Group",
                                                                                                                                   d = a.get("unique") ? "" : " <small>" + d + "</small>";
                                                                                                                               return (c ? "(" + e + " " + c + ") " : "") + a.get("name") + d
                                                                                                                           },
                                                                                                                           getShowMeLinkIndex: function(a) {
                                                                                                                               var b = 0;
                                                                                                                               h.each(a.reservationPopups.carTypeDetailsPopupContent.carTypeDetails, function(a, d) {
                                                                                                                                   "ACAR" == d.carSipp && (b = a)
                                                                                                                               });
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           clearSessionStorage: function(a) {
                                                                                                                               for (var b =
                                                                                                                                       0; b < a.length; b++) e.removeItem(a[b])
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/utils/core/test-and-target", ["config/app-config", "json", "utils/sessionhelper", "utils/domhelper", "reservation/process-config/core/reservation-constants"], function(f, h, g, i, d) {
                                                                                                                       return {
                                                                                                                           handleTestTarget: function(a) {
                                                                                                                               f.config.isApp ? this.resetConfirmationBackupData() : d.CONFIRMATION === a && (this.getConfirmationData(), this.resetConfirmationBackupData())
                                                                                                                           },
                                                                                                                           getConfirmationData: function() {
                                                                                                                               var a = g.getItem(d.CONFIRMATION_BACKUP_DATA);
                                                                                                                               try {
                                                                                                                                   var a = h.parse(a),
                                                                                                                                       b = {};
                                                                                                                                   a.data && (a = a.data);
                                                                                                                                   var c = a.rateDetails;
                                                                                                                                   c && c.vehicle && (b.vehicleSipp = c.vehicle.sipp);
                                                                                                                                   c && c.rateInfo && (b.rentalTotal = c.rateInfo.approxTotal);
                                                                                                                                   b.confirmationNumber = a.confirmationSummaryInfo.confirmationNumber;
                                                                                                                                   var e = a.itinerary;
                                                                                                                                   b.pickupLocationCode = e.pickupLocation.locationOAGCode;
                                                                                                                                   b.pickupDate = e.pickupDateStandard;
                                                                                                                                   b.returnDate = e.dropoffDateStandard;
                                                                                                                                   return b
                                                                                                                               } catch (f) {
                                                                                                                                   return null
                                                                                                                               }
                                                                                                                           },
                                                                                                                           resetConfirmationBackupData: function() {
                                                                                                                               g.removeItem(d.CONFIRMATION_BACKUP_DATA)
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/common/gold-anytime-overlay/core/view/gold-anytime-overlay-view", ["jquery", "underscore", "backbone"], function(a, b, c) {
                                                                                                                       return c.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(b.template(a(this.template).html(), {
                                                                                                                                   content: this.content
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/policy-details-overlay/core/view/policy-details-overlay-view", ["jquery", "underscore", "utils/utils", "backbone"], function(a, b, d, c) {
                                                                                                                       return c.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.policyDesc = this.options.policyDesc
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(b.template(a(this.template).html(), {
                                                                                                                                   policyDesc: this.policyDesc
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/policy-details-overlay/core/presenter/policy-details-overlay-presenter", "jquery config/app-config backbone utils/utils-proxy utils/domhelper reservation/policy-details-overlay/core/view/policy-details-overlay-view utils/sessionhelper reservation/process-config/core/reservation-constants helpers/resource-loader".split(" "), function(g, c, i, j, k, l, m, n, h) {
                                                                                                                       function d() {
                                                                                                                           null == a && (a = j.getLightbox());
                                                                                                                           return a
                                                                                                                       }
                                                                                                                       var a = null;
                                                                                                                       return {
                                                                                                                           showOverlayPopUp: function(f) {
                                                                                                                               var o = i.Model.extend({}),
                                                                                                                                   b = g(f.currentTarget),
                                                                                                                                   a = b.attr("data-key") || b.attr("lang"),
                                                                                                                                   b = m.getItem(n.RESERVATION_INFORMATION_DATA),
                                                                                                                                   e = this;
                                                                                                                               b && (b = JSON.parse(b));
                                                                                                                               a = c.config.apiDomain + "/rest/hertz/v2/rental-policy/policyDetail/systemId/" + c.config.systemId + "/subsystemId/" + c.config.subSystemId + "/dialect/" + b.dialect + "/eoagCode/" + b.pickupLocationCode + "/policyType/" + a;
                                                                                                                               d().overlay({
                                                                                                                                   title: g(f.currentTarget).text(),
                                                                                                                                   width: 700
                                                                                                                               });
                                                                                                                               d().showProgress();
                                                                                                                               !b.dialect || !b.pickupLocationCode ? e.loadPolicyErrorMsg(!0) : (new o).fetch({
                                                                                                                                   dataType: "jsonp",
                                                                                                                                   url: a,
                                                                                                                                   cache: !0,
                                                                                                                                   type: "GET",
                                                                                                                                   success: function(b) {
                                                                                                                                       var a = b.get("data");
                                                                                                                                       a.policyDescription ? h.load({
                                                                                                                                           template: c.config.rootContext + "/assets/" + c.config.buildId + "/html/all/reservation/rate-details-overlay/rate-details-overlay.html",
                                                                                                                                           callback: function(b) {
                                                                                                                                               k.addTemplate("rate-details-overlay", b.template);
                                                                                                                                               d().overlay({
                                                                                                                                                   title: a.policyTitle,
                                                                                                                                                   width: 700
                                                                                                                                               }, (new l({
                                                                                                                                                   template: "#rate-details-overlay-tpl",
                                                                                                                                                   policyDesc: a.policyDescription
                                                                                                                                               })).render().el)
                                                                                                                                           }
                                                                                                                                       }) : e.loadPolicyErrorMsg(!1)
                                                                                                                                   },
                                                                                                                                   error: function(b, a) {
                                                                                                                                       try {
                                                                                                                                           var c = JSON.parse(a.responseText);
                                                                                                                                           "fail" === c.resultInfo.result ?
                                                                                                                                               d().showContent(c.message.messages) : e.loadPolicyErrorMsg(!0)
                                                                                                                                       } catch (f) {
                                                                                                                                           e.loadPolicyErrorMsg(!0)
                                                                                                                                       }
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           },
                                                                                                                           loadPolicyErrorMsg: function(a) {
                                                                                                                               h.load({
                                                                                                                                   content: c.config.apiDomain + "/rest/content/" + c.config.systemId + "/" + c.config.dialect + "/all/reservation/rate-details-overlay/rate-details-overlay",
                                                                                                                                   callback: function(c) {
                                                                                                                                       a ? d().showContent(c.content.reservationGlobals.rentalTerms.policyInfoError) : d().showContent(c.content.reservationGlobals.rateIncludes.rateIncludesDetailsNotAvailable)
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/special-instructions/core/presenter/special-instructions-presenter", ["jquery", "utils/utils-proxy", "config/app-config", "reservation/special-instructions/core/model/special-instructions-model", "reservation/special-instructions/core/view/special-instructions-view"], function(k, a, d, f, g) {
                                                                                                                       function c() {
                                                                                                                           null == b && (b = a.getLightbox());
                                                                                                                           return b
                                                                                                                       }
                                                                                                                       var b = null;
                                                                                                                       return {
                                                                                                                           showSpecialInsPopup: function(b, h, i) {
                                                                                                                               var j = new f,
                                                                                                                                   e = c();
                                                                                                                               e.inUse && e.closeOverlay();
                                                                                                                               j.fetch({
                                                                                                                                   cache: !1,
                                                                                                                                   dataType: "jsonp",
                                                                                                                                   beforeSend: function() {
                                                                                                                                       d.config.isApp ?
                                                                                                                                           htz.utils.Spinner.spin() : a.getSpinner().spin()
                                                                                                                                   },
                                                                                                                                   success: function(a) {
                                                                                                                                       htz.config.isApp && hzm.shared.googleTagManger("Hertz Car Rental Locations", "", "", "", -1);
                                                                                                                                       c().overlay({
                                                                                                                                           title: b,
                                                                                                                                           width: 584,
                                                                                                                                           center: !0,
                                                                                                                                           suppressClose: !0
                                                                                                                                       }, (new g({
                                                                                                                                           template: "#location-popup-tpl",
                                                                                                                                           content: h,
                                                                                                                                           model: a,
                                                                                                                                           lBoxRef: c(),
                                                                                                                                           referrer: i
                                                                                                                                       })).render().el)
                                                                                                                                   },
                                                                                                                                   complete: function() {
                                                                                                                                       d.config.isApp ? htz.utils.Spinner.stop() : a.getSpinner().stop()
                                                                                                                                   }
                                                                                                                               })
                                                                                                                           }
                                                                                                                       }
                                                                                                                   });
                                                                                                                   define("reservation/special-instructions/core/model/special-instructions-model", ["utils/restmodel", "config/app-config", "jquery", "underscore", "backbone"], function(a, b) {
                                                                                                                       return a.extend({
                                                                                                                           url: function() {
                                                                                                                               var a = b.config.apiDomain + "/rest/location/specialInsData/oag/",
                                                                                                                                   c = b.popup.oag;
                                                                                                                               return a + (void 0 != typeof c && "" != c ? c : "") + "?dialect=" + b.config.dialect
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/special-instructions/core/view/special-instructions-view", ["backbone", "utils/utils-proxy"], function(a) {
                                                                                                                       return a.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.template = this.options.template;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.lBoxRef = this.options.lBoxRef;
                                                                                                                               this.referrer = this.options.referrer
                                                                                                                           },
                                                                                                                           events: {
                                                                                                                               "click #ok-btn": "acceptInstructions",
                                                                                                                               "click #popup-msg p a": "navigateHere"
                                                                                                                           },
                                                                                                                           navigateHere: function() {
                                                                                                                               htz.config.isApp && hzm.shared.googleTagManger("Hertz Car Rental Locations", "Reservation Flow",
                                                                                                                                   $("#location-popup h1").text(), "here", -1)
                                                                                                                           },
                                                                                                                           acceptInstructions: function() {
                                                                                                                               htz.config.isApp && hzm.shared.googleTagManger("Hertz Car Rental Locations", "Reservation Flow", $("#location-popup h1").text(), "OK", -1);
                                                                                                                               this.closeOverlay();
                                                                                                                               ("Y" == this.model.get("served_by") || this.model.get("bookable")) && this.referrer.handlePopupSubmit(htz.popup.locType)
                                                                                                                           },
                                                                                                                           closeOverlay: function() {
                                                                                                                               this.lBoxRef.inUse && this.lBoxRef.closeOverlay()
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(_.template($(this.template).html(), {
                                                                                                                                   content: this.content,
                                                                                                                                   data: this.model.attributes
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/model/affiliate-member-ID-verification-model", "backbone json utils/restmodel utils/utils utils/sessionhelper config/app-config".split(" "), function(b, c, a) {
                                                                                                                       return a.extend({
                                                                                                                           defaults: {
                                                                                                                               POS: "",
                                                                                                                               pickupLocationCode: "",
                                                                                                                               dropOffLocationCode: "",
                                                                                                                               CDP: "",
                                                                                                                               dialect: "",
                                                                                                                               referrerURL: ""
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/affiliate-member-verification-popup-view", ["jquery", "underscore", "backbone", "utils/utils-proxy"], function(d, f, h, i) {
                                                                                                                       var c = null;
                                                                                                                       return h.View.extend({
                                                                                                                           events: {
                                                                                                                               "click #submitAffiliateID": "submit",
                                                                                                                               "change input": "eventHandler"
                                                                                                                           },
                                                                                                                           initialize: function() {
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.template = d("#homePageAffiliateMemberView").html();
                                                                                                                               this.name = this.options.name;
                                                                                                                               this.referrer = this.options.referrer;
                                                                                                                               this.cdp = this.options.cdp;
                                                                                                                               this.lBoxRef = this.options.lBoxRef
                                                                                                                           },
                                                                                                                           eventHandler: function(a) {
                                                                                                                               var a =
                                                                                                                                   d(a.target),
                                                                                                                                   b = d.trim(a.val());
                                                                                                                               a.is(":checkbox") && (b = a.is(":checked") ? b : "", "affiliateMemberJoin" === a.attr("name") && a.is(":checked") ? a.closest("#affiliate-member-info").find("#affiliate-member-ID").prop("disabled", !0) : a.closest("#affiliate-member-info").find("#affiliate-member-ID").prop("disabled", !1));
                                                                                                                               this.referrer.formData.set(a.attr("name"), b, {
                                                                                                                                   silent: !0
                                                                                                                               })
                                                                                                                           },
                                                                                                                           submit: function() {
                                                                                                                               var a = this;
                                                                                                                               this.referrer.viewHelper.validateAffiliateMember(this.cdp, this.$el.find("#affiliate-member-ID").val(), this.referrer, !0).done(function() {
                                                                                                                                   a.referrer.submit()
                                                                                                                               }).fail(function(b) {
                                                                                                                                   var e = JSON.parse(b.responseText),
                                                                                                                                       g = e.resultInfo.resultCode;
                                                                                                                                   307 === g || 301 === g ? (null == c && (c = i.getLightbox()), c.overlay({
                                                                                                                                       title: e.content.CDPLbTitle,
                                                                                                                                       width: 654,
                                                                                                                                       center: !0,
                                                                                                                                       dismiss: !1
                                                                                                                                   }, f.template(d("#alternative-cdp-tpl").html(), {
                                                                                                                                       content: a.content,
                                                                                                                                       error: e.message.messages
                                                                                                                                   })), setTimeout(function() {
                                                                                                                                       c.inUse && c.closeOverlay();
                                                                                                                                       a.referrer.formData.set({
                                                                                                                                           affiliateCallCount: htz.res.config.affiliateMemberCallCount[a.referrer.formData.get("companyId")]
                                                                                                                                       }, {
                                                                                                                                           silent: !0
                                                                                                                                       });
                                                                                                                                       a.referrer.submit()
                                                                                                                                   }, 6E3)) : (a.lBoxRef.inUse && a.lBoxRef.closeOverlay(), a.referrer.formData.trigger("error", a.referrer.model, b, a.referrer.referrer.find("#error-list")))
                                                                                                                               })
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(f.template(this.template, {
                                                                                                                                   content: this.content,
                                                                                                                                   name: this.name,
                                                                                                                                   formData: this.referrer.formData
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });
                                                                                                                   define("reservation/itinerary/core/view/threeDS-view", ["jquery", "underscore", "backbone", "utils/utils-proxy"], function(a, f, g, e) {
                                                                                                                       return g.View.extend({
                                                                                                                           initialize: function() {
                                                                                                                               this.referrer = this.options.referrer;
                                                                                                                               this.content = this.options.content;
                                                                                                                               this.metaData = this.model.get("metaData");
                                                                                                                               this.template = a("#3DS-notification-tpl").html()
                                                                                                                           },
                                                                                                                           events: {
                                                                                                                               "click #3ds-link": "submitCVV",
                                                                                                                               "click #close": "close3DS",
                                                                                                                               "click .termsLink": "openTerms"
                                                                                                                           },
                                                                                                                           openTerms: function() {
                                                                                                                               this.openContentInWindow(htz.config.rootContext + "/emember/join/gold/displayTermsAndConditions.do")
                                                                                                                           },
                                                                                                                           openContentInWindow: function(a, b, c) {
                                                                                                                               b || (b = "phone" != htz.deviceGroup ? 750 : window.innerWidth);
                                                                                                                               c || (c = "phone" != htz.deviceGroup ? 450 : window.innerHeight);
                                                                                                                               window.open(a, "Terms_And_Conditions", "toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,width=" + b + ",height=" + c + ",left=" + (window.screen.width / 2 - b / 2) + ",top=" + (window.screen.height / 2 - c / 2)).focus()
                                                                                                                           },
                                                                                                                           submitCVV: function() {
                                                                                                                               var d = this,
                                                                                                                                   b = a("#accept3dsTerms").prop("checked");
                                                                                                                               if (b) {
                                                                                                                                   var c = a("#cvvNumber").val();
                                                                                                                                   a.ajax({
                                                                                                                                       cache: !1,
                                                                                                                                       async: !0,
                                                                                                                                       data: JSON.stringify({
                                                                                                                                           cvvNumber: c,
                                                                                                                                           accept3dsTerms: b
                                                                                                                                       }),
                                                                                                                                       url: "/rentacar/rest/hertz/v2/member/login-cvv",
                                                                                                                                       dataType: "json",
                                                                                                                                       type: "POST",
                                                                                                                                       contentType: "application/json",
                                                                                                                                       success: function() {
                                                                                                                                           d.redirectTo3DS()
                                                                                                                                       },
                                                                                                                                       error: function(b, c, d) {
                                                                                                                                           a("#cvvError").html(b.responseJSON.data);
                                                                                                                                           a("#cvvNumber").addClass("error-input");
                                                                                                                                           console.log("error submitting CVV");
                                                                                                                                           console.log(c);
                                                                                                                                           console.log(b);
                                                                                                                                           console.log(d)
                                                                                                                                       }
                                                                                                                                   })
                                                                                                                               } else a("#cvvError").html(d.content.homePage.homePageContent.threeDTermsError), a(".accept3dsTermsLabel").addClass("error-input")
                                                                                                                           },
                                                                                                                           redirectTo3DS: function() {
                                                                                                                               e.getSpinner().spin();
                                                                                                                               self.LightBox.INSTANCES[0].closeOverlay();
                                                                                                                               (new e.getLightbox).overlay({
                                                                                                                                   url: htz.config.rootContext + "/templates/statemanagement/cyberSourceiFrame.jsp",
                                                                                                                                   width: 560,
                                                                                                                                   center: !0,
                                                                                                                                   scroll: !1,
                                                                                                                                   screen: 70,
                                                                                                                                   title: this.content.homePage.homePageContent.threeDStitle
                                                                                                                               })
                                                                                                                           },
                                                                                                                           close3DS: function() {
                                                                                                                               self.LightBox.INSTANCES[0].closeOverlay();
                                                                                                                               var a = htz.helpers.SessionHelper.getItem("bookAsMember");
                                                                                                                               void 0 === this.metaData.get("threeDMsg");
                                                                                                                               "1" == a && HomePage.bookAsMemberSubmitRes(this.metaData.attributes.firstName)
                                                                                                                           },
                                                                                                                           render: function() {
                                                                                                                               this.$el.append(f.template(this.template, {
                                                                                                                                   content: this.content,
                                                                                                                                   metaData: this.metaData,
                                                                                                                                   currency: htz.config.currency
                                                                                                                               }));
                                                                                                                               return this
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               this.template = this.content = this.referrer = null
                                                                                                                           }
                                                                                                                       })
                                                                                                                   });

                                                                                                                   window.checkHertzNameSpace("htz.res.config");
                                                                                                                   htz.res.config.ReservationConstants = function() {
                                                                                                                       return {
                                                                                                                           ITINERARY: "itinerary",
                                                                                                                           VEHICLES: "vehicles",
                                                                                                                           EXTRAS: "extras",
                                                                                                                           REVIEW_AND_BOOK: "review-and-book",
                                                                                                                           PAYMENT_PROCESSING: "payment-processing",
                                                                                                                           NON_BOOKABLE: "non-bookable",
                                                                                                                           CONFIRMATION: "confirmation",
                                                                                                                           REVIEW: "review",
                                                                                                                           CANCEL_CONFIRMATION: "cancel-confirmation",
                                                                                                                           RESERVATION_LIST: "reservation-list",
                                                                                                                           SEARCH: "search",
                                                                                                                           ERRORS: "errors",
                                                                                                                           MODIFY_ITINERARY: "modify/itinerary",
                                                                                                                           MODIFY_VEHICLES: "modify/vehicles",
                                                                                                                           MODIFY_EXTRAS: "modify/extras",
                                                                                                                           MODIFY_CONFIRMATION: "modify/confirmation",
                                                                                                                           MODIFY_REVIEW_AND_BOOK: "modify/review-and-book",
                                                                                                                           MODIFY_NON_BOOKABLE: "modify/non-bookable",
                                                                                                                           MEMBER_REVIEW: "memberReview",
                                                                                                                           ITINERARY_LAZY: "itinerary-lazy",
                                                                                                                           VEHICLES_LAZY: "vehicles-lazy",
                                                                                                                           REVIEW_AND_BOOK_LAZY: "review-and-book-lazy",
                                                                                                                           LEGACY_ITINERARY: "reservationOnHomepage.jsp",
                                                                                                                           LEGACY_VEHICLES: "whatView.jsp",
                                                                                                                           LEGACY_EXTRAS: "extrasView.jsp",
                                                                                                                           LEGACY_REVIEW_AND_BOOK: "bookableQuoteView.jsp",
                                                                                                                           LEGACY_CONFIRMATION: "confirmationView.jsp",
                                                                                                                           LEGACY_REVIEW: "reviewReservationView.jsp",
                                                                                                                           LEGACY_CANCEL_CONFIRMATION: "cancelConfirmationView.jsp",
                                                                                                                           COUNTER_BYPASS_CONFIRMATION: "counter-bypass-confirmation",
                                                                                                                           ONLINE_CHECKIN_CONFIRMATION: "online-checkin-confirmation",
                                                                                                                           ITINERARY_DATA: "res-home-data",
                                                                                                                           ITINERARY_SC_DATA: "res-itinerary-sc-data",
                                                                                                                           VEHICLES_DATA: "res-vehicles-data",
                                                                                                                           EXTRAS_DATA: "res-extras-data",
                                                                                                                           REVIEW_AND_BOOK_DATA: "res-review-and-book-data",
                                                                                                                           NON_BOOKABLE_DATA: "res-non-bookable-data",
                                                                                                                           CONFIRMATION_DATA: "res-confirmation-data",
                                                                                                                           CONFIRMATION_BACKUP_DATA: "res-confirmation-backup-data",
                                                                                                                           REVIEW_DATA: "res-review-data",
                                                                                                                           CANCEL_CONFIRMATION_DATA: "res-cancel-confirmation-data",
                                                                                                                           RATE_DETAILS_DATA: "res-rate-details-data",
                                                                                                                           ITINERARY_INFO_DATA: "res-itinerary-info-data",
                                                                                                                           RESERVATION_DATA: "res-data",
                                                                                                                           RESERVATION_CONFIRMED: "res-confirmed",
                                                                                                                           RESERVATION_PRESERVED_DATA: "res-preserved-state-data",
                                                                                                                           RESERVATION_INFORMATION_DATA: "res-information",
                                                                                                                           SELECTED_VEHICLE_INFO: "res-selected-vehicle-info",
                                                                                                                           SELECTED_EXTRAS_INFO: "res-selected-extras-info",
                                                                                                                           NEW_SIPP: "newSIPP",
                                                                                                                           MEMBER_SEARCH_DATA: "htz.res.member.searchList",
                                                                                                                           NON_MEMBER_SEARCH_DATA: "htz.res.nonmember.searchList",
                                                                                                                           UPSELL_LIST_DATA: "res-upsell-list-data",
                                                                                                                           REDEEM_POINTS_DATA: "res-redeem-points-data",
                                                                                                                           CONFIRMATION_NUMBER: "res-confirmation-number",
                                                                                                                           CONFIRMATION_NUMBER_INFO: "res-info-confirmation-number",
                                                                                                                           RENTAL_LINKS_DATA: "res-rental-links-data",
                                                                                                                           SPECIAL_OFFERS_DATA: "special-offers-data",
                                                                                                                           APP_CONFIG: "app-config",
                                                                                                                           APP_MEMBER_INFO: "app-member-info",
                                                                                                                           APP_RESERVATION_FORM: "app-res-form",
                                                                                                                           QUOTE_ID: "res-quote-id",
                                                                                                                           VEHICLE_ID: "res-vehicle-id",
                                                                                                                           ITINERARY_LOCATION_INFO: "res_itinerary_location_info",
                                                                                                                           ITINERARY_DISCOUNT_INFO: "res_itinerary_discount_info",
                                                                                                                           CALENDAR_MODE: "calendarMode",
                                                                                                                           RESERVATION_ERROR_LIST: "res-error-list",
                                                                                                                           HOD_VEHICLES: "hod-vehicle-available",
                                                                                                                           ITINERARY_ERROR_DATA: "res-home-error-data",
                                                                                                                           VEHICLES_ERROR_DATA: "res-vehicles-error-data",
                                                                                                                           EXTRAS_ERROR_DATA: "res-extras-error-data",
                                                                                                                           REVIEW_AND_BOOK_ERROR_DATA: "res-review-and-book-error-data",
                                                                                                                           NON_BOOKABLE_ERROR_DATA: "res-non-bookable-error-data",
                                                                                                                           CONFIRMATION_ERROR_DATA: "res-confirmation-error-data",
                                                                                                                           REVIEW_ERROR_DATA: "res-review-error-data",
                                                                                                                           CANCEL_CONFIRMATION_ERROR_DATA: "res-cancel-confirmation-error-data",
                                                                                                                           VEHICLES_FALLBACK_ERROR_DATA: "res-vehicles-fallback-error-data",
                                                                                                                           AFFILIATE_MEMBER_VERIFICATION_COUNT: 0,
                                                                                                                           RENDER_PREPARE_PRESENTER: "prepare-render.res.presenter",
                                                                                                                           RENDER_FAILED_PRESENTER: "render-failed.res.presenter",
                                                                                                                           RENDER_DONE_PRESENTER: "render-done.res.presenter",
                                                                                                                           NAVIGATE_PREPARE_PRESENTER: "prepare-navigate.res.presenter",
                                                                                                                           VALIDATE_ITINERARY: "validate-state.res.itinerary",
                                                                                                                           CHANGE_VEHICLE_IN_REVIEW_BOOK: "vehicle-change.res.review-book",
                                                                                                                           CHANGE_RATE_IN_REVIEW_BOOK: "rate-change.res.review-book",
                                                                                                                           VALIDATE_CONFIRMATION: "validate-state.res.confirmation",
                                                                                                                           ERROR_EXTRAS: "extras-errors.res.extras",
                                                                                                                           RESET_ERRORS_EXTRAS: "extras-reset-errors.res.extras",
                                                                                                                           SUCCESS_EXTRAS: "extras-add-remove-success.res.extras",
                                                                                                                           REMOVE_EXTRAS: "extras-removed.res.rates",
                                                                                                                           LOCATION_DELIVERY_PICKUP: "set-delivery-pickup-location.res.itinerary",
                                                                                                                           LOCATION_COLLECTION_DROPOFF: "set-collection-dropoff-location.res.itinerary",
                                                                                                                           LOCATION_PICKUP: "set-pickup-location.res.itinerary",
                                                                                                                           RECENT_SEARCH_DATA: "set-itinerary-data.res.itinerary",
                                                                                                                           TRACK_ERROR: "track-error",
                                                                                                                           HANDLE_RENDER_FAIL: "handle-render-fail",
                                                                                                                           CURRENCY_CONVERTER: "currency-converter",
                                                                                                                           REFERRER_URL: "referrer-url",
                                                                                                                           ITINERARY_TEMPLATE: "home-page-tpl",
                                                                                                                           VEHICLES_TEMPLATE: "vehicle-page-tpl",
                                                                                                                           EXTRAS_TEMPLATE: "extras-page-tpl",
                                                                                                                           REVIEW_AND_BOOK_TEMPLATE: "bookable-page-tpl",
                                                                                                                           CONFIRMATION_TEMPLATE: "counter-bypass-summary-tpl",
                                                                                                                           REVIEW_TEMPLATE: "res-update-cancel-prompt-tpl",
                                                                                                                           CANCEL_TEMPLATE: "cancel-confirmation-tpl"
                                                                                                                       }
                                                                                                                   }();
                                                                                                                   "function" == typeof define && define.amd && define("reservation/process-config/core/reservation-constants", [], function() {
                                                                                                                       return htz.res.config.ReservationConstants
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.res.config");
                                                                                                                   htz.res.config.ReservationConfig = function() {
                                                                                                                       var b, c;
                                                                                                                       return {
                                                                                                                           configure: function(a) {
                                                                                                                               a.rotar && (b = a.rotar);
                                                                                                                               a.resourceConfig && (c = a.resourceConfig)
                                                                                                                           },
                                                                                                                           getRotar: function() {
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           getResourceConfig: function() {
                                                                                                                               return c
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }();
                                                                                                                   "function" == typeof define && define.amd && define("reservation/config", [], function() {
                                                                                                                       return htz.res.config.ReservationConfig
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.res.config");
                                                                                                                   htz.res.config.ResourceConfigManager = function(e, f, d, a) {
                                                                                                                       return {
                                                                                                                           getPageInfo: function(a) {
                                                                                                                               return d.getResourceConfig().getPageInfo(a)
                                                                                                                           },
                                                                                                                           getLazyPage: function(c) {
                                                                                                                               var b = null;
                                                                                                                               switch (c) {
                                                                                                                                   case a.ITINERARY:
                                                                                                                                       b = a.ITINERARY_LAZY;
                                                                                                                                       break;
                                                                                                                                   case a.VEHICLES:
                                                                                                                                       b = a.VEHICLES_LAZY;
                                                                                                                                       break;
                                                                                                                                   case a.REVIEW_AND_BOOK:
                                                                                                                                       b = a.REVIEW_AND_BOOK_LAZY
                                                                                                                               }
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           getNextPage: function(c) {
                                                                                                                               var b = null;
                                                                                                                               switch (c) {
                                                                                                                                   case a.ITINERARY:
                                                                                                                                       b = a.VEHICLES;
                                                                                                                                       break;
                                                                                                                                   case a.VEHICLES:
                                                                                                                                       b = a.EXTRAS;
                                                                                                                                       break;
                                                                                                                                   case a.EXTRAS:
                                                                                                                                       b = a.REVIEW_AND_BOOK;
                                                                                                                                       break;
                                                                                                                                   case a.REVIEW_AND_BOOK:
                                                                                                                                       b = a.CONFIRMATION;
                                                                                                                                       break;
                                                                                                                                   case a.SEARCH:
                                                                                                                                       b = a.REVIEW
                                                                                                                               }
                                                                                                                               return b
                                                                                                                           },
                                                                                                                           getPages: function() {
                                                                                                                               return [a.ITINERARY, a.VEHICLES, a.EXTRAS, a.REVIEW_AND_BOOK, a.CONFIRMATION, a.REVIEW, a.CANCEL_CONFIRMATION, a.RESERVATION_LIST]
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }(htz, $, htz.res.config.ReservationConfig, htz.res.config.ReservationConstants);
                                                                                                                   "function" == typeof define && define.amd && define("res/res-resource-config-manager", [], function() {
                                                                                                                       return htz.res.config.ResourceConfigManager
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.res.config");
                                                                                                                   htz.res.config.RouteConfig = {
                                                                                                                       routes: {
                                                                                                                           "": "showItinerary",
                                                                                                                           itinerary: "showItinerary",
                                                                                                                           "modify/itinerary": "showItineraryModify",
                                                                                                                           vehicles: "showVehicles",
                                                                                                                           "vehicles/sort/:by/:dir": "showVehicles",
                                                                                                                           "vehicles/sort/:by": "showVehicles",
                                                                                                                           "vehicles/display/:number": "showVehiclesOnly",
                                                                                                                           "modify/vehicles": "showVehiclesModify",
                                                                                                                           "modify/vehicles/sort/:by/:dir": "showVehiclesModify",
                                                                                                                           "modify/vehicles/sort/:by": "showVehiclesModify",
                                                                                                                           "modify/vehicles/display/:number": "showVehiclesOnlyModify",
                                                                                                                           extras: "showExtras",
                                                                                                                           "modify/extras": "showExtrasModify",
                                                                                                                           "review-and-book": "showReviewandBook",
                                                                                                                           "modify/review-and-book": "showReviewandBookModify",
                                                                                                                           "non-bookable": "showNonBookable",
                                                                                                                           "modify/non-bookable": "showNonBookableModify",
                                                                                                                           confirmation: "showConfirmation",
                                                                                                                           "modify/confirmation": "showConfirmation",
                                                                                                                           review: "showReview",
                                                                                                                           search: "showSearch",
                                                                                                                           "reservation-list": "showReservationList",
                                                                                                                           "cancel-confirmation": "showCancelConfirmation",
                                                                                                                           "online-checkin-confirmation": "showOCIConfirmation",
                                                                                                                           "counter-bypass-confirmation": "showCBPConfirmation",
                                                                                                                           "*path": "handleUnknown"
                                                                                                                       },
                                                                                                                       showItinerary: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.ITINERARY)
                                                                                                                       },
                                                                                                                       showItineraryModify: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.ITINERARY, {
                                                                                                                               isModify: !0
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showVehicles: function(a, b) {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES, {
                                                                                                                               sortBy: a,
                                                                                                                               sortDir: b
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showVehiclesModify: function(a, b) {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES, {
                                                                                                                               sortBy: a,
                                                                                                                               sortDir: b,
                                                                                                                               isModify: !0
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showVehiclesOnly: function(a) {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES, {
                                                                                                                               number: a
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showVehiclesOnlyModify: function(a) {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.VEHICLES, {
                                                                                                                               number: a,
                                                                                                                               isModify: !0
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showExtras: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.EXTRAS)
                                                                                                                       },
                                                                                                                       showExtrasModify: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.EXTRAS, {
                                                                                                                               isModify: !0
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showReviewandBook: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.REVIEW_AND_BOOK)
                                                                                                                       },
                                                                                                                       showReviewandBookModify: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.REVIEW_AND_BOOK, {
                                                                                                                               isModify: !0
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showNonBookable: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.NON_BOOKABLE)
                                                                                                                       },
                                                                                                                       showNonBookableModify: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.NON_BOOKABLE, {
                                                                                                                               isModify: !0
                                                                                                                           })
                                                                                                                       },
                                                                                                                       showConfirmation: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.CONFIRMATION)
                                                                                                                       },
                                                                                                                       showReview: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.REVIEW)
                                                                                                                       },
                                                                                                                       showSearch: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.SEARCH)
                                                                                                                       },
                                                                                                                       showCancelConfirmation: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.CANCEL_CONFIRMATION)
                                                                                                                       },
                                                                                                                       showReservationList: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.RESERVATION_LIST)
                                                                                                                       },
                                                                                                                       showOCIConfirmation: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.ONLINE_CHECKIN_CONFIRMATION)
                                                                                                                       },
                                                                                                                       showCBPConfirmation: function() {
                                                                                                                           htz.res.pages.PageHelper.show(htz.res.config.ReservationConstants.COUNTER_BYPASS_CONFIRMATION)
                                                                                                                       },
                                                                                                                       handleUnknown: function() {
                                                                                                                           htz.res.pages.PageHelper.show("unknown")
                                                                                                                       },
                                                                                                                       getRoot: function() {
                                                                                                                           return "/reservation"
                                                                                                                       }
                                                                                                                   };
                                                                                                                   window.checkHertzNameSpace("htz.res.utils");
                                                                                                                   htz.res.utils.DOMHelper = function(b, f, d, e) {
                                                                                                                       return {
                                                                                                                           addTemplate: function(a, c) {
                                                                                                                               if (!a || !c) return !1;
                                                                                                                               var b = d.createElm("res-" + a + "-page-templates", "div", !0);
                                                                                                                               return b ? (b.html(c), !0) : !1
                                                                                                                           },
                                                                                                                           removeTemplate: function(a) {
                                                                                                                               if (!a) return !1;
                                                                                                                               a = b("#res-" + a + "-page-templates");
                                                                                                                               return 0 < a.length ? (a.eq(0).remove(), !0) : !1
                                                                                                                           },
                                                                                                                           getTemplatesId: function(a) {
                                                                                                                               return !a ? "" : "res-" + a + "-page-templates"
                                                                                                                           },
                                                                                                                           addPage: function(a, b) {
                                                                                                                               return !a ? !1 : e.getDomHelper().createPageElm(a, "res", b) ? !0 : !1
                                                                                                                           },
                                                                                                                           removePage: function(a) {
                                                                                                                               if (!a) return !1;
                                                                                                                               a = b("#res-" + a + "-page-container");
                                                                                                                               return 0 < a.length ? (a.eq(0).remove(), !0) : !1
                                                                                                                           },
                                                                                                                           removeTemplateAndPage: function(a) {
                                                                                                                               this.removeTemplate(a);
                                                                                                                               this.removePage(a)
                                                                                                                           },
                                                                                                                           getPageId: function(a) {
                                                                                                                               return !a ? "" : "res-" + a + "-page-container"
                                                                                                                           },
                                                                                                                           isPageAdded: function(a) {
                                                                                                                               return !a ? !1 : 0 < b("#" + this.getPageId(a)).length
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }($, htz, htz.utils.Utils, htz.utils.config.UtilConfig);
                                                                                                                   "function" == typeof define && define.amd && define("utils/domhelper", [], function() {
                                                                                                                       return htz.res.utils.DOMHelper
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.res.utils");
                                                                                                                   htz.res.utils.ReservationLoader = function(j, k, d, l, f, e, g) {
                                                                                                                       function h(c, a) {
                                                                                                                           var b = a.checkElmId;
                                                                                                                           b && 0 < j("#" + b).length && (a.template = null);
                                                                                                                           if (c === g.ITINERARY && a.content) try {
                                                                                                                               if (e.getItem(a.content)) htz.homepage.content = null;
                                                                                                                               else {
                                                                                                                                   var i = htz.homepage.content;
                                                                                                                                   i && (e.setItem(a.content, k.stringify(i)), htz.homepage.content = null)
                                                                                                                               }
                                                                                                                           } catch (d) {} else c === g.RESERVATION_LIST && a.content && (b = localStorage.getItem("res-lookup-content")) && e.setItem(a.content, b)
                                                                                                                       }
                                                                                                                       return {
                                                                                                                           loadResourceByPage: function(c, a) {
                                                                                                                               var b = l.getPageInfo(c);
                                                                                                                               null !=
                                                                                                                                   b ? (h(c, b), b.callback = function(b) {
                                                                                                                                       b.template && f.addTemplate(c, b.template);
                                                                                                                                       a && "function" === typeof a && a(b)
                                                                                                                                   }, b.page = c, d.load(b)) : a && "function" === typeof a && a()
                                                                                                                           },
                                                                                                                           loadResources: function(c, a, b) {
                                                                                                                               null != c ? (b && (h(b, c), c.page = b), c.callback = function(c) {
                                                                                                                                   c.template && b && f.addTemplate(b, c.template);
                                                                                                                                   a && "function" === typeof a && a(c)
                                                                                                                               }, d.load(c)) : a && "function" === typeof a && a()
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }($, JSON, htz.helpers.ResourceLoader, htz.res.config.ResourceConfigManager, htz.res.utils.DOMHelper, htz.helpers.SessionHelper, htz.res.config.ReservationConstants);
                                                                                                                   window.checkHertzNameSpace("htz.res.utils");
                                                                                                                   htz.res.utils.DOMMonitor = function(i, h, e) {
                                                                                                                       function c(a) {
                                                                                                                           f(a);
                                                                                                                           g(a)
                                                                                                                       }

                                                                                                                       function f(a) {
                                                                                                                           e.removeTemplate(a);
                                                                                                                           (a = h.getLazyPage(a)) && e.removeTemplate(a)
                                                                                                                       }

                                                                                                                       function g(a) {
                                                                                                                           e.removePage(a);
                                                                                                                           var b = h.getLazyPage(a);
                                                                                                                           b && e.removePage(b);
                                                                                                                           if (null != d && (b = d[a]) && "function" === typeof b.doCleanup) try {
                                                                                                                               b.doCleanup(), d[a] = null
                                                                                                                           } catch (c) {}
                                                                                                                       }
                                                                                                                       var d = null;
                                                                                                                       return {
                                                                                                                           monitor: function(a) {
                                                                                                                               if (a) {
                                                                                                                                   var b = h.getPages(),
                                                                                                                                       a = i.inArray(a, b);
                                                                                                                                   0 < a ? (2 <= a && (g(b[0]), g(b[1])), 3 <= a && g(b[2]), 4 === a && (c(b[3]), c(b[5]), f(b[0]), f(b[1]), f(b[2])), 5 === a && c(b[4]), 6 === a && c(b[5])) :
                                                                                                                                       0 === a && (c(b[4]), c(b[5]), c(b[6]))
                                                                                                                               }
                                                                                                                           },
                                                                                                                           addPresenter: function(a, b) {
                                                                                                                               null == d && (d = []);
                                                                                                                               d[a] = b
                                                                                                                           },
                                                                                                                           cleanupPage: function(a) {
                                                                                                                               c(a)
                                                                                                                           },
                                                                                                                           doCleanup: function() {
                                                                                                                               d = null
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }($, htz.res.config.ResourceConfigManager, htz.res.utils.DOMHelper);
                                                                                                                   window.checkHertzNameSpace("htz.res.config");
                                                                                                                   htz.res.config.PageValidator = function(d, e, a) {
                                                                                                                       var c = [a.ITINERARY, a.VEHICLES, a.EXTRAS, a.REVIEW_AND_BOOK, a.NON_BOOKABLE, a.CONFIRMATION, a.REVIEW, a.CANCEL_CONFIRMATION, a.SEARCH, a.ONLINE_CHECKIN_CONFIRMATION, a.COUNTER_BYPASS_CONFIRMATION, a.RESERVATION_LIST];
                                                                                                                       return {
                                                                                                                           getValidPage: function(b) {
                                                                                                                               if (this.isValidPage(b)) return b;
                                                                                                                               a: {
                                                                                                                                   for (b = 0; b < c.length; b++)
                                                                                                                                       if (e.isPageAdded(c[b])) {
                                                                                                                                           b = !0;
                                                                                                                                           break a
                                                                                                                                       }
                                                                                                                                   b = !1
                                                                                                                               }
                                                                                                                               return b ? null : this.getDefaultPage()
                                                                                                                           },
                                                                                                                           getDefaultPage: function() {
                                                                                                                               return a.ITINERARY
                                                                                                                           },
                                                                                                                           isValidPage: function(b) {
                                                                                                                               return 0 <=
                                                                                                                                   d.inArray(b, c)
                                                                                                                           },
                                                                                                                           isPartOfSPP: function(b) {
                                                                                                                               var a;
                                                                                                                               a: {
                                                                                                                                   if (b) try {
                                                                                                                                       if (0 <= b.indexOf(htz.config.rootContext + "/reservation")) b.split(htz.config.rootContext + "/reservation");
                                                                                                                                       else {
                                                                                                                                           a = !1;
                                                                                                                                           break a
                                                                                                                                       }
                                                                                                                                   } catch (c) {}
                                                                                                                                   a = !0
                                                                                                                               }
                                                                                                                               return a
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }($, htz.res.utils.DOMHelper, htz.res.config.ReservationConstants);
                                                                                                                   window.checkHertzNameSpace("htz.res.pages");
                                                                                                                   var appCore = htz.config.isApp ? "app" : "core";
                                                                                                                   htz.res.pages.PageHelper = function(e, m, h, f, i, r, s, a) {
                                                                                                                       function n(a, b) {
                                                                                                                           var c = e.Deferred();
                                                                                                                           window.plugins.remoteToLocal.readFromSharedStorage(a, function(a) {
                                                                                                                               a && h.setItem(b, JSON.stringify(a));
                                                                                                                               c.resolve()
                                                                                                                           });
                                                                                                                           return c.promise()
                                                                                                                       }
                                                                                                                       var c = [];
                                                                                                                       c[a.ITINERARY] = "reservation/itinerary/core/presenter/itinerary-presenter";
                                                                                                                       c[a.VEHICLES] = "reservation/vehicle/core/presenter/vehicle-presenter";
                                                                                                                       c[a.EXTRAS] = "reservation/extras/core/presenter/extras-presenter";
                                                                                                                       c[a.REVIEW_AND_BOOK] = "reservation/review-and-book/core/presenter/bookable-presenter";
                                                                                                                       c[a.NON_BOOKABLE] = "reservation/non-bookable/core/presenter/non-bookable-presenter";
                                                                                                                       c[a.CONFIRMATION] = "reservation/confirmation/core/presenter/confirmation-presenter";
                                                                                                                       c[a.SEARCH] = "reservation/itinerary/core/presenter/itinerary-presenter";
                                                                                                                       c[a.REVIEW] = "reservation/confirmation/core/presenter/confirmation-presenter";
                                                                                                                       c[a.CANCEL_CONFIRMATION] = "reservation/cancel-confirmation/core/presenter/cancel-confirmation-presenter";
                                                                                                                       c[a.RESERVATION_LIST] = "reservation/lookup/" + appCore + "/presenter/lookup-presenter";
                                                                                                                       c[a.ONLINE_CHECKIN_CONFIRMATION] =
                                                                                                                           "reservation/confirmation/core/presenter/confirmation-presenter";
                                                                                                                       c[a.COUNTER_BYPASS_CONFIRMATION] = "reservation/confirmation/core/presenter/confirmation-presenter";
                                                                                                                       var p = [a.CONFIRMATION_DATA, a.CANCEL_CONFIRMATION_DATA, a.REVIEW_DATA, a.ITINERARY_DATA, a.VEHICLES_DATA, a.EXTRAS_DATA, a.REVIEW_AND_BOOK_DATA, a.NON_BOOKABLE_DATA, a.ITINERARY_INFO_DATA, a.RATE_DETAILS_DATA, a.UPSELL_LIST_DATA, a.REDEEM_POINTS_DATA, a.APP_RESERVATION_FORM, a.ITINERARY_SC_DATA, a.RENTAL_LINKS_DATA, a.SELECTED_VEHICLE_INFO, a.SELECTED_EXTRAS_INFO],
                                                                                                                           q = {
                                                                                                                               show: function(a, b) {
                                                                                                                                   var c = this,
                                                                                                                                       e = i.getValidPage(a);
                                                                                                                                   e && (e != a ? f.getRotar().rotate(e) : r.loadResourceByPage(a, function(a) {
                                                                                                                                       c.showPage(a, b)
                                                                                                                                   }))
                                                                                                                               },
                                                                                                                               showPage: function(l, b) {
                                                                                                                                   function o() {
                                                                                                                                       var a = l;
                                                                                                                                       try {
                                                                                                                                           var d = a.content;
                                                                                                                                           (!d || e.isEmptyObject(d)) && WebTracking.setError("debug-content-error-" + a.page + "-content-missing", a.page)
                                                                                                                                       } catch (f) {}
                                                                                                                                       require([c[k]], function(a) {
                                                                                                                                           a.show(l, b);
                                                                                                                                           s.addPresenter(k, a)
                                                                                                                                       })
                                                                                                                                   }
                                                                                                                                   var j = e.Deferred(),
                                                                                                                                       f = this,
                                                                                                                                       k = l.page,
                                                                                                                                       b = f.getPageType(k, b);
                                                                                                                                   if (m.config.isApp) {
                                                                                                                                       if (k == a.ITINERARY) {
                                                                                                                                           var d;
                                                                                                                                           b: {
                                                                                                                                               d = window.location.search.substring(1).split("&");
                                                                                                                                               for (var g = 0; g < d.length; g++) {
                                                                                                                                                   var i = d[g].split("=");
                                                                                                                                                   if ("appversion" == i[0]) {
                                                                                                                                                       d = i[1];
                                                                                                                                                       break b
                                                                                                                                                   }
                                                                                                                                               }
                                                                                                                                               d = !1
                                                                                                                                           }
                                                                                                                                           m.config.isApp && (d && "250" != d ? n("res_location_info", a.ITINERARY_LOCATION_INFO).then(function() {
                                                                                                                                               n("res_discount_info", a.ITINERARY_DISCOUNT_INFO).then(function() {
                                                                                                                                                   j.resolve();
                                                                                                                                                   setTimeout(function() {
                                                                                                                                                       window.plugins.remoteToLocal.clearFromSharedStorage("res_location_info");
                                                                                                                                                       window.plugins.remoteToLocal.clearFromSharedStorage("res_discount_info")
                                                                                                                                                   }, 0)
                                                                                                                                               })
                                                                                                                                           }) : (d = window.localStorage.getItem("res_location_info"), g = window.localStorage.getItem("res_discount_info"),
                                                                                                                                               d && h.setItem(a.ITINERARY_LOCATION_INFO, d), g && h.setItem(a.ITINERARY_DISCOUNT_INFO, g), window.localStorage.removeItem("res_location_info"), window.localStorage.removeItem("res_discount_info"), j.resolve()))
                                                                                                                                       } else j.resolve();
                                                                                                                                       j.promise().then(function() {
                                                                                                                                           o.call(f)
                                                                                                                                       })
                                                                                                                                   } else o()
                                                                                                                               },
                                                                                                                               showDefault: function() {
                                                                                                                                   f.getRotar().rotate(i.getDefaultPage())
                                                                                                                               },
                                                                                                                               resetReservation: function() {
                                                                                                                                   h.removeListedItems(p)
                                                                                                                               },
                                                                                                                               resetReservationBut: function(a) {
                                                                                                                                   if (a && 0 != a.length) {
                                                                                                                                       var b = e.merge([], p),
                                                                                                                                           b = e.grep(b, function(b) {
                                                                                                                                               return 0 > e.inArray(b, a)
                                                                                                                                           });
                                                                                                                                       0 < b.length && h.removeListedItems(b)
                                                                                                                                   }
                                                                                                                               },
                                                                                                                               getPageType: function(c, b) {
                                                                                                                                   b || (b = {});
                                                                                                                                   c == a.REVIEW ? b.isReview = !0 : c == a.ONLINE_CHECKIN_CONFIRMATION ? b.isOCI = !0 : c == a.COUNTER_BYPASS_CONFIRMATION ? b.isCBP = !0 : c == a.SEARCH && (b.isSearch = !0);
                                                                                                                                   return b
                                                                                                                               },
                                                                                                                               getPresenter: function(a) {
                                                                                                                                   return c[a]
                                                                                                                               }
                                                                                                                           };
                                                                                                                       e.unsubscribe(a.RENDER_FAILED_PRESENTER);
                                                                                                                       e.subscribe(a.RENDER_FAILED_PRESENTER, function(c, b) {
                                                                                                                           b && b.isReview ? f.getRotar().rotate(a.SEARCH) : q.showDefault()
                                                                                                                       });
                                                                                                                       return q
                                                                                                                   }($, htz, htz.helpers.SessionHelper, htz.res.config.ReservationConfig, htz.res.config.PageValidator,
                                                                                                                       htz.res.utils.ReservationLoader, htz.res.utils.DOMMonitor, htz.res.config.ReservationConstants);
                                                                                                                   window.checkHertzNameSpace("htz.res.utils");
                                                                                                                   htz.res.utils.ResourceMonitor = function(f, d, c, e) {
                                                                                                                       return {
                                                                                                                           trigger: function(a, b) {
                                                                                                                               var c = this;
                                                                                                                               b && 0 < b ? setTimeout(function() {
                                                                                                                                   c.process(a)
                                                                                                                               }, b) : c.process(a)
                                                                                                                           },
                                                                                                                           process: function(a) {
                                                                                                                               a = c.getNextPage(a);
                                                                                                                               if (null != a) {
                                                                                                                                   var b = c.getPageInfo(a);
                                                                                                                                   b && (b.callback = htz.res.utils.ResourceMonitor.action, b.page = a, d.load(b))
                                                                                                                               }
                                                                                                                           },
                                                                                                                           action: function(a) {
                                                                                                                               a.template && e.addTemplate(a.page, a.template)
                                                                                                                           },
                                                                                                                           fetchResource: function(a) {
                                                                                                                               return c.getPageInfo(a)
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }($, htz.helpers.ResourceLoader, htz.res.config.ResourceConfigManager, htz.res.utils.DOMHelper);
                                                                                                                   window.checkHertzNameSpace("htz.res.utils");
                                                                                                                   htz.res.utils.ResourceLazyLoader = function(f, g, d, h) {
                                                                                                                       var c = null;
                                                                                                                       return {
                                                                                                                           trigger: function(a, b, d) {
                                                                                                                               var e = this;
                                                                                                                               c = d;
                                                                                                                               b && 0 < b ? setTimeout(function() {
                                                                                                                                   e.load(a)
                                                                                                                               }, b) : e.load(a)
                                                                                                                           },
                                                                                                                           load: function(a) {
                                                                                                                               if (a = d.getLazyPage(a)) {
                                                                                                                                   var b = d.getPageInfo(a);
                                                                                                                                   b ? (b.callback = htz.res.utils.ResourceLazyLoader.action, b.page = a, g.load(b)) : c = null
                                                                                                                               } else c = null
                                                                                                                           },
                                                                                                                           action: function(a) {
                                                                                                                               a.template && h.addTemplate(a.page, a.template);
                                                                                                                               c && a.content && f.extend(!0, c, a.content);
                                                                                                                               c = null
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }($, htz.helpers.ResourceLoader, htz.res.config.ResourceConfigManager, htz.res.utils.DOMHelper);
                                                                                                                   window.checkHertzNameSpace("htz.routers.res");
                                                                                                                   htz.routers.res.ReservationRotar = function(g, d, a) {
                                                                                                                       return {
                                                                                                                           rotate: function(h, e) {
                                                                                                                               var b = null;
                                                                                                                               switch (h) {
                                                                                                                                   case a.ITINERARY:
                                                                                                                                       b = "#" + a.ITINERARY;
                                                                                                                                       break;
                                                                                                                                   case a.VEHICLES:
                                                                                                                                       b = "#" + a.VEHICLES;
                                                                                                                                       break;
                                                                                                                                   case a.EXTRAS:
                                                                                                                                       b = "#" + a.EXTRAS;
                                                                                                                                       break;
                                                                                                                                   case a.REVIEW_AND_BOOK:
                                                                                                                                       b = "#" + a.REVIEW_AND_BOOK;
                                                                                                                                       break;
                                                                                                                                   case a.NON_BOOKABLE:
                                                                                                                                       b = "#" + a.NON_BOOKABLE;
                                                                                                                                       break;
                                                                                                                                   case a.CONFIRMATION:
                                                                                                                                       b = "#" + a.CONFIRMATION;
                                                                                                                                       break;
                                                                                                                                   case a.REVIEW:
                                                                                                                                       b = "#" + a.REVIEW;
                                                                                                                                       break;
                                                                                                                                   case a.SEARCH:
                                                                                                                                       b = "#" + a.SEARCH;
                                                                                                                                       break;
                                                                                                                                   case a.RESERVATION_LIST:
                                                                                                                                       b = "#" + a.RESERVATION_LIST;
                                                                                                                                       break;
                                                                                                                                   case a.CANCEL_CONFIRMATION:
                                                                                                                                       b =
                                                                                                                                           "#" + a.CANCEL_CONFIRMATION;
                                                                                                                                       break;
                                                                                                                                   case a.MODIFY_ITINERARY:
                                                                                                                                       b = "#" + a.MODIFY_ITINERARY;
                                                                                                                                       break;
                                                                                                                                   case a.MODIFY_VEHICLES:
                                                                                                                                       b = "#" + a.MODIFY_VEHICLES;
                                                                                                                                       break;
                                                                                                                                   case a.MODIFY_EXTRAS:
                                                                                                                                       b = "#" + a.MODIFY_EXTRAS;
                                                                                                                                       break;
                                                                                                                                   case a.MODIFY_REVIEW_AND_BOOK:
                                                                                                                                       b = "#" + a.MODIFY_REVIEW_AND_BOOK;
                                                                                                                                       break;
                                                                                                                                   case a.MODIFY_NON_BOOKABLE:
                                                                                                                                       b = "#" + a.MODIFY_NON_BOOKABLE;
                                                                                                                                       break;
                                                                                                                                   case a.MODIFY_CONFIRMATION:
                                                                                                                                       b = "#" + a.MODIFY_CONFIRMATION
                                                                                                                               }
                                                                                                                               if (b) {
                                                                                                                                   e && (b += "/" + e);
                                                                                                                                   try {
                                                                                                                                       if (!g.config.isApp && window.location.hash === b) {
                                                                                                                                           var c = b,
                                                                                                                                               c = c.substring(1),
                                                                                                                                               f = htz.res.config.RouteConfig;
                                                                                                                                           f[f.routes[c]]()
                                                                                                                                       } else d.getRotar().rotateTo(b)
                                                                                                                                   } catch (i) {
                                                                                                                                       d.getRotar().rotateTo(b)
                                                                                                                                   }
                                                                                                                               }
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }(htz,
                                                                                                                       htz.utils.config.UtilConfig, htz.res.config.ReservationConstants);
                                                                                                                   "function" == typeof define && define.amd && define("routers/res-rotar", [], function() {
                                                                                                                       return htz.routers.res.ReservationRotar
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.web.res.config");
                                                                                                                   htz.web.res.config.ResourceConfig = function(j, k, c) {
                                                                                                                       var k = navigator.userAgent.toLowerCase(),
                                                                                                                           i = -1 != k.indexOf("msie") && 8 >= parseInt(k.split("msie")[1]) ? !0 : !1,
                                                                                                                           d, a = j.config.buildId,
                                                                                                                           m = j.config.subSystemId,
                                                                                                                           l = j.config.dialect,
                                                                                                                           e = j.config.orgDeviceGroup,
                                                                                                                           b = j.config.rootContext,
                                                                                                                           n = j.config.apiDomain,
                                                                                                                           o = j.config.pos;
                                                                                                                       l.substr(0, 2);
                                                                                                                       var h = n + "/rest/content/" + a + "/" + m + "/" + l + "/all/reservation",
                                                                                                                           g = b + "/assets/" + a + "/html/all/reservation";
                                                                                                                       return {
                                                                                                                           getPageInfo: function(j) {
                                                                                                                               var f = null;
                                                                                                                               switch (j) {
                                                                                                                                   case c.ITINERARY:
                                                                                                                                       f = {
                                                                                                                                           template: g + "/home/homePage.html",
                                                                                                                                           content: h + "/home/homePage",
                                                                                                                                           checkElmId: c.ITINERARY_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.ITINERARY_LAZY:
                                                                                                                                       f = {
                                                                                                                                           template: g + "/home/homeOverlays.html",
                                                                                                                                           content: h + "/home/homeOverlays"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.VEHICLES:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/vehicle/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/vehicle/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/vehicle.js",
                                                                                                                                           template: g + "/vehicle/vehiclePage.html",
                                                                                                                                           content: h + "/vehicle/vehiclePage",
                                                                                                                                           checkElmId: c.VEHICLES_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.VEHICLES_LAZY:
                                                                                                                                       f = {
                                                                                                                                           template: g + "/vehicle/vehicleOverlays.html",
                                                                                                                                           content: h + "/vehicle/vehicleOverlays"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.EXTRAS:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/extras/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/extras/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/extras.js",
                                                                                                                                           template: g + "/extras/extrasPage.html",
                                                                                                                                           content: h + "/extras/extrasPage",
                                                                                                                                           checkElmId: c.EXTRAS_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.REVIEW_AND_BOOK:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/bookable/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/bookable/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e +
                                                                                                                                               "/reservation/bookable.js",
                                                                                                                                           template: g + "/review-and-book/review-and-book.html",
                                                                                                                                           content: h + "/review-and-book/review-and-book",
                                                                                                                                           checkElmId: c.REVIEW_AND_BOOK_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.REVIEW_AND_BOOK_LAZY:
                                                                                                                                       f = {
                                                                                                                                           template: g + "/review-and-book/review-and-book-overlays.html",
                                                                                                                                           content: h + "/review-and-book/review-and-book-overlays"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.NON_BOOKABLE:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/bookable/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/bookable/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/nonbookable.js",
                                                                                                                                           template: g + "/non-bookable/non-bookable.html",
                                                                                                                                           content: n + "/rest/content/" + m + "/" + l + "/" + o + "/all/reservation/non-bookable/non-bookable/contexts;howToReachUs=HTRU"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.CONFIRMATION:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/confirmation/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/confirmation/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/confirmation.js",
                                                                                                                                           template: g + "/confirmation/confirmation.html",
                                                                                                                                           content: h + "/confirmation/confirmation",
                                                                                                                                           checkElmId: c.CONFIRMATION_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.ONLINE_CHECKIN_CONFIRMATION:
                                                                                                                                       d =
                                                                                                                                           i ? b + "/assets/" + a + "/all/reservation/confirmation/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/confirmation/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/confirmation.js",
                                                                                                                                           template: g + "/confirmation/confirmation.html",
                                                                                                                                           content: h + "/confirmation/confirmation"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.COUNTER_BYPASS_CONFIRMATION:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/confirmation/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/confirmation/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/confirmation.js",
                                                                                                                                           template: g +
                                                                                                                                               "/confirmation/confirmation.html",
                                                                                                                                           content: h + "/confirmation/confirmation"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.REVIEW:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/confirmation/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/confirmation/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/confirmation.js",
                                                                                                                                           template: g + "/review/reviewPage.html",
                                                                                                                                           content: h + "/review/reviewPage",
                                                                                                                                           checkElmId: c.REVIEW_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.SEARCH:
                                                                                                                                       f = {
                                                                                                                                           template: g + "/home/homePage.html",
                                                                                                                                           content: h + "/home/homePage",
                                                                                                                                           checkElmId: c.ITINERARY_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.RESERVATION_LIST:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/home/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/home/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           template: g + "/lookup/res-lookup.html",
                                                                                                                                           content: h + "/lookup/res-lookup"
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.CANCEL_CONFIRMATION:
                                                                                                                                       d = i ? b + "/assets/" + a + "/all/reservation/cancellation/ie_style.css" : b + "/assets/" + a + "/" + e + "/reservation/cancellation/style.css";
                                                                                                                                       f = {
                                                                                                                                           css: d,
                                                                                                                                           js: b + "/assets/" + a + "/" + e + "/reservation/cancelConfirmation.js",
                                                                                                                                           template: g + "/cancel-confirmation/cancel-confirmation.html",
                                                                                                                                           content: h +
                                                                                                                                               "/cancel-confirmation/cancel-confirmation",
                                                                                                                                           checkElmId: c.CANCEL_TEMPLATE
                                                                                                                                       };
                                                                                                                                       break;
                                                                                                                                   case c.CURRENCY_CONVERTER:
                                                                                                                                       f = {
                                                                                                                                           css: b + "/assets/" + a + "/all/reservation/currency-converter/style.css",
                                                                                                                                           js: b + "/assets/" + a + "/reservation/currency-converter.js",
                                                                                                                                           template: g + "/currency-converter/currency-converter.html",
                                                                                                                                           content: h + "/currency-converter/currency-converter"
                                                                                                                                       }
                                                                                                                               }
                                                                                                                               return f
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }(htz, $, htz.res.config.ReservationConstants);
                                                                                                                   "function" == typeof define && define.amd && define("res/res-resource-config", [], function() {
                                                                                                                       return htz.web.res.config.ResourceConfig
                                                                                                                   });
                                                                                                                   window.checkHertzNameSpace("htz.web.res.initiator");
                                                                                                                   htz.web.res.initiator.ResInitiator = function(a, b, c) {
                                                                                                                       return {
                                                                                                                           initiate: function() {
                                                                                                                               c.configure({
                                                                                                                                   rotar: htz.routers.res.ReservationRotar,
                                                                                                                                   resourceConfig: htz.web.res.config.ResourceConfig
                                                                                                                               });
                                                                                                                               var d = new(Backbone.Router.extend(a));
                                                                                                                               Backbone.history.start({
                                                                                                                                   root: a.getRoot()
                                                                                                                               });
                                                                                                                               b.configure({
                                                                                                                                   router: d
                                                                                                                               })
                                                                                                                           }
                                                                                                                       }
                                                                                                                   }(htz.res.config.RouteConfig, htz.utils.config.UtilConfig, htz.res.config.ReservationConfig);
                                                                                                                   htz.web.res.initiator.ResInitiator.initiate();








































































                                                                                                                   /* EOF */